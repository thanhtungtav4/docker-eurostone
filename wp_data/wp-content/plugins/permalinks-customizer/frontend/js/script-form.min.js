var regeneratePermalink=document.getElementById("regenerate_permalink"),regenerateValue=document.getElementById("permalinks_customizer_regenerate_permalink"),savePost=document.getElementById("save-post"),getHomeURL=document.getElementById("permalinks_customizer_home_url"),getPermalink=document.getElementById("permalinks_customizer"),checkYoastSEO=document.getElementById("wpseo_meta"),editPost="",isSaving="",lastIsSaving=!1;function regenratePermalinkOption(){"use strict";var e=confirm("Are you sure, you want to regenerete Permalink?");if(savePost||(document.querySelector("#editor .editor-post-save-draft")?savePost=document.querySelector("#editor .editor-post-save-draft"):document.querySelector("#editor .editor-post-publish-button")&&(savePost=document.querySelector("#editor .editor-post-publish-button"))),savePost)e&&(regenerateValue.value="true",savePost.click());else{var t=document.querySelector("body");if(t&&t.classList.contains("term-php")){var n=document.querySelector("body .edit-tag-actions input[type='submit']");e&&(regenerateValue.value="true",n.click())}}}function changeSEOLinkOnBlur(){"use strict";var e=document.getElementById("snippet_citeBase");if(e&&getHomeURL&&""!==getHomeURL.value&&getPermalink&&getPermalink.value)var t=0,n=setInterval(function(){t+=1,e.innerHTML=getHomeURL.value+"/"+getPermalink.value,5===t&&clearInterval(n)},1e3)}function changeSEOLink(){"use strict";var e=document.getElementById("snippet_citeBase");if(e&&getHomeURL&&""!==getHomeURL.value&&getPermalink&&getPermalink.value){var t=0,n=setInterval(function(){t+=1,e.innerHTML=getHomeURL.value+"/"+getPermalink.value,5===t&&clearInterval(n)},1e3),a=document.getElementById("snippet-editor-title"),i=document.getElementById("snippet-editor-slug"),r=document.getElementById("snippet-editor-meta-description"),s=document.getElementById("snippet_cite");a&&a.addEventListener("blur",changeSEOLinkOnBlur),i&&i.addEventListener("blur",changeSEOLinkOnBlur),r&&r.addEventListener("blur",changeSEOLinkOnBlur),s&&(s.style.display="none")}}function focusPermalinkField(){"use strict";var e=document.getElementById("permalinks-customizer-post-slug");e&&(e.style.color="#000")}function blurPermalinkField(){"use strict";var e=document.getElementById("permalinks-customizer-post-slug"),t=document.getElementById("original_permalink");e&&(document.getElementById("permalinks_customizer").value=e.value,""!=e.value&&e.value!=t.value||(e.value=t.value,e.style.color="#ddd"))}function updateMetaBox(){"use strict";if(editPost){var e=document.getElementsByClassName("edit-post-post-link__preview-label");if(e&&e[0]&&e[0].parentNode.classList.add("pc-permalink-hidden"),(isSaving=editPost.isSavingMetaBoxes())!==lastIsSaving&&!isSaving){lastIsSaving=isSaving;var t=wp.data.select("core/editor").getEditedPostAttribute("id"),n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(this.responseText),t=document.getElementById("permalinks_customizer_add");getPermalink.value=e.permalink_customizer,document.getElementById("permalinks-customizer-post-slug").value=e.permalink_customizer,document.getElementById("original_permalink").value=e.original_permalink,document.querySelector("#view-post-btn a").href=getHomeURL.value+"/"+e.permalink_customizer,t&&"add"==t.value&&(document.getElementById("permalinks-customizer-edit-box").style.display=""),document.querySelector(".components-notice__content a")&&(document.querySelector(".components-notice__content a").href="/"+e.permalink_customizer)}},n.open("GET",getHomeURL.value+"/wp-json/permalinks-customizer/v1/get-permalink/"+t,!0),n.setRequestHeader("Cache-Control","private, max-age=0, no-cache"),n.send()}lastIsSaving=isSaving}}function hideDefaultPermalink(){"use strict";var e=document.getElementsByClassName("edit-post-post-link__preview-label");e&&e[0]&&e[0].parentNode.classList.add("pc-permalink-hidden")}function permalinkContentLoaded(){"use strict";var e=document.getElementById("permalinks-customizer-edit-box"),t=document.getElementsByClassName("edit-post-post-link__preview-label"),n=document.getElementById("permalinks-customizer-post-slug");if(regeneratePermalink&&regenerateValue&&(regeneratePermalink.addEventListener("click",regenratePermalinkOption),savePost||(savePost=document.getElementById("publish"))),n&&(n.addEventListener("focus",focusPermalinkField),n.addEventListener("blur",blurPermalinkField)),checkYoastSEO&&window.addEventListener("load",changeSEOLink),""===document.querySelector("#permalinks-customizer-edit-box .inside").innerHTML.trim()&&(e.style.display="none"),wp.data){var a=document.getElementById("permalinks_customizer_add"),i=document.querySelectorAll(".edit-post-sidebar .components-panel__header"),r=0,s=i.length;if(a&&"add"==a.value&&(e.style.display="none"),editPost=wp.data.select("core/edit-post"),wp.data.subscribe(updateMetaBox),t&&t[0]&&t[0].parentNode.classList.add("pc-permalink-hidden"),e.classList.contains("closed")&&e.classList.remove("closed"),i&&s>0)for(;r<s;)i[r].addEventListener("click",hideDefaultPermalink),r+=1}}document.addEventListener("DOMContentLoaded",permalinkContentLoaded);
