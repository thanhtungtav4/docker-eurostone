/*! For license information please see app.js.LICENSE.txt */
(()=>{var __webpack_modules__={675:function(t){var e;e=function(){return function(t){var e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={exports:{},id:s,loaded:!1};return t[s].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){"use strict";var s=n(1).default;e.__esModule=!0;var i=s(n(2)),r=s(n(45)),o=n(46),a=n(51),l=s(n(52)),c=s(n(49)),u=s(n(44)),h=i.default.create;function d(){var t=h();return t.compile=function(e,n){return a.compile(e,n,t)},t.precompile=function(e,n){return a.precompile(e,n,t)},t.AST=r.default,t.Compiler=a.Compiler,t.JavaScriptCompiler=l.default,t.Parser=o.parser,t.parse=o.parse,t.parseWithoutProcessing=o.parseWithoutProcessing,t}var p=d();p.create=d,u.default(p),p.Visitor=c.default,p.default=p,e.default=p,t.exports=e.default},function(t,e){"use strict";e.default=function(t){return t&&t.__esModule?t:{default:t}},e.__esModule=!0},function(t,e,n){"use strict";var s=n(3).default,i=n(1).default;e.__esModule=!0;var r=s(n(4)),o=i(n(37)),a=i(n(6)),l=s(n(5)),c=s(n(38)),u=i(n(44));function h(){var t=new r.HandlebarsEnvironment;return l.extend(t,r),t.SafeString=o.default,t.Exception=a.default,t.Utils=l,t.escapeExpression=l.escapeExpression,t.VM=c,t.template=function(e){return c.template(e,t)},t}var d=h();d.create=h,u.default(d),d.default=d,e.default=d,t.exports=e.default},function(t,e){"use strict";e.default=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},e.__esModule=!0},function(t,e,n){"use strict";var s=n(1).default;e.__esModule=!0,e.HandlebarsEnvironment=h;var i=n(5),r=s(n(6)),o=n(10),a=n(30),l=s(n(32)),c=n(33);e.VERSION="4.7.7",e.COMPILER_REVISION=8,e.LAST_COMPATIBLE_COMPILER_REVISION=7,e.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};var u="[object Object]";function h(t,e,n){this.helpers=t||{},this.partials=e||{},this.decorators=n||{},o.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}h.prototype={constructor:h,logger:l.default,log:l.default.log,registerHelper:function(t,e){if(i.toString.call(t)===u){if(e)throw new r.default("Arg not supported with multiple helpers");i.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){if(i.toString.call(t)===u)i.extend(this.partials,t);else{if(void 0===e)throw new r.default('Attempting to register a partial called "'+t+'" as undefined');this.partials[t]=e}},unregisterPartial:function(t){delete this.partials[t]},registerDecorator:function(t,e){if(i.toString.call(t)===u){if(e)throw new r.default("Arg not supported with multiple decorators");i.extend(this.decorators,t)}else this.decorators[t]=e},unregisterDecorator:function(t){delete this.decorators[t]},resetLoggedPropertyAccesses:function(){c.resetLoggedProperties()}};var d=l.default.log;e.log=d,e.createFrame=i.createFrame,e.logger=l.default},function(t,e){"use strict";e.__esModule=!0,e.extend=o,e.indexOf=function(t,e){for(var n=0,s=t.length;n<s;n++)if(t[n]===e)return n;return-1},e.escapeExpression=function(t){if("string"!=typeof t){if(t&&t.toHTML)return t.toHTML();if(null==t)return"";if(!t)return t+"";t=""+t}return i.test(t)?t.replace(s,r):t},e.isEmpty=function(t){return!t&&0!==t||!(!c(t)||0!==t.length)},e.createFrame=function(t){var e=o({},t);return e._parent=t,e},e.blockParams=function(t,e){return t.path=e,t},e.appendContextPath=function(t,e){return(t?t+".":"")+e};var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},s=/[&<>"'`=]/g,i=/[&<>"'`=]/;function r(t){return n[t]}function o(t){for(var e=1;e<arguments.length;e++)for(var n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&(t[n]=arguments[e][n]);return t}var a=Object.prototype.toString;e.toString=a;var l=function(t){return"function"==typeof t};l(/x/)&&(e.isFunction=l=function(t){return"function"==typeof t&&"[object Function]"===a.call(t)}),e.isFunction=l;var c=Array.isArray||function(t){return!(!t||"object"!=typeof t)&&"[object Array]"===a.call(t)};e.isArray=c},function(t,e,n){"use strict";var s=n(7).default;e.__esModule=!0;var i=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function r(t,e){var n=e&&e.loc,o=void 0,a=void 0,l=void 0,c=void 0;n&&(o=n.start.line,a=n.end.line,l=n.start.column,c=n.end.column,t+=" - "+o+":"+l);for(var u=Error.prototype.constructor.call(this,t),h=0;h<i.length;h++)this[i[h]]=u[i[h]];Error.captureStackTrace&&Error.captureStackTrace(this,r);try{n&&(this.lineNumber=o,this.endLineNumber=a,s?(Object.defineProperty(this,"column",{value:l,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:c,enumerable:!0})):(this.column=l,this.endColumn=c))}catch(t){}}r.prototype=new Error,e.default=r,t.exports=e.default},function(t,e,n){t.exports={default:n(8),__esModule:!0}},function(t,e,n){var s=n(9);t.exports=function(t,e,n){return s.setDesc(t,e,n)}},function(t,e){var n=Object;t.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(t,e,n){"use strict";var s=n(1).default;e.__esModule=!0,e.registerDefaultHelpers=function(t){i.default(t),r.default(t),o.default(t),a.default(t),l.default(t),c.default(t),u.default(t)},e.moveHelperToHooks=function(t,e,n){t.helpers[e]&&(t.hooks[e]=t.helpers[e],n||delete t.helpers[e])};var i=s(n(11)),r=s(n(12)),o=s(n(25)),a=s(n(26)),l=s(n(27)),c=s(n(28)),u=s(n(29))},function(t,e,n){"use strict";e.__esModule=!0;var s=n(5);e.default=function(t){t.registerHelper("blockHelperMissing",(function(e,n){var i=n.inverse,r=n.fn;if(!0===e)return r(this);if(!1===e||null==e)return i(this);if(s.isArray(e))return e.length>0?(n.ids&&(n.ids=[n.name]),t.helpers.each(e,n)):i(this);if(n.data&&n.ids){var o=s.createFrame(n.data);o.contextPath=s.appendContextPath(n.data.contextPath,n.name),n={data:o}}return r(e,n)}))},t.exports=e.default},function(t,e,n){(function(s){"use strict";var i=n(13).default,r=n(1).default;e.__esModule=!0;var o=n(5),a=r(n(6));e.default=function(t){t.registerHelper("each",(function(t,e){if(!e)throw new a.default("Must pass iterator to #each");var n,r=e.fn,l=e.inverse,c=0,u="",h=void 0,d=void 0;function p(e,n,s){h&&(h.key=e,h.index=n,h.first=0===n,h.last=!!s,d&&(h.contextPath=d+e)),u+=r(t[e],{data:h,blockParams:o.blockParams([t[e],e],[d+e,null])})}if(e.data&&e.ids&&(d=o.appendContextPath(e.data.contextPath,e.ids[0])+"."),o.isFunction(t)&&(t=t.call(this)),e.data&&(h=o.createFrame(e.data)),t&&"object"==typeof t)if(o.isArray(t))for(var g=t.length;c<g;c++)c in t&&p(c,c,c===t.length-1);else if(s.Symbol&&t[s.Symbol.iterator]){for(var _=[],f=t[s.Symbol.iterator](),m=f.next();!m.done;m=f.next())_.push(m.value);for(g=(t=_).length;c<g;c++)p(c,c,c===t.length-1)}else n=void 0,i(t).forEach((function(t){void 0!==n&&p(n,c-1),n=t,c++})),void 0!==n&&p(n,c-1,!0);return 0===c&&(u=l(this)),u}))},t.exports=e.default}).call(e,function(){return this}())},function(t,e,n){t.exports={default:n(14),__esModule:!0}},function(t,e,n){n(15),t.exports=n(21).Object.keys},function(t,e,n){var s=n(16);n(18)("keys",(function(t){return function(e){return t(s(e))}}))},function(t,e,n){var s=n(17);t.exports=function(t){return Object(s(t))}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var s=n(19),i=n(21),r=n(24);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],o={};o[t]=e(n),s(s.S+s.F*r((function(){n(1)})),"Object",o)}},function(t,e,n){var s=n(20),i=n(21),r=n(22),o=function(t,e,n){var a,l,c,u=t&o.F,h=t&o.G,d=t&o.S,p=t&o.P,g=t&o.B,_=t&o.W,f=h?i:i[e]||(i[e]={}),m=h?s:d?s[e]:(s[e]||{}).prototype;for(a in h&&(n=e),n)(l=!u&&m&&a in m)&&a in f||(c=l?m[a]:n[a],f[a]=h&&"function"!=typeof m[a]?n[a]:g&&l?r(c,s):_&&m[a]==c?function(t){var e=function(e){return this instanceof t?new t(e):t(e)};return e.prototype=t.prototype,e}(c):p&&"function"==typeof c?r(Function.call,c):c,p&&((f.prototype||(f.prototype={}))[a]=c))};o.F=1,o.G=2,o.S=4,o.P=8,o.B=16,o.W=32,t.exports=o},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"1.2.6"};"number"==typeof __e&&(__e=n)},function(t,e,n){var s=n(23);t.exports=function(t,e,n){if(s(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,s){return t.call(e,n,s)};case 3:return function(n,s,i){return t.call(e,n,s,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";var s=n(1).default;e.__esModule=!0;var i=s(n(6));e.default=function(t){t.registerHelper("helperMissing",(function(){if(1!==arguments.length)throw new i.default('Missing helper: "'+arguments[arguments.length-1].name+'"')}))},t.exports=e.default},function(t,e,n){"use strict";var s=n(1).default;e.__esModule=!0;var i=n(5),r=s(n(6));e.default=function(t){t.registerHelper("if",(function(t,e){if(2!=arguments.length)throw new r.default("#if requires exactly one argument");return i.isFunction(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||i.isEmpty(t)?e.inverse(this):e.fn(this)})),t.registerHelper("unless",(function(e,n){if(2!=arguments.length)throw new r.default("#unless requires exactly one argument");return t.helpers.if.call(this,e,{fn:n.inverse,inverse:n.fn,hash:n.hash})}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("log",(function(){for(var e=[void 0],n=arguments[arguments.length-1],s=0;s<arguments.length-1;s++)e.push(arguments[s]);var i=1;null!=n.hash.level?i=n.hash.level:n.data&&null!=n.data.level&&(i=n.data.level),e[0]=i,t.log.apply(t,e)}))},t.exports=e.default},function(t,e){"use strict";e.__esModule=!0,e.default=function(t){t.registerHelper("lookup",(function(t,e,n){return t?n.lookupProperty(t,e):t}))},t.exports=e.default},function(t,e,n){"use strict";var s=n(1).default;e.__esModule=!0;var i=n(5),r=s(n(6));e.default=function(t){t.registerHelper("with",(function(t,e){if(2!=arguments.length)throw new r.default("#with requires exactly one argument");i.isFunction(t)&&(t=t.call(this));var n=e.fn;if(i.isEmpty(t))return e.inverse(this);var s=e.data;return e.data&&e.ids&&((s=i.createFrame(e.data)).contextPath=i.appendContextPath(e.data.contextPath,e.ids[0])),n(t,{data:s,blockParams:i.blockParams([t],[s&&s.contextPath])})}))},t.exports=e.default},function(t,e,n){"use strict";var s=n(1).default;e.__esModule=!0,e.registerDefaultDecorators=function(t){i.default(t)};var i=s(n(31))},function(t,e,n){"use strict";e.__esModule=!0;var s=n(5);e.default=function(t){t.registerDecorator("inline",(function(t,e,n,i){var r=t;return e.partials||(e.partials={},r=function(i,r){var o=n.partials;n.partials=s.extend({},o,e.partials);var a=t(i,r);return n.partials=o,a}),e.partials[i.args[0]]=i.fn,r}))},t.exports=e.default},function(t,e,n){"use strict";e.__esModule=!0;var s=n(5),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(t){if("string"==typeof t){var e=s.indexOf(i.methodMap,t.toLowerCase());t=e>=0?e:parseInt(t,10)}return t},log:function(t){if(t=i.lookupLevel(t),"undefined"!=typeof console&&i.lookupLevel(i.level)<=t){var e=i.methodMap[t];console[e]||(e="log");for(var n=arguments.length,s=Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];console[e].apply(console,s)}}};e.default=i,t.exports=e.default},function(t,e,n){"use strict";var s=n(34).default,i=n(13).default,r=n(3).default;e.__esModule=!0,e.createProtoAccessControl=function(t){var e=s(null);e.constructor=!1,e.__defineGetter__=!1,e.__defineSetter__=!1,e.__lookupGetter__=!1;var n=s(null);return n.__proto__=!1,{properties:{whitelist:o.createNewLookupObject(n,t.allowedProtoProperties),defaultValue:t.allowProtoPropertiesByDefault},methods:{whitelist:o.createNewLookupObject(e,t.allowedProtoMethods),defaultValue:t.allowProtoMethodsByDefault}}},e.resultIsAllowed=function(t,e,n){return function(t,e){return void 0!==t.whitelist[e]?!0===t.whitelist[e]:void 0!==t.defaultValue?t.defaultValue:(function(t){!0!==l[t]&&(l[t]=!0,a.log("error",'Handlebars: Access has been denied to resolve the property "'+t+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details'))}(e),!1)}("function"==typeof t?e.methods:e.properties,n)},e.resetLoggedProperties=function(){i(l).forEach((function(t){delete l[t]}))};var o=n(36),a=r(n(32)),l=s(null)},function(t,e,n){t.exports={default:n(35),__esModule:!0}},function(t,e,n){var s=n(9);t.exports=function(t,e){return s.create(t,e)}},function(t,e,n){"use strict";var s=n(34).default;e.__esModule=!0,e.createNewLookupObject=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.extend.apply(void 0,[s(null)].concat(e))};var i=n(5)},function(t,e){"use strict";function n(t){this.string=t}e.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},e.default=n,t.exports=e.default},function(t,e,n){"use strict";var s=n(39).default,i=n(13).default,r=n(3).default,o=n(1).default;e.__esModule=!0,e.checkRevision=function(t){var e=t&&t[0]||1,n=c.COMPILER_REVISION;if(!(e>=c.LAST_COMPATIBLE_COMPILER_REVISION&&e<=c.COMPILER_REVISION)){if(e<c.LAST_COMPATIBLE_COMPILER_REVISION){var s=c.REVISION_CHANGES[n],i=c.REVISION_CHANGES[e];throw new l.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+s+") or downgrade your runtime to an older version ("+i+").")}throw new l.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}},e.template=function(t,e){if(!e)throw new l.default("No environment passed to template");if(!t||!t.main)throw new l.default("Unknown template object: "+typeof t);t.main.decorator=t.main_d,e.VM.checkRevision(t.compiler);var n=t.compiler&&7===t.compiler[0],r={strict:function(t,e,n){if(!t||!(e in t))throw new l.default('"'+e+'" not defined in '+t,{loc:n});return r.lookupProperty(t,e)},lookupProperty:function(t,e){var n=t[e];return null==n||Object.prototype.hasOwnProperty.call(t,e)||d.resultIsAllowed(n,r.protoAccessControl,e)?n:void 0},lookup:function(t,e){for(var n=t.length,s=0;s<n;s++)if(null!=(t[s]&&r.lookupProperty(t[s],e)))return t[s][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:a.escapeExpression,invokePartial:function(n,s,i){i.hash&&(s=a.extend({},s,i.hash),i.ids&&(i.ids[0]=!0)),n=e.VM.resolvePartial.call(this,n,s,i);var r=a.extend({},i,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),o=e.VM.invokePartial.call(this,n,s,r);if(null==o&&e.compile&&(i.partials[i.name]=e.compile(n,t.compilerOptions,e),o=i.partials[i.name](s,r)),null!=o){if(i.indent){for(var c=o.split("\n"),u=0,h=c.length;u<h&&(c[u]||u+1!==h);u++)c[u]=i.indent+c[u];o=c.join("\n")}return o}throw new l.default("The partial "+i.name+" could not be compiled when running in runtime-only mode")},fn:function(e){var n=t[e];return n.decorator=t[e+"_d"],n},programs:[],program:function(t,e,n,s,i){var r=this.programs[t],o=this.fn(t);return e||i||s||n?r=p(this,t,o,e,n,s,i):r||(r=this.programs[t]=p(this,t,o)),r},data:function(t,e){for(;t&&e--;)t=t._parent;return t},mergeIfNeeded:function(t,e){var n=t||e;return t&&e&&t!==e&&(n=a.extend({},e,t)),n},nullContext:s({}),noop:e.VM.noop,compilerInfo:t.compiler};function o(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=n.data;o._setup(n),!n.partial&&t.useData&&(s=_(e,s));var i=void 0,a=t.useBlockParams?[]:void 0;function l(e){return""+t.main(r,e,r.helpers,r.partials,s,a,i)}return t.useDepths&&(i=n.depths?e!=n.depths[0]?[e].concat(n.depths):n.depths:[e]),(l=f(t.main,l,r,n.depths||[],s,a))(e,n)}return o.isTop=!0,o._setup=function(s){if(s.partial)r.protoAccessControl=s.protoAccessControl,r.helpers=s.helpers,r.partials=s.partials,r.decorators=s.decorators,r.hooks=s.hooks;else{var o=a.extend({},e.helpers,s.helpers);!function(t,e){i(t).forEach((function(n){var s=t[n];t[n]=function(t,e){var n=e.lookupProperty;return h.wrapHelper(t,(function(t){return a.extend({lookupProperty:n},t)}))}(s,e)}))}(o,r),r.helpers=o,t.usePartial&&(r.partials=r.mergeIfNeeded(s.partials,e.partials)),(t.usePartial||t.useDecorators)&&(r.decorators=a.extend({},e.decorators,s.decorators)),r.hooks={},r.protoAccessControl=d.createProtoAccessControl(s);var l=s.allowCallsToHelperMissing||n;u.moveHelperToHooks(r,"helperMissing",l),u.moveHelperToHooks(r,"blockHelperMissing",l)}},o._child=function(e,n,s,i){if(t.useBlockParams&&!s)throw new l.default("must pass block params");if(t.useDepths&&!i)throw new l.default("must pass parent depths");return p(r,e,t[e],n,0,s,i)},o},e.wrapProgram=p,e.resolvePartial=function(t,e,n){return t?t.call||n.name||(n.name=t,t=n.partials[t]):t="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],t},e.invokePartial=function(t,e,n){var s=n.data&&n.data["partial-block"];n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var i=void 0;if(n.fn&&n.fn!==g&&function(){n.data=c.createFrame(n.data);var t=n.fn;i=n.data["partial-block"]=function(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return n.data=c.createFrame(n.data),n.data["partial-block"]=s,t(e,n)},t.partials&&(n.partials=a.extend({},n.partials,t.partials))}(),void 0===t&&i&&(t=i),void 0===t)throw new l.default("The partial "+n.name+" could not be found");if(t instanceof Function)return t(e,n)},e.noop=g;var a=r(n(5)),l=o(n(6)),c=n(4),u=n(10),h=n(43),d=n(33);function p(t,e,n,s,i,r,o){function a(e){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=o;return!o||e==o[0]||e===t.nullContext&&null===o[0]||(a=[e].concat(o)),n(t,e,t.helpers,t.partials,i.data||s,r&&[i.blockParams].concat(r),a)}return(a=f(n,a,t,o,s,r)).program=e,a.depth=o?o.length:0,a.blockParams=i||0,a}function g(){return""}function _(t,e){return e&&"root"in e||((e=e?c.createFrame(e):{}).root=t),e}function f(t,e,n,s,i,r){if(t.decorator){var o={};e=t.decorator(e,o,n,s&&s[0],i,r,s),a.extend(e,o)}return e}},function(t,e,n){t.exports={default:n(40),__esModule:!0}},function(t,e,n){n(41),t.exports=n(21).Object.seal},function(t,e,n){var s=n(42);n(18)("seal",(function(t){return function(e){return t&&s(e)?t(e):e}}))},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){"use strict";e.__esModule=!0,e.wrapHelper=function(t,e){return"function"!=typeof t?t:function(){return arguments[arguments.length-1]=e(arguments[arguments.length-1]),t.apply(this,arguments)}}},function(t,e){(function(n){"use strict";e.__esModule=!0,e.default=function(t){var e=void 0!==n?n:window,s=e.Handlebars;t.noConflict=function(){return e.Handlebars===t&&(e.Handlebars=s),t}},t.exports=e.default}).call(e,function(){return this}())},function(t,e){"use strict";e.__esModule=!0;var n={helpers:{helperExpression:function(t){return"SubExpression"===t.type||("MustacheStatement"===t.type||"BlockStatement"===t.type)&&!!(t.params&&t.params.length||t.hash)},scopedId:function(t){return/^\.|this\b/.test(t.original)},simpleId:function(t){return 1===t.parts.length&&!n.helpers.scopedId(t)&&!t.depth}}};e.default=n,t.exports=e.default},function(t,e,n){"use strict";var s=n(1).default,i=n(3).default;e.__esModule=!0,e.parseWithoutProcessing=u,e.parse=function(t,e){var n=u(t,e);return new o.default(e).accept(n)};var r=s(n(47)),o=s(n(48)),a=i(n(50)),l=n(5);e.parser=r.default;var c={};function u(t,e){return"Program"===t.type?t:(r.default.yy=c,c.locInfo=function(t){return new c.SourceLocation(e&&e.srcName,t)},r.default.parse(t))}l.extend(c,a)},function(t,e){"use strict";e.__esModule=!0;var n=function(){var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(t,e,n,s,i,r,o){var a=r.length-1;switch(i){case 1:return r[a-1];case 2:this.$=s.prepareProgram(r[a]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=r[a];break;case 9:this.$={type:"CommentStatement",value:s.stripComment(r[a]),strip:s.stripFlags(r[a],r[a]),loc:s.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:r[a],value:r[a],loc:s.locInfo(this._$)};break;case 11:this.$=s.prepareRawBlock(r[a-2],r[a-1],r[a],this._$);break;case 12:this.$={path:r[a-3],params:r[a-2],hash:r[a-1]};break;case 13:this.$=s.prepareBlock(r[a-3],r[a-2],r[a-1],r[a],!1,this._$);break;case 14:this.$=s.prepareBlock(r[a-3],r[a-2],r[a-1],r[a],!0,this._$);break;case 15:this.$={open:r[a-5],path:r[a-4],params:r[a-3],hash:r[a-2],blockParams:r[a-1],strip:s.stripFlags(r[a-5],r[a])};break;case 16:case 17:this.$={path:r[a-4],params:r[a-3],hash:r[a-2],blockParams:r[a-1],strip:s.stripFlags(r[a-5],r[a])};break;case 18:this.$={strip:s.stripFlags(r[a-1],r[a-1]),program:r[a]};break;case 19:var l=s.prepareBlock(r[a-2],r[a-1],r[a],r[a],!1,this._$),c=s.prepareProgram([l],r[a-1].loc);c.chained=!0,this.$={strip:r[a-2].strip,program:c,chain:!0};break;case 21:this.$={path:r[a-1],strip:s.stripFlags(r[a-2],r[a])};break;case 22:case 23:this.$=s.prepareMustache(r[a-3],r[a-2],r[a-1],r[a-4],s.stripFlags(r[a-4],r[a]),this._$);break;case 24:this.$={type:"PartialStatement",name:r[a-3],params:r[a-2],hash:r[a-1],indent:"",strip:s.stripFlags(r[a-4],r[a]),loc:s.locInfo(this._$)};break;case 25:this.$=s.preparePartialBlock(r[a-2],r[a-1],r[a],this._$);break;case 26:this.$={path:r[a-3],params:r[a-2],hash:r[a-1],strip:s.stripFlags(r[a-4],r[a])};break;case 29:this.$={type:"SubExpression",path:r[a-3],params:r[a-2],hash:r[a-1],loc:s.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:r[a],loc:s.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:s.id(r[a-2]),value:r[a],loc:s.locInfo(this._$)};break;case 32:this.$=s.id(r[a-1]);break;case 35:this.$={type:"StringLiteral",value:r[a],original:r[a],loc:s.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(r[a]),original:Number(r[a]),loc:s.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===r[a],original:"true"===r[a],loc:s.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:s.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:s.locInfo(this._$)};break;case 42:this.$=s.preparePath(!0,r[a],this._$);break;case 43:this.$=s.preparePath(!1,r[a],this._$);break;case 44:r[a-2].push({part:s.id(r[a]),original:r[a],separator:r[a-1]}),this.$=r[a-2];break;case 45:this.$=[{part:s.id(r[a]),original:r[a]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:r[a-1].push(r[a]);break;case 98:case 100:this.$=[r[a]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(t,e){throw new Error(t)},parse:function(t){var e=[0],n=[null],s=[],i=this.table,r="",o=0,a=0,l=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,void 0===this.lexer.yylloc&&(this.lexer.yylloc={});var c=this.lexer.yylloc;s.push(c);var u=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,d,p,g,_,f,m,S,T,v,C={};;){if(p=e[e.length-1],this.defaultActions[p]?g=this.defaultActions[p]:(null==h&&(v=void 0,"number"!=typeof(v=this.lexer.lex()||1)&&(v=this.symbols_[v]||v),h=v),g=i[p]&&i[p][h]),void 0===g||!g.length||!g[0]){var E="";if(!l){for(f in T=[],i[p])this.terminals_[f]&&f>2&&T.push("'"+this.terminals_[f]+"'");E=this.lexer.showPosition?"Parse error on line "+(o+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+T.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+(o+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:c,expected:T})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+h);switch(g[0]){case 1:e.push(h),n.push(this.lexer.yytext),s.push(this.lexer.yylloc),e.push(g[1]),h=null,d?(h=d,d=null):(a=this.lexer.yyleng,r=this.lexer.yytext,o=this.lexer.yylineno,c=this.lexer.yylloc,l>0&&l--);break;case 2:if(m=this.productions_[g[1]][1],C.$=n[n.length-m],C._$={first_line:s[s.length-(m||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(m||1)].first_column,last_column:s[s.length-1].last_column},u&&(C._$.range=[s[s.length-(m||1)].range[0],s[s.length-1].range[1]]),void 0!==(_=this.performAction.call(C,r,a,o,this.yy,g[1],n,s)))return _;m&&(e=e.slice(0,-1*m*2),n=n.slice(0,-1*m),s=s.slice(0,-1*m)),e.push(this.productions_[g[1]][0]),n.push(C.$),s.push(C._$),S=i[e[e.length-2]][e[e.length-1]],e.push(S);break;case 3:return!0}}return!0}},e={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var s=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===s.length?this.yylloc.first_column:0)+s[s.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;var t,e,n,s,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length&&(!(n=this._input.match(this.rules[r[o]]))||e&&!(n[0].length>e[0].length)||(e=n,s=o,this.options.flex));o++);return e?((i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,r[s],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return void 0!==t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)},options:{},performAction:function(t,e,n,s){function i(t,n){return e.yytext=e.yytext.substring(t,e.yyleng-n+t)}switch(n){case 0:if("\\\\"===e.yytext.slice(-2)?(i(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(i(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(i(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(e.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return e.yytext=i(1,2).replace(/\\"/g,'"'),80;case 32:return e.yytext=i(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return e.yytext=e.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^\/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};function n(){this.yy={}}return t.lexer=e,n.prototype=t,t.Parser=n,new n}();e.default=n,t.exports=e.default},function(t,e,n){"use strict";var s=n(1).default;e.__esModule=!0;var i=s(n(49));function r(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.options=t}function o(t,e,n){void 0===e&&(e=t.length);var s=t[e-1],i=t[e-2];return s?"ContentStatement"===s.type?(i||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(s.original):void 0:n}function a(t,e,n){void 0===e&&(e=-1);var s=t[e+1],i=t[e+2];return s?"ContentStatement"===s.type?(i||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(s.original):void 0:n}function l(t,e,n){var s=t[null==e?0:e+1];if(s&&"ContentStatement"===s.type&&(n||!s.rightStripped)){var i=s.value;s.value=s.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),s.rightStripped=s.value!==i}}function c(t,e,n){var s=t[null==e?t.length-1:e-1];if(s&&"ContentStatement"===s.type&&(n||!s.leftStripped)){var i=s.value;return s.value=s.value.replace(n?/\s+$/:/[ \t]+$/,""),s.leftStripped=s.value!==i,s.leftStripped}}r.prototype=new i.default,r.prototype.Program=function(t){var e=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var s=t.body,i=0,r=s.length;i<r;i++){var u=s[i],h=this.accept(u);if(h){var d=o(s,i,n),p=a(s,i,n),g=h.openStandalone&&d,_=h.closeStandalone&&p,f=h.inlineStandalone&&d&&p;h.close&&l(s,i,!0),h.open&&c(s,i,!0),e&&f&&(l(s,i),c(s,i)&&"PartialStatement"===u.type&&(u.indent=/([ \t]+$)/.exec(s[i-1].original)[1])),e&&g&&(l((u.program||u.inverse).body),c(s,i)),e&&_&&(l(s,i),c((u.inverse||u.program).body))}}return t},r.prototype.BlockStatement=r.prototype.DecoratorBlock=r.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,n=t.program&&t.inverse,s=n,i=n;if(n&&n.chained)for(s=n.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var r={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:a(e.body),closeStandalone:o((s||e).body)};if(t.openStrip.close&&l(e.body,null,!0),n){var u=t.inverseStrip;u.open&&c(e.body,null,!0),u.close&&l(s.body,null,!0),t.closeStrip.open&&c(i.body,null,!0),!this.options.ignoreStandalone&&o(e.body)&&a(s.body)&&(c(e.body),l(s.body))}else t.closeStrip.open&&c(e.body,null,!0);return r},r.prototype.Decorator=r.prototype.MustacheStatement=function(t){return t.strip},r.prototype.PartialStatement=r.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},e.default=r,t.exports=e.default},function(t,e,n){"use strict";var s=n(1).default;e.__esModule=!0;var i=s(n(6));function r(){this.parents=[]}function o(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function a(t){o.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function l(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}r.prototype={constructor:r,mutating:!1,acceptKey:function(t,e){var n=this.accept(t[e]);if(this.mutating){if(n&&!r.prototype[n.type])throw new i.default('Unexpected node type "'+n.type+'" found when accepting '+e+" on "+t.type);t[e]=n}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new i.default(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,n=t.length;e<n;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,n--)},accept:function(t){if(t){if(!this[t.type])throw new i.default("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);return this.current=this.parents.shift(),!this.mutating||e?e:!1!==e?t:void 0}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:o,Decorator:o,BlockStatement:a,DecoratorBlock:a,PartialStatement:l,PartialBlockStatement:function(t){l.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:o,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}},e.default=r,t.exports=e.default},function(t,e,n){"use strict";var s=n(1).default;e.__esModule=!0,e.SourceLocation=function(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}},e.id=function(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t},e.stripFlags=function(t,e){return{open:"~"===t.charAt(2),close:"~"===e.charAt(e.length-3)}},e.stripComment=function(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},e.preparePath=function(t,e,n){n=this.locInfo(n);for(var s=t?"@":"",r=[],o=0,a=0,l=e.length;a<l;a++){var c=e[a].part,u=e[a].original!==c;if(s+=(e[a].separator||"")+c,u||".."!==c&&"."!==c&&"this"!==c)r.push(c);else{if(r.length>0)throw new i.default("Invalid path: "+s,{loc:n});".."===c&&o++}}return{type:"PathExpression",data:t,depth:o,parts:r,original:s,loc:n}},e.prepareMustache=function(t,e,n,s,i,r){var o=s.charAt(3)||s.charAt(2),a="{"!==o&&"&"!==o;return{type:/\*/.test(s)?"Decorator":"MustacheStatement",path:t,params:e,hash:n,escaped:a,strip:i,loc:this.locInfo(r)}},e.prepareRawBlock=function(t,e,n,s){r(t,n);var i={type:"Program",body:e,strip:{},loc:s=this.locInfo(s)};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:i,openStrip:{},inverseStrip:{},closeStrip:{},loc:s}},e.prepareBlock=function(t,e,n,s,o,a){s&&s.path&&r(t,s);var l=/\*/.test(t.open);e.blockParams=t.blockParams;var c=void 0,u=void 0;if(n){if(l)throw new i.default("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=s.strip),u=n.strip,c=n.program}return o&&(o=c,c=e,e=o),{type:l?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:c,openStrip:t.strip,inverseStrip:u,closeStrip:s&&s.strip,loc:this.locInfo(a)}},e.prepareProgram=function(t,e){if(!e&&t.length){var n=t[0].loc,s=t[t.length-1].loc;n&&s&&(e={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:s.end.line,column:s.end.column}})}return{type:"Program",body:t,strip:{},loc:e}},e.preparePartialBlock=function(t,e,n,s){return r(t,n),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:n&&n.strip,loc:this.locInfo(s)}};var i=s(n(6));function r(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var n={loc:t.path.loc};throw new i.default(t.path.original+" doesn't match "+e,n)}}},function(t,e,n){"use strict";var s=n(34).default,i=n(1).default;e.__esModule=!0,e.Compiler=c,e.precompile=function(t,e,n){if(null==t||"string"!=typeof t&&"Program"!==t.type)throw new r.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);"data"in(e=e||{})||(e.data=!0),e.compat&&(e.useDepths=!0);var s=n.parse(t,e),i=(new n.Compiler).compile(s,e);return(new n.JavaScriptCompiler).compile(i,e)},e.compile=function(t,e,n){if(void 0===e&&(e={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new r.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(e=o.extend({},e))||(e.data=!0),e.compat&&(e.useDepths=!0);var s=void 0;function i(){var s=n.parse(t,e),i=(new n.Compiler).compile(s,e),r=(new n.JavaScriptCompiler).compile(i,e,void 0,!0);return n.template(r)}function a(t,e){return s||(s=i()),s.call(this,t,e)}return a._setup=function(t){return s||(s=i()),s._setup(t)},a._child=function(t,e,n,r){return s||(s=i()),s._child(t,e,n,r)},a};var r=i(n(6)),o=n(5),a=i(n(45)),l=[].slice;function c(){}function u(t,e){if(t===e)return!0;if(o.isArray(t)&&o.isArray(e)&&t.length===e.length){for(var n=0;n<t.length;n++)if(!u(t[n],e[n]))return!1;return!0}}function h(t){if(!t.path.parts){var e=t.path;t.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}c.prototype={compiler:c,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var n=0;n<e;n++){var s=this.opcodes[n],i=t.opcodes[n];if(s.opcode!==i.opcode||!u(s.args,i.args))return!1}for(e=this.children.length,n=0;n<e;n++)if(!this.children[n].equals(t.children[n]))return!1;return!0},guid:0,compile:function(t,e){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds,e.blockParams=e.blockParams||[],e.knownHelpers=o.extend(s(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},e.knownHelpers),this.accept(t)},compileProgram:function(t){var e=(new this.compiler).compile(t,this.options),n=this.guid++;return this.usePartial=this.usePartial||e.usePartial,this.children[n]=e,this.useDepths=this.useDepths||e.useDepths,n},accept:function(t){if(!this[t.type])throw new r.default("Unknown type: "+t.type,t);this.sourceNode.unshift(t);var e=this[t.type](t);return this.sourceNode.shift(),e},Program:function(t){this.options.blockParams.unshift(t.blockParams);for(var e=t.body,n=e.length,s=0;s<n;s++)this.accept(e[s]);return this.options.blockParams.shift(),this.isSimple=1===n,this.blockParams=t.blockParams?t.blockParams.length:0,this},BlockStatement:function(t){h(t);var e=t.program,n=t.inverse;e=e&&this.compileProgram(e),n=n&&this.compileProgram(n);var s=this.classifySexpr(t);"helper"===s?this.helperSexpr(t,e,n):"simple"===s?(this.simpleSexpr(t),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",t.path.original)):(this.ambiguousSexpr(t,e,n),this.opcode("pushProgram",e),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(t){var e=t.program&&this.compileProgram(t.program),n=this.setupFullMustacheParams(t,e,void 0),s=t.path;this.useDecorators=!0,this.opcode("registerDecorator",n.length,s.original)},PartialStatement:function(t){this.usePartial=!0;var e=t.program;e&&(e=this.compileProgram(t.program));var n=t.params;if(n.length>1)throw new r.default("Unsupported number of partial arguments: "+n.length,t);n.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):n.push({type:"PathExpression",parts:[],depth:0}));var s=t.name.original,i="SubExpression"===t.name.type;i&&this.accept(t.name),this.setupFullMustacheParams(t,e,void 0,!0);var o=t.indent||"";this.options.preventIndent&&o&&(this.opcode("appendContent",o),o=""),this.opcode("invokePartial",i,s,o),this.opcode("append")},PartialBlockStatement:function(t){this.PartialStatement(t)},MustacheStatement:function(t){this.SubExpression(t),t.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(t){this.DecoratorBlock(t)},ContentStatement:function(t){t.value&&this.opcode("appendContent",t.value)},CommentStatement:function(){},SubExpression:function(t){h(t);var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ambiguousSexpr:function(t,e,n){var s=t.path,i=s.parts[0],r=null!=e||null!=n;this.opcode("getContext",s.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",n),s.strict=!0,this.accept(s),this.opcode("invokeAmbiguous",i,r)},simpleSexpr:function(t){var e=t.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,n){var s=this.setupFullMustacheParams(t,e,n),i=t.path,o=i.parts[0];if(this.options.knownHelpers[o])this.opcode("invokeKnownHelper",s.length,o);else{if(this.options.knownHelpersOnly)throw new r.default("You specified knownHelpersOnly, but used the unknown helper "+o,t);i.strict=!0,i.falsy=!0,this.accept(i),this.opcode("invokeHelper",s.length,i.original,a.default.helpers.simpleId(i))}},PathExpression:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0],n=a.default.helpers.scopedId(t),s=!t.depth&&!n&&this.blockParamIndex(e);s?this.opcode("lookupBlockParam",s,t.parts):e?t.data?(this.options.data=!0,this.opcode("lookupData",t.depth,t.parts,t.strict)):this.opcode("lookupOnContext",t.parts,t.falsy,t.strict,n):this.opcode("pushContext")},StringLiteral:function(t){this.opcode("pushString",t.value)},NumberLiteral:function(t){this.opcode("pushLiteral",t.value)},BooleanLiteral:function(t){this.opcode("pushLiteral",t.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(t){var e=t.pairs,n=0,s=e.length;for(this.opcode("pushHash");n<s;n++)this.pushParam(e[n].value);for(;n--;)this.opcode("assignToHash",e[n].key);this.opcode("popHash")},opcode:function(t){this.opcodes.push({opcode:t,args:l.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(t){t&&(this.useDepths=!0)},classifySexpr:function(t){var e=a.default.helpers.simpleId(t.path),n=e&&!!this.blockParamIndex(t.path.parts[0]),s=!n&&a.default.helpers.helperExpression(t),i=!n&&(s||e);if(i&&!s){var r=t.path.parts[0],o=this.options;o.knownHelpers[r]?s=!0:o.knownHelpersOnly&&(i=!1)}return s?"helper":i?"ambiguous":"simple"},pushParams:function(t){for(var e=0,n=t.length;e<n;e++)this.pushParam(t[e])},pushParam:function(t){var e=null!=t.value?t.value:t.original||"";if(this.stringParams)e.replace&&(e=e.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",e,t.type),"SubExpression"===t.type&&this.accept(t);else{if(this.trackIds){var n=void 0;if(!t.parts||a.default.helpers.scopedId(t)||t.depth||(n=this.blockParamIndex(t.parts[0])),n){var s=t.parts.slice(1).join(".");this.opcode("pushId","BlockParam",n,s)}else(e=t.original||e).replace&&(e=e.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",t.type,e)}this.accept(t)}},setupFullMustacheParams:function(t,e,n,s){var i=t.params;return this.pushParams(i),this.opcode("pushProgram",e),this.opcode("pushProgram",n),t.hash?this.accept(t.hash):this.opcode("emptyHash",s),i},blockParamIndex:function(t){for(var e=0,n=this.options.blockParams.length;e<n;e++){var s=this.options.blockParams[e],i=s&&o.indexOf(s,t);if(s&&i>=0)return[e,i]}}}},function(t,e,n){"use strict";var s=n(13).default,i=n(1).default;e.__esModule=!0;var r=n(4),o=i(n(6)),a=n(5),l=i(n(53));function c(t){this.value=t}function u(){}u.prototype={nameLookup:function(t,e){return this.internalNameLookup(t,e)},depthedLookup:function(t){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(t),")"]},compilerInfo:function(){var t=r.COMPILER_REVISION;return[t,r.REVISION_CHANGES[t]]},appendToBuffer:function(t,e,n){return a.isArray(t)||(t=[t]),t=this.source.wrap(t,e),this.environment.isSimple?["return ",t,";"]:n?["buffer += ",t,";"]:(t.appendToBuffer=!0,t)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(t,e){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",t,",",JSON.stringify(e),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(t,e,n,s){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!s,this.name=this.environment.name,this.isChild=!!n,this.context=n||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.useDepths||t.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||t.useBlockParams;var i=t.opcodes,r=void 0,a=void 0,l=void 0,c=void 0;for(l=0,c=i.length;l<c;l++)r=i[l],this.source.currentLocation=r.loc,a=a||r.loc,this[r.opcode].apply(this,r.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new o.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),s?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));var u=this.createFunctionContext(s);if(this.isChild)return u;var h={compiler:this.compilerInfo(),main:u};this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0);var d=this.context,p=d.programs,g=d.decorators;for(l=0,c=p.length;l<c;l++)p[l]&&(h[l]=p[l],g[l]&&(h[l+"_d"]=g[l],h.useDecorators=!0));return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),s?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),e.srcName?(h=h.toStringWithSourceMap({file:e.destName})).map=h.map&&h.map.toString():h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new l.default(this.options.srcName),this.decorators=new l.default(this.options.srcName)},createFunctionContext:function(t){var e=this,n="",i=this.stackVars.concat(this.registers.list);i.length>0&&(n+=", "+i.join(", "));var r=0;s(this.aliases).forEach((function(t){var s=e.aliases[t];s.children&&s.referenceCount>1&&(n+=", alias"+ ++r+"="+t,s.children[0]="alias"+r)})),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration());var o=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&o.push("blockParams"),this.useDepths&&o.push("depths");var a=this.mergeSource(n);return t?(o.push(a),Function.apply(this,o)):this.source.wrap(["function(",o.join(","),") {\n  ",a,"}"])},mergeSource:function(t){var e=this.environment.isSimple,n=!this.forceBuffer,s=void 0,i=void 0,r=void 0,o=void 0;return this.source.each((function(t){t.appendToBuffer?(r?t.prepend("  + "):r=t,o=t):(r&&(i?r.prepend("buffer += "):s=!0,o.add(";"),r=o=void 0),i=!0,e||(n=!1))})),n?r?(r.prepend("return "),o.add(";")):i||this.source.push('return "";'):(t+=", buffer = "+(s?"":this.initializeBuffer()),r?(r.prepend("return buffer + "),o.add(";")):this.source.push("return buffer;")),t&&this.source.prepend("var "+t.substring(2)+(s?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(t){var e=this.aliasable("container.hooks.blockHelperMissing"),n=[this.contextName(0)];this.setupHelperArgs(t,0,n);var s=this.popStack();n.splice(1,0,s),this.push(this.source.functionCall(e,"call",n))},ambiguousBlockValue:function(){var t=this.aliasable("container.hooks.blockHelperMissing"),e=[this.contextName(0)];this.setupHelperArgs("",0,e,!0),this.flushInline();var n=this.topStack();e.splice(1,0,n),this.pushSource(["if (!",this.lastHelper,") { ",n," = ",this.source.functionCall(t,"call",e),"}"])},appendContent:function(t){this.pendingContent?t=this.pendingContent+t:this.pendingLocation=this.source.currentLocation,this.pendingContent=t},append:function(){if(this.isInline())this.replaceStack((function(t){return[" != null ? ",t,' : ""']})),this.pushSource(this.appendToBuffer(this.popStack()));else{var t=this.popStack();this.pushSource(["if (",t," != null) { ",this.appendToBuffer(t,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,n,s){var i=0;s||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[i++])),this.resolvePath("context",t,i,e,n)},lookupBlockParam:function(t,e){this.useBlockParams=!0,this.push(["blockParams[",t[0],"][",t[1],"]"]),this.resolvePath("context",e,1)},lookupData:function(t,e,n){t?this.pushStackLiteral("container.data(data, "+t+")"):this.pushStackLiteral("data"),this.resolvePath("data",e,0,!0,n)},resolvePath:function(t,e,n,s,i){var r=this;if(this.options.strict||this.options.assumeObjects)this.push(function(t,e,n,s){var i=e.popStack(),r=0,o=n.length;for(t&&o--;r<o;r++)i=e.nameLookup(i,n[r],s);return t?[e.aliasable("container.strict"),"(",i,", ",e.quotedString(n[r]),", ",JSON.stringify(e.source.currentLocation)," )"]:i}(this.options.strict&&i,this,e,t));else for(var o=e.length;n<o;n++)this.replaceStack((function(i){var o=r.nameLookup(i,e[n],t);return s?[" && ",o]:[" != null ? ",o," : ",i]}))},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"SubExpression"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(t){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(t?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(t.ids)),this.stringParams&&(this.push(this.objectLiteral(t.contexts)),this.push(this.objectLiteral(t.types))),this.push(this.objectLiteral(t.values))},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){null!=t?this.pushStackLiteral(this.programExpression(t)):this.pushStackLiteral(null)},registerDecorator:function(t,e){var n=this.nameLookup("decorators",e,"decorator"),s=this.setupHelperArgs(e,t);this.decorators.push(["fn = ",this.decorators.functionCall(n,"",["fn","props","container",s])," || fn;"])},invokeHelper:function(t,e,n){var s=this.popStack(),i=this.setupHelper(t,e),r=[];n&&r.push(i.name),r.push(s),this.options.strict||r.push(this.aliasable("container.hooks.helperMissing"));var o=["(",this.itemsSeparatedBy(r,"||"),")"],a=this.source.functionCall(o,"call",i.callParams);this.push(a)},itemsSeparatedBy:function(t,e){var n=[];n.push(t[0]);for(var s=1;s<t.length;s++)n.push(e,t[s]);return n},invokeKnownHelper:function(t,e){var n=this.setupHelper(t,e);this.push(this.source.functionCall(n.name,"call",n.callParams))},invokeAmbiguous:function(t,e){this.useRegister("helper");var n=this.popStack();this.emptyHash();var s=this.setupHelper(0,t,e),i=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",t,"helper")," || ",n,")"];this.options.strict||(i[0]="(helper = ",i.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",i,s.paramsInit?["),(",s.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",s.callParams)," : helper))"])},invokePartial:function(t,e,n){var s=[],i=this.setupParams(e,1,s);t&&(e=this.popStack(),delete i.name),n&&(i.indent=JSON.stringify(n)),i.helpers="helpers",i.partials="partials",i.decorators="container.decorators",t?s.unshift(e):s.unshift(this.nameLookup("partials",e,"partial")),this.options.compat&&(i.depths="depths"),i=this.objectLiteral(i),s.push(i),this.push(this.source.functionCall("container.invokePartial","",s))},assignToHash:function(t){var e=this.popStack(),n=void 0,s=void 0,i=void 0;this.trackIds&&(i=this.popStack()),this.stringParams&&(s=this.popStack(),n=this.popStack());var r=this.hash;n&&(r.contexts[t]=n),s&&(r.types[t]=s),i&&(r.ids[t]=i),r.values[t]=e},pushId:function(t,e,n){"BlockParam"===t?this.pushStackLiteral("blockParams["+e[0]+"].path["+e[1]+"]"+(n?" + "+JSON.stringify("."+n):"")):"PathExpression"===t?this.pushString(e):"SubExpression"===t?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:u,compileChildren:function(t,e){for(var n=t.children,s=void 0,i=void 0,r=0,o=n.length;r<o;r++){s=n[r],i=new this.compiler;var a=this.matchExistingProgram(s);if(null==a){this.context.programs.push("");var l=this.context.programs.length;s.index=l,s.name="program"+l,this.context.programs[l]=i.compile(s,e,this.context,!this.precompile),this.context.decorators[l]=i.decorators,this.context.environments[l]=s,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams,s.useDepths=this.useDepths,s.useBlockParams=this.useBlockParams}else s.index=a.index,s.name="program"+a.index,this.useDepths=this.useDepths||a.useDepths,this.useBlockParams=this.useBlockParams||a.useBlockParams}},matchExistingProgram:function(t){for(var e=0,n=this.context.environments.length;e<n;e++){var s=this.context.environments[e];if(s&&s.equals(t))return s}},programExpression:function(t){var e=this.environment.children[t],n=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&n.push("blockParams"),this.useDepths&&n.push("depths"),"container.program("+n.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},push:function(t){return t instanceof c||(t=this.source.wrap(t)),this.inlineStack.push(t),t},pushStackLiteral:function(t){this.push(new c(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),t&&this.source.push(t)},replaceStack:function(t){var e=["("],n=void 0,s=void 0,i=void 0;if(!this.isInline())throw new o.default("replaceStack on non-inline");var r=this.popStack(!0);if(r instanceof c)e=["(",n=[r.value]],i=!0;else{s=!0;var a=this.incrStack();e=["((",this.push(a)," = ",r,")"],n=this.topStack()}var l=t.call(this,n);i||this.popStack(),s&&this.stackSlot--,this.push(e.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;this.inlineStack=[];for(var e=0,n=t.length;e<n;e++){var s=t[e];if(s instanceof c)this.compileStack.push(s);else{var i=this.incrStack();this.pushSource([i," = ",s,";"]),this.compileStack.push(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();if(!t&&n instanceof c)return n.value;if(!e){if(!this.stackSlot)throw new o.default("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof c?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return this.source.quotedString(t)},objectLiteral:function(t){return this.source.objectLiteral(t)},aliasable:function(t){var e=this.aliases[t];return e?(e.referenceCount++,e):((e=this.aliases[t]=this.source.wrap(t)).aliasable=!0,e.referenceCount=1,e)},setupHelper:function(t,e,n){var s=[];return{params:s,paramsInit:this.setupHelperArgs(e,t,s,n),name:this.nameLookup("helpers",e,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(s)}},setupParams:function(t,e,n){var s={},i=[],r=[],o=[],a=!n,l=void 0;a&&(n=[]),s.name=this.quotedString(t),s.hash=this.popStack(),this.trackIds&&(s.hashIds=this.popStack()),this.stringParams&&(s.hashTypes=this.popStack(),s.hashContexts=this.popStack());var c=this.popStack(),u=this.popStack();(u||c)&&(s.fn=u||"container.noop",s.inverse=c||"container.noop");for(var h=e;h--;)l=this.popStack(),n[h]=l,this.trackIds&&(o[h]=this.popStack()),this.stringParams&&(r[h]=this.popStack(),i[h]=this.popStack());return a&&(s.args=this.source.generateArray(n)),this.trackIds&&(s.ids=this.source.generateArray(o)),this.stringParams&&(s.types=this.source.generateArray(r),s.contexts=this.source.generateArray(i)),this.options.data&&(s.data="data"),this.useBlockParams&&(s.blockParams="blockParams"),s},setupHelperArgs:function(t,e,n,s){var i=this.setupParams(t,e,n);return i.loc=JSON.stringify(this.source.currentLocation),i=this.objectLiteral(i),s?(this.useRegister("options"),n.push("options"),["options=",i]):n?(n.push(i),""):i}},function(){for(var t="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=u.RESERVED_WORDS={},n=0,s=t.length;n<s;n++)e[t[n]]=!0}(),u.isValidJavaScriptVariableName=function(t){return!u.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},e.default=u,t.exports=e.default},function(t,e,n){"use strict";var s=n(13).default;e.__esModule=!0;var i=n(5),r=void 0;function o(t,e,n){if(i.isArray(t)){for(var s=[],r=0,o=t.length;r<o;r++)s.push(e.wrap(t[r],n));return s}return"boolean"==typeof t||"number"==typeof t?t+"":t}function a(t){this.srcFile=t,this.source=[]}r||((r=function(t,e,n,s){this.src="",s&&this.add(s)}).prototype={add:function(t){i.isArray(t)&&(t=t.join("")),this.src+=t},prepend:function(t){i.isArray(t)&&(t=t.join("")),this.src=t+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),a.prototype={isEmpty:function(){return!this.source.length},prepend:function(t,e){this.source.unshift(this.wrap(t,e))},push:function(t,e){this.source.push(this.wrap(t,e))},merge:function(){var t=this.empty();return this.each((function(e){t.add(["  ",e,"\n"])})),t},each:function(t){for(var e=0,n=this.source.length;e<n;e++)t(this.source[e])},empty:function(){var t=this.currentLocation||{start:{}};return new r(t.start.line,t.start.column,this.srcFile)},wrap:function(t){var e=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return t instanceof r?t:(t=o(t,this,e),new r(e.start.line,e.start.column,this.srcFile,t))},functionCall:function(t,e,n){return n=this.generateList(n),this.wrap([t,e?"."+e+"(":"(",n,")"])},quotedString:function(t){return'"'+(t+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=this,n=[];s(t).forEach((function(s){var i=o(t[s],e);"undefined"!==i&&n.push([e.quotedString(s),":",i])}));var i=this.generateList(n);return i.prepend("{"),i.add("}"),i},generateList:function(t){for(var e=this.empty(),n=0,s=t.length;n<s;n++)n&&e.add(","),e.add(o(t[n],this));return e},generateArray:function(t){var e=this.generateList(t);return e.prepend("["),e.add("]"),e}},e.default=a,t.exports=e.default}])},t.exports=e()},129:(t,e)=>{"use strict";var n=Object.prototype.hasOwnProperty;function s(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function i(t){try{return encodeURIComponent(t)}catch(t){return null}}e.stringify=function(t,e){e=e||"";var s,r,o=[];for(r in"string"!=typeof e&&(e="?"),t)if(n.call(t,r)){if((s=t[r])||null!=s&&!isNaN(s)||(s=""),r=i(r),s=i(s),null===r||null===s)continue;o.push(r+"="+s)}return o.length?e+o.join("&"):""},e.parse=function(t){for(var e,n=/([^=?#&]+)=?([^&]*)/g,i={};e=n.exec(t);){var r=s(e[1]),o=s(e[2]);null===r||null===o||r in i||(i[r]=o)}return i}},418:t=>{"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},657:(t,e,n)=>{"use strict";function s(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function i(t,e,n){return e&&s(t.prototype,e),n&&s(t,n),t}function r(){return r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},r.apply(this,arguments)}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function a(t){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},a(t)}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function u(t,e,n){return u=c()?Reflect.construct:function(t,e,n){var s=[null];s.push.apply(s,e);var i=new(Function.bind.apply(t,s));return n&&l(i,n.prototype),i},u.apply(null,arguments)}function h(t){var e="function"==typeof Map?new Map:void 0;return h=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,s)}function s(){return u(t,arguments,a(this).constructor)}return s.prototype=Object.create(t.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l(s,t)},h(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t){return void 0===t}n.d(e,{Z:()=>Ge});var g=function(){function t(){}var e=t.prototype;return e.on=function(t,e,n,s){return void 0===s&&(s=!1),p(this.bindings)&&(this.bindings={}),p(this.bindings[t])&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:n,once:s}),this},e.once=function(t,e,n){return this.on(t,e,n,!0)},e.off=function(t,e){var n=this;return p(this.bindings)||p(this.bindings[t])||(p(e)?delete this.bindings[t]:this.bindings[t].forEach((function(s,i){s.handler===e&&n.bindings[t].splice(i,1)}))),this},e.trigger=function(t){for(var e=this,n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return!p(this.bindings)&&this.bindings[t]&&this.bindings[t].forEach((function(n,i){var r=n.ctx,o=n.handler,a=n.once,l=r||e;o.apply(l,s),a&&e.bindings[t].splice(i,1)})),this},t}();function _(t){for(var e=Object.getOwnPropertyNames(t.constructor.prototype),n=0;n<e.length;n++){var s=e[n],i=t[s];"constructor"!==s&&"function"==typeof i&&(t[s]=i.bind(t))}return t}function f(t){return t instanceof HTMLElement}function m(t){return"function"==typeof t}function S(t){return"string"==typeof t}function T(t){return void 0===t}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function C(t){return"string"==typeof t}function E(t){return void 0===t}function I(t,e){e.split(" ").forEach((function(e){e.trim()&&t.classList.add(e)}))}function b(t,e,n){return void 0===t&&(t=""),E(e)||E(e[t])?n?n+"-"+t:t:!1===e[t]?"":e[t]}function w(t,e){e.split(" ").forEach((function(e){e.trim()&&t.classList.remove(e)}))}function O(t,e,n){n.forEach((function(n){-1===e.indexOf(n)&&t.classList.contains(n)&&w(t,n)})),e.forEach((function(e){t.classList.contains(e)||I(t,e)}))}var y=[];function A(t){y.push(t)}function R(){for(var t;t=y.pop();)t()}var N=null;function P(t){void 0===t&&(t={});var e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach((function(e){if(e)for(var n in e)({}).hasOwnProperty.call(e,n)&&(t[n]=e[n])})),t}function $(){if(N)return N;var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");P(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var s=t.offsetWidth;n===s&&(s=e.clientWidth),document.body.removeChild(e);var i=n-s;return N={width:i,height:i}}var L,x=(L=0,function(){return++L}),D={},k=null;function B(t){var e;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var n=e.documentElement,s=M(t),i=function(){var t=k;t&&document.body.contains(t)||((t=document.createElement("div")).setAttribute("data-tether-id",x()),P(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),k=t);var e=t.getAttribute("data-tether-id");return E(D[e])&&(D[e]=M(t),A((function(){delete D[e]}))),D[e]}();return s.top-=i.top,s.left-=i.left,E(s.width)&&(s.width=document.body.scrollWidth-s.left-s.right),E(s.height)&&(s.height=document.body.scrollHeight-s.top-s.bottom),s.top=s.top-n.clientTop,s.left=s.left-n.clientLeft,s.right=e.body.clientWidth-s.width-s.left,s.bottom=e.body.clientHeight-s.height-s.top,s}function M(t){var e=t.getBoundingClientRect(),n={};for(var s in e)n[s]=e[s];try{if(t.ownerDocument!==document){var i=t.ownerDocument.defaultView.frameElement;if(i){var r=M(i);n.top+=r.top,n.bottom+=r.top,n.left+=r.left,n.right+=r.left}}}catch(t){}return n}var F={position:function(t){var e=this,n=t.top,s=t.left,i=this.cache("element-bounds",(function(){return B(e.element)})),r=i.height,o=i.width,a=this.getTargetBounds(),l=n+r,c=s+o,u=[];n<=a.bottom&&l>=a.top&&["left","right"].forEach((function(t){var e=a[t];e!==s&&e!==c||u.push(t)})),s<=a.right&&c>=a.left&&["top","bottom"].forEach((function(t){var e=a[t];e!==n&&e!==l||u.push(t)}));var h=this.options,d=h.classes,p=h.classPrefix;return this.all.push(b("abutted",d,p)),["left","top","right","bottom"].forEach((function(t){e.all.push(b("abutted",d,p)+"-"+t)})),u.length&&this.add.push(b("abutted",d,p)),u.forEach((function(t){e.add.push(b("abutted",d,p)+"-"+t)})),A((function(){!1!==e.options.addTargetClasses&&O(e.target,e.add,e.all),O(e.element,e.add,e.all)})),!0}},U=["left","top","right","bottom"],H={position:function(t){var e=this,n=t.top,s=t.left,i=t.targetAttachment;if(!this.options.constraints)return!0;var r=this.cache("element-bounds",(function(){return B(e.element)})),o=r.height,a=r.width;if(0===a&&0===o&&!E(this.lastSize)){var l=this.lastSize;a=l.width,o=l.height}var c=this.cache("target-bounds",(function(){return e.getTargetBounds()})),u=c.height,h=c.width,d=this.options,p=d.classes,g=d.classPrefix,_=function(t,e,n){var s=[b("pinned",t,e),b("out-of-bounds",t,e)];return n.forEach((function(t){var e=t.outOfBoundsClass,n=t.pinnedClass;e&&s.push(e),n&&s.push(n)})),s.forEach((function(t){["left","top","right","bottom"].forEach((function(e){s.push(t+"-"+e)}))})),s}(p,g,this.options.constraints),f=[],m=P({},i),S=P({},this.attachment);return this.options.constraints.forEach((function(t){var r,l,c=t.to,d=t.attachment,_=t.pin;if(E(d)&&(d=""),d.indexOf(" ")>=0){var T=d.split(" ");l=T[0],r=T[1]}else r=l=d;var v=function(t,e){if("scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),!E(e.nodeType)){var n=e,s=B(e),i=s,r=getComputedStyle(e);if(e=[i.left,i.top,s.width+i.left,s.height+i.top],n.ownerDocument!==document){var o=n.ownerDocument.defaultView;e[0]+=o.pageXOffset,e[1]+=o.pageYOffset,e[2]+=o.pageXOffset,e[3]+=o.pageYOffset}U.forEach((function(t,n){"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?e[n]+=parseFloat(r["border"+t+"Width"]):e[n]-=parseFloat(r["border"+t+"Width"])}))}return e}(e,c);"target"!==l&&"both"!==l||(n<v[1]&&"top"===m.top&&(n+=u,m.top="bottom"),n+o>v[3]&&"bottom"===m.top&&(n-=u,m.top="top")),"together"===l&&(n=function(t,e,n,s,i,r){return"top"===t.top&&("bottom"===e.top&&r<n[1]?(r+=i,t.top="bottom",r+=s,e.top="top"):"top"===e.top&&r+s>n[3]&&r-(s-i)>=n[1]&&(r-=s-i,t.top="bottom",e.top="bottom")),"bottom"===t.top&&("top"===e.top&&r+s>n[3]?(r-=i,t.top="top",r-=s,e.top="bottom"):"bottom"===e.top&&r<n[1]&&r+(2*s-i)<=n[3]&&(r+=s-i,t.top="top",e.top="top")),"middle"===t.top&&(r+s>n[3]&&"top"===e.top?(r-=s,e.top="bottom"):r<n[1]&&"bottom"===e.top&&(r+=s,e.top="top")),r}(m,S,v,o,u,n)),"target"!==r&&"both"!==r||(s<v[0]&&"left"===m.left&&(s+=h,m.left="right"),s+a>v[2]&&"right"===m.left&&(s-=h,m.left="left")),"together"===r&&(s=function(t,e,n,s,i,r){return r<n[0]&&"left"===t.left?"right"===e.left?(r+=i,t.left="right",r+=s,e.left="left"):"left"===e.left&&(r+=i,t.left="right",r-=s,e.left="right"):r+s>n[2]&&"right"===t.left?"left"===e.left?(r-=i,t.left="left",r-=s,e.left="right"):"right"===e.left&&(r-=i,t.left="left",r+=s,e.left="left"):"center"===t.left&&(r+s>n[2]&&"left"===e.left?(r-=s,e.left="right"):r<n[0]&&"right"===e.left&&(r+=s,e.left="left")),r}(m,S,v,a,h,s)),"element"!==l&&"both"!==l||(n<v[1]&&"bottom"===S.top&&(n+=o,S.top="top"),n+o>v[3]&&"top"===S.top&&(n-=o,S.top="bottom")),"element"!==r&&"both"!==r||(s<v[0]&&("right"===S.left?(s+=a,S.left="left"):"center"===S.left&&(s+=a/2,S.left="left")),s+a>v[2]&&("left"===S.left?(s-=a,S.left="right"):"center"===S.left&&(s-=a/2,S.left="right"))),C(_)?_=_.split(",").map((function(t){return t.trim()})):!0===_&&(_=["top","left","right","bottom"]);var I,w=[],O=[];s=function(t,e,n,s,i,r){return t<e[0]&&(s.indexOf("left")>=0?(t=e[0],i.push("left")):r.push("left")),t+n>e[2]&&(s.indexOf("right")>=0?(t=e[2]-n,i.push("right")):r.push("right")),t}(s,v,a,_=_||[],w,O),n=function(t,e,n,s,i,r){return t<e[1]&&(s.indexOf("top")>=0?(t=e[1],i.push("top")):r.push("top")),t+n>e[3]&&(s.indexOf("bottom")>=0?(t=e[3]-n,i.push("bottom")):r.push("bottom")),t}(n,v,o,_,w,O),w.length&&(I=E(e.options.pinnedClass)?b("pinned",p,g):e.options.pinnedClass,f.push(I),w.forEach((function(t){f.push(I+"-"+t)}))),function(t,e,n,s,i){var r;t.length&&(r=E(i)?b("out-of-bounds",n,s):i,e.push(r),t.forEach((function(t){e.push(r+"-"+t)})))}(O,f,p,g,e.options.outOfBoundsClass),(w.indexOf("left")>=0||w.indexOf("right")>=0)&&(S.left=m.left=!1),(w.indexOf("top")>=0||w.indexOf("bottom")>=0)&&(S.top=m.top=!1),m.top===i.top&&m.left===i.left&&S.top===e.attachment.top&&S.left===e.attachment.left||(e.updateAttachClasses(S,m),e.trigger("update",{attachment:S,targetAttachment:m}))})),A((function(){!1!==e.options.addTargetClasses&&O(e.target,f,_),O(e.element,f,_)})),{top:n,left:s}}},G={position:function(t){var e=t.top,n=t.left;if(this.options.shift){var s,i,r=this.options.shift;if("function"==typeof r&&(r=r.call(this,{top:e,left:n})),C(r)){(r=r.split(" "))[1]=r[1]||r[0];var o=r;s=o[0],i=o[1],s=parseFloat(s,10),i=parseFloat(i,10)}else{var a=[r.top,r.left];s=a[0],i=a[1]}return{top:e+=s,left:n+=i}}}},V=function(){function t(){}var e=t.prototype;return e.on=function(t,e,n,s){return void 0===s&&(s=!1),E(this.bindings)&&(this.bindings={}),E(this.bindings[t])&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:n,once:s}),this},e.once=function(t,e,n){return this.on(t,e,n,!0)},e.off=function(t,e){var n=this;return E(this.bindings)||E(this.bindings[t])||(E(e)?delete this.bindings[t]:this.bindings[t].forEach((function(s,i){s.handler===e&&n.bindings[t].splice(i,1)}))),this},e.trigger=function(t){for(var e=this,n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return!E(this.bindings)&&this.bindings[t]&&this.bindings[t].forEach((function(n,i){var r=n.ctx,o=n.handler,a=n.once,l=r||e;o.apply(l,s),a&&e.bindings[t].splice(i,1)})),this},t}(),W={center:"center",left:"right",right:"left"},j={middle:"middle",top:"bottom",bottom:"top"},K={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"};function Y(){for(var t={top:0,left:0},e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return n.forEach((function(e){var n=e.top,s=e.left;C(n)&&(n=parseFloat(n)),C(s)&&(s=parseFloat(s)),t.top+=n,t.left+=s})),t}function z(t){var e=t.left,n=t.top;return E(K[t.left])||(e=K[t.left]),E(K[t.top])||(n=K[t.top]),{left:e,top:n}}function q(t,e){return C(t.left)&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left)/100*e.width),C(t.top)&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top)/100*e.height),t}function X(t){var e=t.split(" ");return{top:e[0],left:e[1]}}function Q(t){return t.offsetParent||document.documentElement}var J,Z,tt,et,nt={modules:[H,F,G]},st=function(){if(E(document))return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],n=0;n<e.length;++n){var s=e[n];if(void 0!==t.style[s])return s}}(),it=[],rt=function(){it.forEach((function(t){t.position(!1)})),R()};function ot(){return performance.now()}J=null,Z=null,tt=null,et=function t(){if(!E(Z)&&Z>16)return Z=Math.min(Z-16,250),void(tt=setTimeout(t,250));!E(J)&&ot()-J<10||(null!=tt&&(clearTimeout(tt),tt=null),J=ot(),rt(),Z=ot()-J)},E(window)||E(window.addEventListener)||["resize","scroll","touchmove"].forEach((function(t){window.addEventListener(t,et)}));var at=function(t){var e,n;function s(e){var n;return(n=t.call(this)||this).position=n.position.bind(v(n)),it.push(v(n)),n.history=[],n.setOptions(e,!1),nt.modules.forEach((function(t){E(t.initialize)||t.initialize.call(v(n))})),n.position(),n}n=t,(e=s).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=s.prototype;return i.setOptions=function(t,e){var n=this;void 0===e&&(e=!0),this.options=P({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},t);var s=this.options,i=s.element,r=s.target,o=s.targetModifier;if(this.element=i,this.target=r,this.targetModifier=o,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach((function(t){if(E(n[t]))throw new Error("Tether Error: Both element and target must be defined");E(n[t].jquery)?C(n[t])&&(n[t]=document.querySelector(n[t])):n[t]=n[t][0]})),this._addClasses(),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=X(this.options.targetAttachment),this.attachment=X(this.options.attachment),this.offset=X(this.options.offset),this.targetOffset=X(this.options.targetOffset),E(this.scrollParents)||this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=function(t){var e=(getComputedStyle(t)||{}).position,n=[];if("fixed"===e)return[t];for(var s=t;(s=s.parentNode)&&s&&1===s.nodeType;){var i=void 0;try{i=getComputedStyle(s)}catch(t){}if(E(i)||null===i)return n.push(s),n;var r=i,o=r.overflow,a=r.overflowX,l=r.overflowY;/(auto|scroll|overlay)/.test(o+l+a)&&("absolute"!==e||["relative","absolute","fixed"].indexOf(i.position)>=0)&&n.push(s)}return n.push(t.ownerDocument.body),t.ownerDocument!==document&&n.push(t.ownerDocument.defaultView),n}(this.target),!1!==this.options.enabled&&this.enable(e)},i.getTargetBounds=function(){return E(this.targetModifier)?B(this.target):"visible"===this.targetModifier?function(t){if(t===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var e=B(t),n={height:e.height,width:e.width,top:e.top,left:e.left};return n.height=Math.min(n.height,e.height-(pageYOffset-e.top)),n.height=Math.min(n.height,e.height-(e.top+e.height-(pageYOffset+innerHeight))),n.height=Math.min(innerHeight,n.height),n.height-=2,n.width=Math.min(n.width,e.width-(pageXOffset-e.left)),n.width=Math.min(n.width,e.width-(e.left+e.width-(pageXOffset+innerWidth))),n.width=Math.min(innerWidth,n.width),n.width-=2,n.top<pageYOffset&&(n.top=pageYOffset),n.left<pageXOffset&&(n.left=pageXOffset),n}(this.target):"scroll-handle"===this.targetModifier?function(t){var e,n=t.scrollTop,s=t===document.body;s?(t=document.documentElement,e={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):e=B(t);var i=getComputedStyle(t),r=0;(t.scrollWidth>t.clientWidth||[i.overflow,i.overflowX].indexOf("scroll")>=0||!s)&&(r=15);var o=e.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-r,a={width:15,height:.975*o*(o/t.scrollHeight),left:e.left+e.width-parseFloat(i.borderLeftWidth)-15},l=0;o<408&&s&&(l=-11e-5*Math.pow(o,2)-.00727*o+22.58),s||(a.height=Math.max(a.height,24));var c=n/(t.scrollHeight-o);return a.top=c*(o-a.height-l)+e.top+parseFloat(i.borderTopWidth),s&&(a.height=Math.max(a.height,24)),a}(this.target):void 0},i.clearCache=function(){this._cache={}},i.cache=function(t,e){return E(this._cache)&&(this._cache={}),E(this._cache[t])&&(this._cache[t]=e.call(this)),this._cache[t]},i.enable=function(t){var e=this;void 0===t&&(t=!0);var n=this.options,s=n.classes,i=n.classPrefix;!1!==this.options.addTargetClasses&&I(this.target,b("enabled",s,i)),I(this.element,b("enabled",s,i)),this.enabled=!0,this.scrollParents.forEach((function(t){t!==e.target.ownerDocument&&t.addEventListener("scroll",e.position)})),t&&this.position()},i.disable=function(){var t=this,e=this.options,n=e.classes,s=e.classPrefix;w(this.target,b("enabled",n,s)),w(this.element,b("enabled",n,s)),this.enabled=!1,E(this.scrollParents)||this.scrollParents.forEach((function(e){e.removeEventListener("scroll",t.position)}))},i.destroy=function(){var t=this;this.disable(),this._removeClasses(),it.forEach((function(e,n){e===t&&it.splice(n,1)})),0===it.length&&(k&&document.body.removeChild(k),k=null)},i.updateAttachClasses=function(t,e){var n=this;t=t||this.attachment,e=e||this.targetAttachment;var s=this.options,i=s.classes,r=s.classPrefix;!E(this._addAttachClasses)&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),E(this._addAttachClasses)&&(this._addAttachClasses=[]),this.add=this._addAttachClasses,t.top&&this.add.push(b("element-attached",i,r)+"-"+t.top),t.left&&this.add.push(b("element-attached",i,r)+"-"+t.left),e.top&&this.add.push(b("target-attached",i,r)+"-"+e.top),e.left&&this.add.push(b("target-attached",i,r)+"-"+e.left),this.all=[],["left","top","bottom","right","middle","center"].forEach((function(t){n.all.push(b("element-attached",i,r)+"-"+t),n.all.push(b("target-attached",i,r)+"-"+t)})),A((function(){E(n._addAttachClasses)||(O(n.element,n._addAttachClasses,n.all),!1!==n.options.addTargetClasses&&O(n.target,n._addAttachClasses,n.all),delete n._addAttachClasses)}))},i.position=function(t){var e=this;if(void 0===t&&(t=!0),this.enabled){this.clearCache();var n=function(t,e){var n=t.left,s=t.top;return"auto"===n&&(n=W[e.left]),"auto"===s&&(s=j[e.top]),{left:n,top:s}}(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,n);var s=this.cache("element-bounds",(function(){return B(e.element)})),i=s.width,r=s.height;if(0!==i||0!==r||E(this.lastSize))this.lastSize={width:i,height:r};else{var o=this.lastSize;i=o.width,r=o.height}var a=this.cache("target-bounds",(function(){return e.getTargetBounds()})),l=a,c=q(z(this.attachment),{width:i,height:r}),u=q(z(n),l),h=q(this.offset,{width:i,height:r}),d=q(this.targetOffset,l);c=Y(c,h),u=Y(u,d);for(var p=a.left+u.left-c.left,g=a.top+u.top-c.top,_=0;_<nt.modules.length;++_){var f=nt.modules[_].position.call(this,{left:p,top:g,targetAttachment:n,targetPos:a,elementPos:s,offset:c,targetOffset:u,manualOffset:h,manualTargetOffset:d,scrollbarSize:m,attachment:this.attachment});if(!1===f)return!1;E(f)||"object"!=typeof f||(g=f.top,p=f.left)}var m,S={page:{top:g,left:p},viewport:{top:g-pageYOffset,bottom:pageYOffset-g-r+innerHeight,left:p-pageXOffset,right:pageXOffset-p-i+innerWidth}},T=this.target.ownerDocument,v=T.defaultView;if(v.innerHeight>T.documentElement.clientHeight&&(m=this.cache("scrollbar-size",$),S.viewport.bottom-=m.height),v.innerWidth>T.documentElement.clientWidth&&(m=this.cache("scrollbar-size",$),S.viewport.right-=m.width),-1!==["","static"].indexOf(T.body.style.position)&&-1!==["","static"].indexOf(T.body.parentElement.style.position)||(S.page.bottom=T.body.scrollHeight-g-r,S.page.right=T.body.scrollWidth-p-i),!E(this.options.optimizations)&&!1!==this.options.optimizations.moveElement&&E(this.targetModifier)){var C=this.cache("target-offsetparent",(function(){return Q(e.target)})),I=this.cache("target-offsetparent-bounds",(function(){return B(C)})),b=getComputedStyle(C),w=I,O={};if(["Top","Left","Bottom","Right"].forEach((function(t){O[t.toLowerCase()]=parseFloat(b["border"+t+"Width"])})),I.right=T.body.scrollWidth-I.left-w.width+O.right,I.bottom=T.body.scrollHeight-I.top-w.height+O.bottom,S.page.top>=I.top+O.top&&S.page.bottom>=I.bottom&&S.page.left>=I.left+O.left&&S.page.right>=I.right){var y=C.scrollLeft,A=C.scrollTop;S.offset={top:S.page.top-I.top+A-O.top,left:S.page.left-I.left+y-O.left}}}return this.move(S),this.history.unshift(S),this.history.length>3&&this.history.pop(),t&&R(),!0}},i.move=function(t){var e=this;if(!E(this.element.parentNode)){var n,s,i,r={};for(var o in t)for(var a in r[o]={},t[o]){for(var l=!1,c=0;c<this.history.length;++c){var u=this.history[c];if(!(E(u[o])||(n=u[o][a],s=t[o][a],i=void 0,void 0===i&&(i=1),n+i>=s&&s>=n-i))){l=!0;break}}l||(r[o][a]=!0)}var h={top:"",left:"",right:"",bottom:""},d=function(t,n){var s,i;!1!==(E(e.options.optimizations)?null:e.options.optimizations.gpu)?(t.top?(h.top=0,s=n.top):(h.bottom=0,s=-n.bottom),t.left?(h.left=0,i=n.left):(h.right=0,i=-n.right),"number"==typeof window.devicePixelRatio&&devicePixelRatio%1==0&&(i=Math.round(i*devicePixelRatio)/devicePixelRatio,s=Math.round(s*devicePixelRatio)/devicePixelRatio),h[st]="translateX("+i+"px) translateY("+s+"px)","msTransform"!==st&&(h[st]+=" translateZ(0)")):(t.top?h.top=n.top+"px":h.bottom=n.bottom+"px",t.left?h.left=n.left+"px":h.right=n.right+"px")},p=!0;!E(this.options.optimizations)&&!1===this.options.optimizations.allowPositionFixed&&(p=!1);var g,_,f=!1;if((r.page.top||r.page.bottom)&&(r.page.left||r.page.right))h.position="absolute",d(r.page,t.page);else if(p&&(r.viewport.top||r.viewport.bottom)&&(r.viewport.left||r.viewport.right))h.position="fixed",d(r.viewport,t.viewport);else if(!E(r.offset)&&r.offset.top&&r.offset.left){h.position="absolute";var m=this.cache("target-offsetparent",(function(){return Q(e.target)}));Q(this.element)!==m&&A((function(){e.element.parentNode.removeChild(e.element),m.appendChild(e.element)})),d(r.offset,t.offset),f=!0}else h.position="absolute",d({top:!0,left:!0},t.page);if(!f)if(this.options.bodyElement)this.element.parentNode!==this.options.bodyElement&&this.options.bodyElement.appendChild(this.element);else{for(var S=!0,T=this.element.parentNode;T&&1===T.nodeType&&"BODY"!==T.tagName&&(void 0,((_=(g=T).ownerDocument).fullscreenElement||_.webkitFullscreenElement||_.mozFullScreenElement||_.msFullscreenElement)!==g);){if("static"!==getComputedStyle(T).position){S=!1;break}T=T.parentNode}S||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var v={},C=!1;for(var I in h){var b=h[I];this.element.style[I]!==b&&(C=!0,v[I]=b)}C&&A((function(){P(e.element.style,v),e.trigger("repositioned")}))}},i._addClasses=function(){var t=this.options,e=t.classes,n=t.classPrefix;I(this.element,b("element",e,n)),!1!==this.options.addTargetClasses&&I(this.target,b("target",e,n))},i._removeClasses=function(){var t=this,e=this.options,n=e.classes,s=e.classPrefix;w(this.element,b("element",n,s)),!1!==this.options.addTargetClasses&&w(this.target,b("target",n,s)),this.all.forEach((function(e){t.element.classList.remove(e),t.target.classList.remove(e)}))},s}(V);at.modules=[],nt.position=rt;var lt=P(at,nt);lt.modules.push({initialize:function(){var t=this,e=this.options,n=e.classes,s=e.classPrefix;this.markers={},["target","element"].forEach((function(e){var i=document.createElement("div");i.className=b(e+"-marker",n,s);var r=document.createElement("div");r.className=b("marker-dot",n,s),i.appendChild(r),t[e].appendChild(i),t.markers[e]={dot:r,el:i}}))},position:function(t){var e={element:t.manualOffset,target:t.manualTargetOffset};for(var n in e){var s=e[n];for(var i in s){var r=s[i];(!C(r)||-1===r.indexOf("%")&&-1===r.indexOf("px"))&&(r+="px"),this.markers[n].dot.style[i]!==r&&(this.markers[n].dot.style[i]=r)}}return!0}});var ct,ut={bottom:"top center","bottom center":"top center","bottom left":"top right","bottom right":"top left",center:"middle center",left:"middle right",middle:"middle center","middle center":"middle center","middle left":"middle right","middle right":"middle left",right:"middle left",top:"bottom center","top center":"bottom center","top left":"bottom right","top right":"bottom left"};function ht(t){return S(t)&&""!==t?"-"!==t.charAt(t.length-1)?t+"-":t:""}function dt(t){var e=t.options.attachTo||{},n=Object.assign({},e);if(S(e.element)){try{n.element=document.querySelector(e.element)}catch(t){}n.element||console.error("The element for this Shepherd step was not found "+e.element)}return n}function pt(){var t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))}function gt(){}function _t(t,e){for(var n in e)t[n]=e[n];return t}function ft(t){return t()}function mt(){return Object.create(null)}function St(t){t.forEach(ft)}function Tt(t){return"function"==typeof t}function vt(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function Ct(t,e){t.appendChild(e)}function Et(t,e,n){t.insertBefore(e,n||null)}function It(t){t.parentNode.removeChild(t)}function bt(t){return document.createElement(t)}function wt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ot(t){return document.createTextNode(t)}function yt(){return Ot(" ")}function At(t,e,n,s){return t.addEventListener(e,n,s),function(){return t.removeEventListener(e,n,s)}}function Rt(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function Nt(t,e){for(var n in e)"style"===n?t.style.cssText=e[n]:n in t?t[n]=e[n]:Rt(t,n,e[n])}function Pt(t,e,n){t.classList[n?"add":"remove"](e)}function $t(t){ct=t}function Lt(){if(!ct)throw new Error("Function called outside component initialization");return ct}function xt(t){Lt().$$.after_update.push(t)}var Dt=[],kt=[],Bt=[],Mt=[],Ft=Promise.resolve(),Ut=!1;function Ht(t){Bt.push(t)}function Gt(){var t,e=new Set;do{for(;Dt.length;){var n=Dt.shift();$t(n),(t=n.$$).fragment&&(t.update(t.dirty),St(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(Ht))}for(;kt.length;)kt.pop()();for(var s=0;s<Bt.length;s+=1){var i=Bt[s];e.has(i)||(i(),e.add(i))}Bt.length=0}while(Dt.length);for(;Mt.length;)Mt.pop()();Ut=!1}var Vt,Wt=new Set;function jt(){Vt={r:0,c:[],p:Vt}}function Kt(){Vt.r||St(Vt.c),Vt=Vt.p}function Yt(t,e){t&&t.i&&(Wt.delete(t),t.i(e))}function zt(t,e,n,s){if(t&&t.o){if(Wt.has(t))return;Wt.add(t),Vt.c.push((function(){Wt.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}function qt(t,e,n){var s=t.$$,i=s.fragment,r=s.on_mount,o=s.on_destroy,a=s.after_update;i.m(e,n),Ht((function(){var e=r.map(ft).filter(Tt);o?o.push.apply(o,e):St(e),t.$$.on_mount=[]})),a.forEach(Ht)}function Xt(t,e){t.$$.fragment&&(St(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function Qt(t,e,n,s,i,r){var o=ct;$t(t);var a=e.props||{},l=t.$$={fragment:null,ctx:null,props:r,update:gt,not_equal:i,bound:mt(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(o?o.$$.context:[]),callbacks:mt(),dirty:null},c=!1;l.ctx=n?n(t,a,(function(e,n,s){return void 0===s&&(s=n),l.ctx&&i(l.ctx[e],l.ctx[e]=s)&&(l.bound[e]&&l.bound[e](s),c&&function(t,e){t.$$.dirty||(Dt.push(t),Ut||(Ut=!0,Ft.then(Gt)),t.$$.dirty=mt()),t.$$.dirty[e]=!0}(t,e)),n})):a,l.update(),c=!0,St(l.before_update),l.fragment=s(l.ctx),e.target&&(e.hydrate?l.fragment.l(function(t){return Array.from(t.childNodes)}(e.target)):l.fragment.c(),e.intro&&Yt(t.$$.fragment),qt(t,e.target,e.anchor),Gt()),$t(o)}"undefined"!=typeof HTMLElement&&h(HTMLElement);var Jt=function(){function t(){}var e=t.prototype;return e.$destroy=function(){Xt(this,1),this.$destroy=gt},e.$on=function(t,e){var n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}},e.$set=function(){},t}();function Zt(t){var e,n,s,i,r;return{c:function(){e=bt("button"),n=Ot(t.text),Rt(e,"aria-label",s=t.label?t.label:null),Rt(e,"class",i=(t.classes||"")+" shepherd-button "+(t.secondary?"shepherd-button-secondary":"")),e.disabled=t.disabled,Rt(e,"tabindex","0"),r=At(e,"click",t.action)},m:function(t,s){Et(t,e,s),Ct(e,n)},p:function(t,r){t.text&&function(t,e){e=""+e,t.data!==e&&(t.data=e)}(n,r.text),t.label&&s!==(s=r.label?r.label:null)&&Rt(e,"aria-label",s),(t.classes||t.secondary)&&i!==(i=(r.classes||"")+" shepherd-button "+(r.secondary?"shepherd-button-secondary":""))&&Rt(e,"class",i),t.disabled&&(e.disabled=r.disabled)},i:gt,o:gt,d:function(t){t&&It(e),r()}}}function te(t,e,n){var s,i,r,o,a,l,c=e.config,u=e.step;return t.$set=function(t){"config"in t&&n("config",c=t.config),"step"in t&&n("step",u=t.step)},t.$$.update=function(t){void 0===t&&(t={config:1,step:1}),(t.config||t.step)&&(n("action",s=c.action?c.action.bind(u.tour):null),n("classes",i=c.classes),n("secondary",r=c.secondary),n("text",o=c.text),n("label",a=c.label),n("disabled",l=!!c.disabled&&function(t){return m(t)?t.call(u):t}(c.disabled)))},{config:c,step:u,action:s,classes:i,secondary:r,text:o,label:a,disabled:l}}var ee=function(t){function e(e){var n;return Qt(d(n=t.call(this)||this),e,te,Zt,vt,["config","step"]),n}return o(e,t),e}(Jt);function ne(t,e,n){var s=Object.create(t);return s.config=e[n],s}function se(t){for(var e,n,s=t.buttons,i=[],r=0;r<s.length;r+=1)i[r]=ie(ne(t,s,r));var o=function(t){return zt(i[t],1,1,(function(){i[t]=null}))};return{c:function(){for(var t=0;t<i.length;t+=1)i[t].c();e=Ot("")},m:function(t,s){for(var r=0;r<i.length;r+=1)i[r].m(t,s);Et(t,e,s),n=!0},p:function(t,n){if(t.buttons||t.step){var r;for(s=n.buttons,r=0;r<s.length;r+=1){var a=ne(n,s,r);i[r]?(i[r].p(t,a),Yt(i[r],1)):(i[r]=ie(a),i[r].c(),Yt(i[r],1),i[r].m(e.parentNode,e))}for(jt(),r=s.length;r<i.length;r+=1)o(r);Kt()}},i:function(t){if(!n){for(var e=0;e<s.length;e+=1)Yt(i[e]);n=!0}},o:function(t){i=i.filter(Boolean);for(var e=0;e<i.length;e+=1)zt(i[e]);n=!1},d:function(t){!function(t,e){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(i,t),t&&It(e)}}}function ie(t){var e,n=new ee({props:{config:t.config,step:t.step}});return{c:function(){n.$$.fragment.c()},m:function(t,s){qt(n,t,s),e=!0},p:function(t,e){var s={};t.buttons&&(s.config=e.config),t.step&&(s.step=e.step),n.$set(s)},i:function(t){e||(Yt(n.$$.fragment,t),e=!0)},o:function(t){zt(n.$$.fragment,t),e=!1},d:function(t){Xt(n,t)}}}function re(t){var e,n,s=t.buttons&&se(t);return{c:function(){e=bt("footer"),s&&s.c(),Rt(e,"class","shepherd-footer")},m:function(t,i){Et(t,e,i),s&&s.m(e,null),n=!0},p:function(t,n){n.buttons?s?(s.p(t,n),Yt(s,1)):((s=se(n)).c(),Yt(s,1),s.m(e,null)):s&&(jt(),zt(s,1,1,(function(){s=null})),Kt())},i:function(t){n||(Yt(s),n=!0)},o:function(t){zt(s),n=!1},d:function(t){t&&It(e),s&&s.d()}}}function oe(t,e,n){var s,i=e.step;return t.$set=function(t){"step"in t&&n("step",i=t.step)},t.$$.update=function(t){void 0===t&&(t={step:1}),t.step&&n("buttons",s=i.options.buttons)},{step:i,buttons:s}}var ae=function(t){function e(e){var n;return Qt(d(n=t.call(this)||this),e,oe,re,vt,["step"]),n}return o(e,t),e}(Jt);function le(t){var e,n,s,i;return{c:function(){e=bt("button"),(n=bt("span")).textContent="",Rt(n,"aria-hidden","true"),Rt(e,"aria-label",s=t.cancelIcon.label?t.cancelIcon.label:"Close Tour"),Rt(e,"class","shepherd-cancel-icon"),Rt(e,"type","button"),i=At(e,"click",t.handleCancelClick)},m:function(t,s){Et(t,e,s),Ct(e,n)},p:function(t,n){t.cancelIcon&&s!==(s=n.cancelIcon.label?n.cancelIcon.label:"Close Tour")&&Rt(e,"aria-label",s)},i:gt,o:gt,d:function(t){t&&It(e),i()}}}function ce(t,e,n){var s=e.cancelIcon,i=e.step;return t.$set=function(t){"cancelIcon"in t&&n("cancelIcon",s=t.cancelIcon),"step"in t&&n("step",i=t.step)},{cancelIcon:s,step:i,handleCancelClick:function(t){t.preventDefault(),i.cancel()}}}var ue=function(t){function e(e){var n;return Qt(d(n=t.call(this)||this),e,ce,le,vt,["cancelIcon","step"]),n}return o(e,t),e}(Jt);function he(t){var e;return{c:function(){Rt(e=bt("h3"),"id",t.labelId),Rt(e,"class","shepherd-title")},m:function(n,s){Et(n,e,s),t.h3_binding(e)},p:function(t,n){t.labelId&&Rt(e,"id",n.labelId)},i:gt,o:gt,d:function(n){n&&It(e),t.h3_binding(null)}}}function de(t,e,n){var s=e.labelId,i=e.element,r=e.title;return xt((function(){m(r)&&n("title",r=r()),n("element",i.innerHTML=r,i)})),t.$set=function(t){"labelId"in t&&n("labelId",s=t.labelId),"element"in t&&n("element",i=t.element),"title"in t&&n("title",r=t.title)},{labelId:s,element:i,title:r,h3_binding:function(t){kt[t?"unshift":"push"]((function(){n("element",i=t)}))}}}var pe=function(t){function e(e){var n;return Qt(d(n=t.call(this)||this),e,de,he,vt,["labelId","element","title"]),n}return o(e,t),e}(Jt);function ge(t){var e,n=new pe({props:{labelId:t.labelId,title:t.title}});return{c:function(){n.$$.fragment.c()},m:function(t,s){qt(n,t,s),e=!0},p:function(t,e){var s={};t.labelId&&(s.labelId=e.labelId),t.title&&(s.title=e.title),n.$set(s)},i:function(t){e||(Yt(n.$$.fragment,t),e=!0)},o:function(t){zt(n.$$.fragment,t),e=!1},d:function(t){Xt(n,t)}}}function _e(t){var e,n=new ue({props:{cancelIcon:t.cancelIcon,step:t.step}});return{c:function(){n.$$.fragment.c()},m:function(t,s){qt(n,t,s),e=!0},p:function(t,e){var s={};t.cancelIcon&&(s.cancelIcon=e.cancelIcon),t.step&&(s.step=e.step),n.$set(s)},i:function(t){e||(Yt(n.$$.fragment,t),e=!0)},o:function(t){zt(n.$$.fragment,t),e=!1},d:function(t){Xt(n,t)}}}function fe(t){var e,n,s,i=t.title&&ge(t),r=t.cancelIcon&&t.cancelIcon.enabled&&_e(t);return{c:function(){e=bt("header"),i&&i.c(),n=yt(),r&&r.c(),Rt(e,"class","shepherd-header")},m:function(t,o){Et(t,e,o),i&&i.m(e,null),Ct(e,n),r&&r.m(e,null),s=!0},p:function(t,s){s.title?i?(i.p(t,s),Yt(i,1)):((i=ge(s)).c(),Yt(i,1),i.m(e,n)):i&&(jt(),zt(i,1,1,(function(){i=null})),Kt()),s.cancelIcon&&s.cancelIcon.enabled?r?(r.p(t,s),Yt(r,1)):((r=_e(s)).c(),Yt(r,1),r.m(e,null)):r&&(jt(),zt(r,1,1,(function(){r=null})),Kt())},i:function(t){s||(Yt(i),Yt(r),s=!0)},o:function(t){zt(i),zt(r),s=!1},d:function(t){t&&It(e),i&&i.d(),r&&r.d()}}}function me(t,e,n){var s,i,r=e.labelId,o=e.step;return t.$set=function(t){"labelId"in t&&n("labelId",r=t.labelId),"step"in t&&n("step",o=t.step)},t.$$.update=function(t){void 0===t&&(t={step:1}),t.step&&(n("title",s=o.options.title),n("cancelIcon",i=o.options.cancelIcon))},{labelId:r,step:o,title:s,cancelIcon:i}}var Se=function(t){function e(e){var n;return Qt(d(n=t.call(this)||this),e,me,fe,vt,["labelId","step"]),n}return o(e,t),e}(Jt);function Te(t){var e;return{c:function(){Rt(e=bt("div"),"class","shepherd-text"),Rt(e,"id",t.descriptionId)},m:function(n,s){Et(n,e,s),t.div_binding(e)},p:function(t,n){t.descriptionId&&Rt(e,"id",n.descriptionId)},i:gt,o:gt,d:function(n){n&&It(e),t.div_binding(null)}}}function ve(t,e,n){var s=e.descriptionId,i=e.element,r=e.step;return xt((function(){var t=r.options.text;m(t)&&(t=t.call(r)),f(t)?i.appendChild(t):n("element",i.innerHTML=t,i)})),t.$set=function(t){"descriptionId"in t&&n("descriptionId",s=t.descriptionId),"element"in t&&n("element",i=t.element),"step"in t&&n("step",r=t.step)},{descriptionId:s,element:i,step:r,div_binding:function(t){kt[t?"unshift":"push"]((function(){n("element",i=t)}))}}}var Ce=function(t){function e(e){var n;return Qt(d(n=t.call(this)||this),e,ve,Te,vt,["descriptionId","element","step"]),n}return o(e,t),e}(Jt);function Ee(t){var e,n=new Ce({props:{descriptionId:t.descriptionId,step:t.step}});return{c:function(){n.$$.fragment.c()},m:function(t,s){qt(n,t,s),e=!0},p:function(t,e){var s={};t.descriptionId&&(s.descriptionId=e.descriptionId),t.step&&(s.step=e.step),n.$set(s)},i:function(t){e||(Yt(n.$$.fragment,t),e=!0)},o:function(t){zt(n.$$.fragment,t),e=!1},d:function(t){Xt(n,t)}}}function Ie(t){var e,n=new ae({props:{step:t.step}});return{c:function(){n.$$.fragment.c()},m:function(t,s){qt(n,t,s),e=!0},p:function(t,e){var s={};t.step&&(s.step=e.step),n.$set(s)},i:function(t){e||(Yt(n.$$.fragment,t),e=!0)},o:function(t){zt(n.$$.fragment,t),e=!1},d:function(t){Xt(n,t)}}}function be(t){var e,n,s,i,r=!T(t.step.options.text),o=Array.isArray(t.step.options.buttons)&&t.step.options.buttons.length,a=new Se({props:{labelId:t.labelId,step:t.step}}),l=r&&Ee(t),c=o&&Ie(t);return{c:function(){e=bt("div"),a.$$.fragment.c(),n=yt(),l&&l.c(),s=yt(),c&&c.c(),Rt(e,"class","shepherd-content")},m:function(t,r){Et(t,e,r),qt(a,e,null),Ct(e,n),l&&l.m(e,null),Ct(e,s),c&&c.m(e,null),i=!0},p:function(t,n){var i={};t.labelId&&(i.labelId=n.labelId),t.step&&(i.step=n.step),a.$set(i),t.step&&(r=!T(n.step.options.text)),r?l?(l.p(t,n),Yt(l,1)):((l=Ee(n)).c(),Yt(l,1),l.m(e,s)):l&&(jt(),zt(l,1,1,(function(){l=null})),Kt()),t.step&&(o=Array.isArray(n.step.options.buttons)&&n.step.options.buttons.length),o?c?(c.p(t,n),Yt(c,1)):((c=Ie(n)).c(),Yt(c,1),c.m(e,null)):c&&(jt(),zt(c,1,1,(function(){c=null})),Kt())},i:function(t){i||(Yt(a.$$.fragment,t),Yt(l),Yt(c),i=!0)},o:function(t){zt(a.$$.fragment,t),zt(l),zt(c),i=!1},d:function(t){t&&It(e),Xt(a),l&&l.d(),c&&c.d()}}}function we(t,e,n){var s=e.descriptionId,i=e.labelId,r=e.step;return t.$set=function(t){"descriptionId"in t&&n("descriptionId",s=t.descriptionId),"labelId"in t&&n("labelId",i=t.labelId),"step"in t&&n("step",r=t.step)},{descriptionId:s,labelId:i,step:r}}var Oe=function(t){function e(e){var n;return Qt(d(n=t.call(this)||this),e,we,be,vt,["descriptionId","labelId","step"]),n}return o(e,t),e}(Jt);function ye(t){var e;return{c:function(){Rt(e=bt("div"),"class","shepherd-arrow")},m:function(t,n){Et(t,e,n)},d:function(t){t&&It(e)}}}function Ae(t){for(var e,n,s,i,r=t.step.options.arrow&&t.step.options.attachTo&&t.step.options.attachTo.element&&ye(),o=new Oe({props:{descriptionId:t.descriptionId,labelId:t.labelId,step:t.step}}),a=[{"aria-describedby":T(t.step.options.text)?null:t.descriptionId},{"aria-labelledby":t.step.options.title?t.labelId:null},t.dataStepId,{role:"dialog"},{tabindex:"0"}],l={},c=0;c<a.length;c+=1)l=_t(l,a[c]);return{c:function(){e=bt("div"),r&&r.c(),n=yt(),o.$$.fragment.c(),Nt(e,l),Pt(e,"shepherd-has-cancel-icon",t.hasCancelIcon),Pt(e,"shepherd-has-title",t.hasTitle),Pt(e,"shepherd-element",!0),i=At(e,"keydown",t.handleKeyDown)},m:function(i,a){Et(i,e,a),r&&r.m(e,null),Ct(e,n),qt(o,e,null),t.div_binding(e),s=!0},p:function(t,s){s.step.options.arrow&&s.step.options.attachTo&&s.step.options.attachTo.element?r||((r=ye()).c(),r.m(e,n)):r&&(r.d(1),r=null);var i={};t.descriptionId&&(i.descriptionId=s.descriptionId),t.labelId&&(i.labelId=s.labelId),t.step&&(i.step=s.step),o.$set(i),Nt(e,function(t,e){for(var n={},s={},i={$$scope:1},r=t.length;r--;){var o=t[r],a=e[r];if(a){for(var l in o)l in a||(s[l]=1);for(var c in a)i[c]||(n[c]=a[c],i[c]=1);t[r]=a}else for(var u in o)i[u]=1}for(var h in s)h in n||(n[h]=void 0);return n}(a,[(t.isUndefined||t.step||t.descriptionId)&&{"aria-describedby":T(s.step.options.text)?null:s.descriptionId},(t.step||t.labelId)&&{"aria-labelledby":s.step.options.title?s.labelId:null},t.dataStepId&&s.dataStepId,{role:"dialog"},{tabindex:"0"}])),t.hasCancelIcon&&Pt(e,"shepherd-has-cancel-icon",s.hasCancelIcon),t.hasTitle&&Pt(e,"shepherd-has-title",s.hasTitle)},i:function(t){s||(Yt(o.$$.fragment,t),s=!0)},o:function(t){zt(o.$$.fragment,t),s=!1},d:function(n){n&&It(e),r&&r.d(),Xt(o),t.div_binding(null),i()}}}function Re(t){return t.split(" ").filter((function(t){return!!t.length}))}function Ne(t,e,n){var s,i,r,o,a=e.classPrefix,l=e.element,c=e.descriptionId,u=e.firstFocusableElement,h=e.focusableElements,d=e.labelId,p=e.lastFocusableElement,g=e.step,_=e.dataStepId;return o=function(){var t;n("dataStepId",((t={})["data-"+a+"shepherd-step-id"]=g.id,_=t)),n("focusableElements",h=l.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')),n("firstFocusableElement",u=h[0]),n("lastFocusableElement",p=h[h.length-1])},Lt().$$.on_mount.push(o),xt((function(){r!==g.options.classes&&(function(t){if(S(t)){var e,n=Re(t);n.length&&(e=l.classList).remove.apply(e,n)}}(r),function(t){if(S(t)){var e,n=Re(t);n.length&&(e=l.classList).add.apply(e,n)}}(r=g.options.classes))})),t.$set=function(t){"classPrefix"in t&&n("classPrefix",a=t.classPrefix),"element"in t&&n("element",l=t.element),"descriptionId"in t&&n("descriptionId",c=t.descriptionId),"firstFocusableElement"in t&&n("firstFocusableElement",u=t.firstFocusableElement),"focusableElements"in t&&n("focusableElements",h=t.focusableElements),"labelId"in t&&n("labelId",d=t.labelId),"lastFocusableElement"in t&&n("lastFocusableElement",p=t.lastFocusableElement),"step"in t&&n("step",g=t.step),"dataStepId"in t&&n("dataStepId",_=t.dataStepId)},t.$$.update=function(t){void 0===t&&(t={step:1}),t.step&&(n("hasCancelIcon",s=g.options&&g.options.cancelIcon&&g.options.cancelIcon.enabled),n("hasTitle",i=g.options&&g.options.title))},{classPrefix:a,element:l,descriptionId:c,firstFocusableElement:u,focusableElements:h,labelId:d,lastFocusableElement:p,step:g,dataStepId:_,hasCancelIcon:s,hasTitle:i,getElement:function(){return l},handleKeyDown:function(t){var e=g.tour;switch(t.keyCode){case 9:if(0===h.length){t.preventDefault();break}t.shiftKey?document.activeElement===u&&(t.preventDefault(),p.focus()):document.activeElement===p&&(t.preventDefault(),u.focus());break;case 27:e.options.exitOnEsc&&g.cancel();break;case 37:e.options.keyboardNavigation&&e.back();break;case 39:e.options.keyboardNavigation&&e.next()}},div_binding:function(t){kt[t?"unshift":"push"]((function(){n("element",l=t)}))}}}var Pe,$e,Le=function(t){function e(e){var n;return Qt(d(n=t.call(this)||this),e,Ne,Ae,vt,["classPrefix","element","descriptionId","firstFocusableElement","focusableElements","labelId","lastFocusableElement","step","dataStepId","getElement"]),n}return o(e,t),i(e,[{key:"getElement",get:function(){return this.$$.ctx.getElement}}]),e}(Jt),xe=(Pe=function(t,e){t.exports={polyfill:function(){var t=window,e=document;if(!("scrollBehavior"in e.documentElement.style)||!0===t.__forceSmoothScrollPolyfill__){var n,s=t.HTMLElement||t.Element,i={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:s.prototype.scroll||a,scrollIntoView:s.prototype.scrollIntoView},r=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now,o=(n=t.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(n)?1:0);t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?g.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):i.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))},t.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?i.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):g.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))},s.prototype.scroll=s.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==l(arguments[0])){var t=arguments[0].left,e=arguments[0].top;g.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===e?this.scrollTop:~~e)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},s.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):i.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},s.prototype.scrollIntoView=function(){if(!0!==l(arguments[0])){var n=d(this),s=n.getBoundingClientRect(),r=this.getBoundingClientRect();n!==e.body?(g.call(this,n,n.scrollLeft+r.left-s.left,n.scrollTop+r.top-s.top),"fixed"!==t.getComputedStyle(n).position&&t.scrollBy({left:s.left,top:s.top,behavior:"smooth"})):t.scrollBy({left:r.left,top:r.top,behavior:"smooth"})}else i.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function a(t,e){this.scrollLeft=t,this.scrollTop=e}function l(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(t,e){return"Y"===e?t.clientHeight+o<t.scrollHeight:"X"===e?t.clientWidth+o<t.scrollWidth:void 0}function u(e,n){var s=t.getComputedStyle(e,null)["overflow"+n];return"auto"===s||"scroll"===s}function h(t){var e=c(t,"Y")&&u(t,"Y"),n=c(t,"X")&&u(t,"X");return e||n}function d(t){for(;t!==e.body&&!1===h(t);)t=t.parentNode||t.host;return t}function p(e){var n,s,i,o,a=(r()-e.startTime)/468;o=a=a>1?1:a,n=.5*(1-Math.cos(Math.PI*o)),s=e.startX+(e.x-e.startX)*n,i=e.startY+(e.y-e.startY)*n,e.method.call(e.scrollable,s,i),s===e.x&&i===e.y||t.requestAnimationFrame(p.bind(t,e))}function g(n,s,o){var l,c,u,h,d=r();n===e.body?(l=t,c=t.scrollX||t.pageXOffset,u=t.scrollY||t.pageYOffset,h=i.scroll):(l=n,c=n.scrollLeft,u=n.scrollTop,h=a),p({scrollable:l,method:h,startTime:d,startX:c,startY:u,x:s,y:o})}}}},Pe($e={exports:{}}),$e.exports);xe.polyfill,xe.polyfill();var De=function(t){function e(e,n){var s;return void 0===n&&(n={}),(s=t.call(this,e,n)||this).tour=e,s.classPrefix=s.tour.options?ht(s.tour.options.classPrefix):"",s.styles=e.styles,_(d(s)),s._setOptions(n),d(s)||d(s)}o(e,t);var n=e.prototype;return n.cancel=function(){this.tour.cancel(),this.trigger("cancel")},n.complete=function(){this.tour.complete(),this.trigger("complete")},n.destroy=function(){this.tooltip&&(this.tooltip.destroy(),this.tooltip=null),f(this.el)&&this.el.parentNode&&(this.el.parentNode.removeChild(this.el),this.el=null),this.target&&this._updateStepTargetOnHide(),this.trigger("destroy")},n.getTour=function(){return this.tour},n.hide=function(){this.tour.modal.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this.target&&this._updateStepTargetOnHide(),this.trigger("hide")},n.isOpen=function(){return Boolean(this.el&&!this.el.hidden)},n.show=function(){var t=this;if(m(this.options.beforeShowPromise)){var e=this.options.beforeShowPromise();if(!T(e))return e.then((function(){return t._show()}))}this._show()},n.updateStepOptions=function(t){Object.assign(this.options,t),this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})},n._createTooltipContent=function(){var t=this.id+"-description",e=this.id+"-label";return this.shepherdElementComponent=new Le({target:document.body,props:{classPrefix:this.classPrefix,descriptionId:t,labelId:e,step:this,styles:this.styles}}),this.shepherdElementComponent.getElement()},n._scrollTo=function(t){var e=dt(this).element;m(this.options.scrollToHandler)?this.options.scrollToHandler(e):f(e)&&"function"==typeof e.scrollIntoView&&e.scrollIntoView(t)},n._getClassOptions=function(t){var e=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,n=t.classes?t.classes:"",s=e&&e.classes?e.classes:"",i=[].concat(n.split(" "),s.split(" ")),r=new Set(i);return Array.from(r).join(" ").trim()},n._setOptions=function(t){var e=this;void 0===t&&(t={});var n=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;this.options=Object.assign({arrow:!0},n,t);var s=this.options.when;this.options.classes=this._getClassOptions(t),this.destroy(),this.id=this.options.id||"step-"+pt(),s&&Object.keys(s).forEach((function(t){e.on(t,s[t],e)}))},n._setupElements=function(){T(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&function(t){var e=t.options.advanceOn||{},n=e.event,s=e.selector;if(!n)return console.error("advanceOn was defined, but no event name was passed.");var i,r=function(t,e){return function(n){if(e.isOpen()){var s=e.el&&n.currentTarget===e.el;(!T(t)&&n.currentTarget.matches(t)||s)&&e.tour.next()}}}(s,t);try{i=document.querySelector(s)}catch(t){}if(!T(s)&&!i)return console.error("No element was found for the selector supplied to advanceOn: "+s);i?(i.addEventListener(n,r),t.on("destroy",(function(){return i.removeEventListener(n,r)}))):(document.body.addEventListener(n,r,!0),t.on("destroy",(function(){return document.body.removeEventListener(n,r,!0)})))}(this),function(t){t.tooltip&&t.tooltip.destroy();var e=dt(t),n=function(t,e){var n={classPrefix:"shepherd",constraints:[{to:"scrollParent",attachment:"together",pin:["left","right","top"]},{to:"window",attachment:"together"}]},s=document.body;return t.element&&t.on?(n.attachment=ut[t.on]||ut.right,s=t.element):(n.attachment="middle center",n.targetModifier="visible"),n.element=e.el,n.target=s,e.options.tetherOptions&&(e.options.tetherOptions.constraints&&(n.constraints=e.options.tetherOptions.constraints),n.classes=r({},n.classes,{},e.options.tetherOptions.classes),n.optimizations=r({},n.optimizations,{},e.options.tetherOptions.optimizations),n=r({},n,{},e.options.tetherOptions)),n}(e,t);t.tooltip=new lt(n),t.target=e.element}(this)},n._show=function(){var t=this;this.trigger("before-show"),this._setupElements(),this.tour.modal.setupForStep(this),this._styleTargetElementForStep(this),this.el.hidden=!1,this.tooltip.position(),(this.target||document.body).classList.add(this.classPrefix+"shepherd-enabled",this.classPrefix+"shepherd-target"),this.options.scrollTo&&setTimeout((function(){t._scrollTo(t.options.scrollTo)})),this.trigger("show"),this.el.focus()},n._styleTargetElementForStep=function(t){var e=t.target;e&&(t.options.highlightClass&&e.classList.add(t.options.highlightClass),!1===t.options.canClickTarget&&e.classList.add("shepherd-target-click-disabled"))},n._updateStepTargetOnHide=function(){this.options.highlightClass&&this.target.classList.remove(this.options.highlightClass),this.target.classList.remove(this.classPrefix+"shepherd-enabled",this.classPrefix+"shepherd-target")},e}(g);function ke(t){var e,n,s,i,r;return{c:function(){e=wt("svg"),Rt(n=wt("path"),"d",s="M "+t.openingProperties.x+" "+t.openingProperties.y+" H "+(t.openingProperties.width+t.openingProperties.x)+" V "+(t.openingProperties.height+t.openingProperties.y)+" H "+t.openingProperties.x+" L "+t.openingProperties.x+" 0 Z M 0 0 H "+t.window.innerWidth+" V "+t.window.innerHeight+" H 0 L 0 0 Z"),Rt(e,"class",i=(t.modalIsVisible?"shepherd-modal-is-visible":"")+" shepherd-modal-overlay-container"),r=At(e,"touchmove",t._preventModalOverlayTouch)},m:function(s,i){Et(s,e,i),Ct(e,n),t.svg_binding(e)},p:function(t,r){t.openingProperties&&s!==(s="M "+r.openingProperties.x+" "+r.openingProperties.y+" H "+(r.openingProperties.width+r.openingProperties.x)+" V "+(r.openingProperties.height+r.openingProperties.y)+" H "+r.openingProperties.x+" L "+r.openingProperties.x+" 0 Z M 0 0 H "+r.window.innerWidth+" V "+r.window.innerHeight+" H 0 L 0 0 Z")&&Rt(n,"d",s),t.modalIsVisible&&i!==(i=(r.modalIsVisible?"shepherd-modal-is-visible":"")+" shepherd-modal-overlay-container")&&Rt(e,"class",i)},i:gt,o:gt,d:function(n){n&&It(e),t.svg_binding(null),r()}}}function Be(t){if(!t)return null;var e=t instanceof HTMLElement&&window.getComputedStyle(t).overflowY;return"hidden"!==e&&"visible"!==e&&t.scrollHeight>=t.clientHeight?t:Be(t.parentElement)}function Me(t,e,n){var s=e.element,i=e.openingProperties,r=(pt(),!1),o=void 0;function a(){n("openingProperties",i={height:0,x:0,y:0,width:0})}function l(){n("modalIsVisible",r=!1),d()}function c(t,e,s){if(void 0===s&&(s=0),t.getBoundingClientRect){var r=function(t,e){var n=t.getBoundingClientRect(),s=n.y||n.top,i=n.bottom||s+n.height;if(e){var r=e.getBoundingClientRect(),o=r.y||r.top,a=r.bottom||o+r.height;s=Math.max(s,o),i=Math.min(i,a)}return{y:s,height:Math.max(i-s,0)}}(t,e),o=r.y,a=r.height,l=t.getBoundingClientRect(),c=l.x,u=l.width,h=l.left;n("openingProperties",i={x:(c||h)-s,y:o-s,width:u+2*s,height:a+2*s})}}function u(){n("modalIsVisible",r=!0)}a();var h=function(t){t.preventDefault()};function d(){o&&(cancelAnimationFrame(o),o=void 0),window.removeEventListener("touchmove",h,{passive:!1})}return t.$set=function(t){"element"in t&&n("element",s=t.element),"openingProperties"in t&&n("openingProperties",i=t.openingProperties)},{element:s,openingProperties:i,modalIsVisible:r,getElement:function(){return s},closeModalOpening:a,hide:l,positionModalOpening:c,setupForStep:function(t){d(),t.tour.options.useModalOverlay?(function(t){var e=t.options.modalOverlayOpeningPadding;if(t.target){var n=Be(t.target);(function s(){o=void 0,c(t.target,n,e),o=requestAnimationFrame(s)})(),window.addEventListener("touchmove",h,{passive:!1})}else a()}(t),u()):l()},show:u,_preventModalOverlayTouch:function(t){t.stopPropagation()},window,svg_binding:function(t){kt[t?"unshift":"push"]((function(){n("element",s=t)}))}}}var Fe=function(t){function e(e){var n;return Qt(d(n=t.call(this)||this),e,Me,ke,vt,["element","openingProperties","getElement","closeModalOpening","hide","positionModalOpening","setupForStep","show"]),n}return o(e,t),i(e,[{key:"getElement",get:function(){return this.$$.ctx.getElement}},{key:"closeModalOpening",get:function(){return this.$$.ctx.closeModalOpening}},{key:"hide",get:function(){return this.$$.ctx.hide}},{key:"positionModalOpening",get:function(){return this.$$.ctx.positionModalOpening}},{key:"setupForStep",get:function(){return this.$$.ctx.setupForStep}},{key:"show",get:function(){return this.$$.ctx.show}}]),e}(Jt),Ue=new g,He=function(t){function e(e){var n;return void 0===e&&(e={}),_(d(n=t.call(this,e)||this)),n.options=Object.assign({},{exitOnEsc:!0,keyboardNavigation:!0},e),n.classPrefix=ht(n.options.classPrefix),n.steps=[],n.addSteps(n.options.steps),["active","cancel","complete","inactive","show","start"].map((function(t){var e;e=t,n.on(e,(function(t){(t=t||{}).tour=d(n),Ue.trigger(e,t)}))})),n.modal=new Fe({target:e.modalContainer||document.body,props:{classPrefix:n.classPrefix,styles:n.styles}}),n._setTourID(),d(n)||d(n)}o(e,t);var n=e.prototype;return n.addStep=function(t,e){var n=t;return n instanceof De?n.tour=this:n=new De(this,n),T(e)?this.steps.push(n):this.steps.splice(e,0,n),n},n.addSteps=function(t){var e=this;return Array.isArray(t)&&t.forEach((function(t){e.addStep(t)})),this},n.back=function(){var t=this.steps.indexOf(this.currentStep);this.show(t-1,!1)},n.cancel=function(){if(this.options.confirmCancel){var t=this.options.confirmCancelMessage||"Are you sure you want to stop the tour?";window.confirm(t)&&this._done("cancel")}else this._done("cancel")},n.complete=function(){this._done("complete")},n.getById=function(t){return this.steps.find((function(e){return e.id===t}))},n.getCurrentStep=function(){return this.currentStep},n.hide=function(){var t=this.getCurrentStep();if(t)return t.hide()},n.isActive=function(){return Ue.activeTour===this},n.next=function(){var t=this.steps.indexOf(this.currentStep);t===this.steps.length-1?this.complete():this.show(t+1,!0)},n.removeStep=function(t){var e=this,n=this.getCurrentStep();this.steps.some((function(n,s){if(n.id===t)return n.isOpen()&&n.hide(),n.destroy(),e.steps.splice(s,1),!0})),n&&n.id===t&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())},n.show=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!0);var n=S(t)?this.getById(t):this.steps[t];n&&(this._updateStateBeforeShow(),m(n.options.showOn)&&!n.options.showOn()?this._skipStep(n,e):(this.trigger("show",{step:n,previous:this.currentStep}),this.currentStep=n,n.show()))},n.start=function(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this._setupActiveTour(),this.next()},n._done=function(t){var e=this.steps.indexOf(this.currentStep);Array.isArray(this.steps)&&this.steps.forEach((function(t){return t.destroy()})),this&&this.steps.forEach((function(t){t.options&&!1===t.options.canClickTarget&&t.options.attachTo&&t.target instanceof HTMLElement&&t.target.classList.remove("shepherd-target-click-disabled")})),this.trigger(t,{index:e}),Ue.activeTour=null,this.trigger("inactive",{tour:this}),this.modal.hide(),f(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()},n._setupActiveTour=function(){this.trigger("active",{tour:this}),Ue.activeTour=this},n._skipStep=function(t,e){var n=this.steps.indexOf(t),s=e?n+1:n-1;this.show(s,e)},n._updateStateBeforeShow=function(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()},n._setTourID=function(){var t=this.options.tourName||"tour";this.id=t+"--"+pt()},e}(g);Object.assign(Ue,{Tour:He,Step:De});const Ge=Ue},62:(t,e,n)=>{"use strict";n.d(e,{t:()=>s});class s{}s.navigationsInitialized="wpccNavigationsInitialized",s.optionsBoxTabActivated="wpccOptionsBoxTabActivated",s.tabActivated="wpccTabActivated",s.devToolsOpened="wpccDevToolsOpened",s.devToolsClosed="wpccDevToolsClosed",s.optionsBoxOpened="wpccOptionsBoxOpened",s.optionsBoxClosed="wpccOptionsBoxClosed",s.devToolsSelectorFound="wpccDevToolsSelectorFound",s.testResultsHidden="wpccTestResultsHidden",s.testResultsBeforeHidden="wpccTestResultsBeforeHidden",s.testResultsLoaded="wpccTestResultsLoaded",s.dashboardRefreshCountdownStarted="wpccDashboardRefreshCountdownStarted",s.siteSettingsQuickSaved="wpccSiteSettingsQuickSaved",s.siteTesterTestFinished="wpccSiteTesterTestFinished",s.generalSettingsLoaded="wpccGeneralSettingsLoaded",s.toolTestResultsLoaded="wpccToolTestResultsLoaded",s.filteringCommandChangeFinished="wpccFilteringCommandChangeFinished"},877:(t,e,n)=>{"use strict";n.d(e,{G:()=>l});var s=n(685),i=n(784),r=n(730),o=n(296),a=n(778);class l{constructor(){let t=s.$.getInstance();t.$containerMetaBox.on("click",`.${t.clsAddNew}`,(t=>this.onClickAddNew(t))),t.$containerMetaBox.on("click",".wcc-remove",(t=>this.onClickRemove(t))),o.H.getInstance()}static getInstance(){return a.u.getInstance().get("InputGroupHandler",(()=>new l))}addNewInputGroup(t){let e=t.find(".input-group").first().clone(),n=0;t.find(".input-group").each((function(){let t=$(this);null!=t.data("key")&&t.data("key")>n&&(n=t.data("key"))}));let s=e.data("key"),r=n+1;e.attr("data-key",r),e.data("key",r);let o=e.html();const a=this.getInputGroupKeyLookBehindRegex(t);e.html(o.replace(new RegExp(`${a}\\[${s}\\]`,"g"),"["+r+"]")),e.find("input").each((function(){$(this).val("")})),e.find("textarea").each((function(){$(this).html("")})),e.find("input[type=checkbox]").each((function(){$(this).prop("checked",!1)}));for(let t of l.modifiers)t(e);return t.append(e),i.u.initAllIn(e),e.find(".wcc-options-box").each((function(){let t=$(this);t.removeClass("has-config"),i.u.for(t).destroy().apply()})),this.resetInputGroupKeys(t),e}onClickRemove(t){t.preventDefault(),this.remove($(t.target))}remove(t,e=!0){if(null===t||!t.length)return;let n=t.closest(".inputs"),s=n.find(".input-group").length,r=t.closest(".input-group");if(1==s){r.find("input").each(((t,n)=>{const s=$(n);s.val(""),e&&s.trigger("change")})),r.find("textarea").each(((t,n)=>{const s=$(n);s.html("").val(""),e&&s.trigger("change")})),r.find("input[type=checkbox]").each(((t,n)=>{const s=$(n);s.prop("checked",!1),e&&s.trigger("change")})),r.find(".wcc-options-box").each(((t,e)=>{const n=$(e);n.removeClass("has-config"),i.u.for(n).destroy().apply()}));for(let t of l.resetModifiers)t(r)}else{const t=r.find(".input-container").find("input, select, textarea").val("");e&&t.trigger("change"),r.remove()}this.resetInputGroupKeys(n)}onClickAddNew(t){t.preventDefault(),this.addNew($(t.target))}addNew(t){if(null===t||!t.length)return;let e=t.closest("td").find(".inputs"),n=t.data("max");return 0!=n&&e.length>=n?void 0:this.addNewInputGroup(e)}resetInputGroupKeys(t){let e,n,s,i;const r=this.getInputGroupKeyLookBehindRegex(t);let o=new RegExp(`${r}\\[[0-9]+\\]`,"g");t.find("> .input-group").each(((t,r)=>{e=$(r),e.data("key",t),e.attr("data-key",t),e.find(":input[name]").each((function(){n=$(this),s=n.attr("id"),i=n.attr("name"),null!=i&&"undefined"!==i&&i.length&&n.attr("name",i.replace(o,"["+t+"]")),null!=s&&"undefined"!==s&&s.length&&n.attr("id",s.replace(o,"["+t+"]"))}))}))}registerModifier(t){l.modifiers.push(t)}registerResetModifier(t){l.resetModifiers.push(t)}getInputGroupKeyLookBehindRegex(t,e=""){const n=t.data("name")||null;if(null===n)return e;const s=r.c.escapeRegExp(n);return`(?<=${s}\\]|${s})`}}l.modifiers=[],l.resetModifiers=[]},305:(t,e,n)=>{"use strict";n.d(e,{d:()=>c});var s=n(657),i=n(140),r=n(280),o=n(103),a=n(62),l=n(685);class c{constructor(){c.maybeInit()}static getInstance(){return null===this.instance&&(this.instance=new c),this.instance}notify(t,e){null!=e&&e.length||(e=window.wpcc.required_for_test);let n=t.closest("tr").find("label").first(),s=n.length?n:t;const r=t.closest(".tab.hidden");if(r.length){const t=r.attr("id");o.I.getInstance().activateTab(`#${t}`)}this.scrollToElement(s),this.notifyRegular(s,e,i.k.ERROR)}notifyRegular(t,e,n=i.k.INFO,o=r.E.TOP){this.clearNotification(t);const a=new s.Z.Tour({keyboardNavigation:!1,useModalOverlay:!1,defaultStepOptions:{cancelIcon:{enabled:!1}}}),l=$(`<div>${e}</div>`),c=()=>{const t=l.closest(".shepherd-element");t.length?(t.css({opacity:0}),setTimeout((()=>a.complete()),250)):a.complete()};l.on("click",c),a.addStep({classes:`wpcc-notification ${n}`,text:l[0],attachTo:{element:t[0],on:o}}),this.setTourToElement(t,a);const u=document.activeElement;u instanceof HTMLElement&&u.blur(),a.start(),u instanceof HTMLElement&&u.focus(),this.keepTabbedNotificationReference(t,a),setTimeout(c,5e3)}clearNotification(t){const e=this.getTourFromElement(t);e&&e.cancel()}keepTabbedNotificationReference(t,e){var n,s;const i=this.getTab(t);if(!i)return;const r=null!==(n=i.attr("id"))&&void 0!==n?n:null;if(null===r||""===r)return;let o=null!==(s=c.activeNotificationsInTabs.get(r))&&void 0!==s?s:null;null===o&&(o=[],c.activeNotificationsInTabs.set(r,o)),o.push(t);const a=()=>{const e=o.indexOf(t);-1!==e&&o.splice(e,1)};e.on("cancel",a),e.on("complete",a),i.hasClass(l.$.getInstance().clsTabHidden)&&e.hide()}getTab(t){const e=t.closest(`.${l.$.getInstance().clsTab}`);return e.length?e:null}getTourFromElement(t){const e=t.data("tour");return e instanceof s.Z.Tour?e:null}setTourToElement(t,e){if(t.data("tour",e),!e)return;const n=()=>this.setTourToElement(t,null);e.on("cancel",n),e.on("complete",n)}scrollToElement(t){$(document).find("html, body").stop().animate({scrollTop:t.first().offset().top-$(window).height()/4},500,"swing")}static maybeInit(){this.initialized||(this.initialized=!0,$(document).on(a.t.tabActivated,((t,e)=>{this.onTabActivated(e)})).on(a.t.optionsBoxTabActivated,((t,e)=>{this.onTabActivated(e)})))}static onTabActivated(t){const e=c.getInstance();let n;for(const[s,i]of this.activeNotificationsInTabs.entries())n=s===t,i.forEach((t=>{const s=e.getTourFromElement(t);s&&(n?s.show():s.hide())}))}}c.instance=null,c.initialized=!1,c.activeNotificationsInTabs=new Map},687:(t,e,n)=>{"use strict";n.d(e,{S:()=>r});var s=n(62),i=n(103);class r{constructor(){this._selectorNavContainer=".tab-section-nav",this.selectorTabContainer=".tab",this.selectorNavigationRow="tr[data-id^=section-]",$(document).on("click",this._selectorNavContainer+" [data-id]",(t=>this.onClickNavItem(t)))}static getInstance(){return null===this.instance&&(this.instance=new r),this.instance}onClickNavItem(t){let e=$(t.target),n=e.data("id"),s=null,r=0===n.indexOf("tab");if(r)s=$("#"+n);else{let t='tr[data-id="'+n+'"]';s=e.closest(this.selectorTabContainer).find(t)||null}if(null===s||!s.length)return;let o=$(document).find("html, body"),a=i.I.getInstance().getFixedElementsTotalHeight();o.stop().animate({scrollTop:s.offset().top-a-.02*$(window).height()},500,"swing",(()=>{if(r)return;let t=i.I.getInstance().getFixedElementsTotalHeight();t!==a&&o.stop().animate({scrollTop:s.offset().top-t-.02*$(window).height()},250,"swing")}))}initNavigations(){let t;$(this._selectorNavContainer).each(((e,n)=>{t=$(n),t.html(""),t.append(this.createNavigationElement(this.getNavigationItems(t.closest(this.selectorTabContainer)))),t.parent().addClass(r.classInitialized)})),$(document).trigger(s.t.navigationsInitialized)}getNavigationItems(t){let e,n=[];return n[t.attr("id")]=window.wpcc.top,t.find(this.selectorNavigationRow).each(((t,s)=>{e=$(s),n[e.attr("data-id")]=e.text()})),n}createNavigationElement(t){let e=$("<ul/>");for(let n in t)t.hasOwnProperty(n)&&e.append($("<li/>").append($("<a/>").attr("data-id",n).attr("role","button").html(t[n])));return e}}r.instance=null,r.classInitialized="initialized"},766:(t,e,n)=>{"use strict";n.d(e,{I:()=>r});var s=n(877),i=n(778);class r{constructor(){this.sortableSelector=".inputs",this.isSortableAvailable()&&this.prepareSortables()}static getInstance(){return i.u.getInstance().get("SortableHandler",(()=>new r))}initSortablesInContainer(t){this.initSortableForMultipleInputElements(t)}initSortablesInElement(t){null!==t&&t.length&&this.isSortableAvailable()&&t.find(this.sortableSelector).sortable(this.getSortableConfigForMultipleInputs())}prepareSortables(){$(".meta-box-sortables").sortable("option","cancel",".not-sortable .hndle, :input, button").sortable("refresh"),this.initSortableForMultipleInputElements()}initSortableForMultipleInputElements(t=null){if(!this.isSortableAvailable())return;let e=this.sortableSelector;null!==t&&t.length&&(e=t+" "+e),$(e).sortable(this.getSortableConfigForMultipleInputs())}getSortableConfigForMultipleInputs(){return{placeholder:"sortable-placeholder",handle:".wcc-sort",items:" > .input-group",axis:"y",cursor:"move",start:(t,e)=>{e.placeholder.height(e.helper.outerHeight())},update:(t,e)=>{s.G.getInstance().resetInputGroupKeys(e.item.closest(".inputs"))}}}isSortableAvailable(){return void 0!==window.jQuery.ui&&"function"==typeof $.fn.sortable}}},103:(t,e,n)=>{"use strict";n.d(e,{I:()=>l});var s=n(687),i=n(730),r=n(62),o=n(685),a=n(778);class l{constructor(){this.fixedElements=[],this.disabled=!1,this.$activeTabContainer=void 0,this.$activeTabFixables=void 0,this.docWidth=null,this.adminBarHeight=null,this.psv=o.$.getInstance(),this.getAdminBarHeightIfFixed(),this.initSettingsPageOptions(),i.c.maybeInitTinyMceEditors(this.getActiveTabContainer()),this.activatePreviouslyActiveTab(),$(window).on("hashchange",(t=>this.handleURLHash())),this.psv.$containerTabs.on("click","a",(t=>this.onClickTab(t))),$(document).on("scroll",(t=>this.handleElementFixing())),$(window).on("resize",(()=>this.resetState())),$(document).on("postbox-toggled postboxes-columnchange",(()=>this.resetState())),$(document).on(r.t.navigationsInitialized,(()=>this.invalidateActiveTabFixablesCache()))}static getInstance(){return a.u.getInstance().get("TabAndNavigationHandler",(()=>new l))}initSettingsPageOptions(){this.isFixTabs=i.c.getCheckboxValue($(this.psv.selectorCheckboxFixTabs)),this.isFixContentNavigation=i.c.getCheckboxValue($(this.psv.selectorCheckboxFixContentNavigation)),$(document).on("change",this.psv.selectorCheckboxFixTabs,(t=>{this.isFixTabs=i.c.getCheckboxValue($(t.target)),this.resetFixableElements()})),$(document).on("change",this.psv.selectorCheckboxFixContentNavigation,(t=>{this.isFixContentNavigation=i.c.getCheckboxValue($(t.target)),this.resetFixableElements()}))}resetState(){this.resetFixableElements(),this.resetPrevScrollPositionCacheOfTabs(),this.invalidateDocWidthCache(),this.invalidateAdminBarHeightCache(),this.invalidateActiveTabContainer(),this.invalidateActiveTabFixablesCache()}resetFixableElements(){let t;$(this.psv.selectorFixable).each(((e,n)=>{t=$(n),this.resetOffsetOfFixable(t),this.setElementUnfixed(t)})),this.psv.$containerMetaBox.css("padding-top","0"),this.handleElementFixing()}handleElementFixing(){if(this.disabled)return;if(!this.isFixTabs&&!this.isFixContentNavigation)return;if(this.getDocWidth()<=600)return;let t=this.getScrollTop()+this.getAdminBarHeightIfFixed(),e=0;if(this.isFixTabs&&(e=t+8,e>=this.getTopOffsetOfTargetFixable(this.psv.$containerTabs)?this.setElementFixed(this.psv.$containerTabs):this.setElementUnfixed(this.psv.$containerTabs)),this.isFixContentNavigation){let n,s,i=this.getActiveTabFixables();if(null===i||!i.length)return;let r=this.isFixTabs?this.psv.$containerTabs.height():0,o=(this.isFixTabs?e+r:t)-11;i.each(((t,e)=>{n=$(e),n.is(":visible")&&(s=this.getTopOffsetOfTargetFixable(n),o>=s?this.setElementFixed(n,!0):this.setElementUnfixed(n,!0))}))}}getTopOffsetOfTargetFixable(t){let e=t.data("offsetTop")||null;return null===e&&(t.data("offsetTop",t.offset().top),e=t.data("offsetTop")),e}resetOffsetOfFixable(t){t.removeData("offsetTop")}setElementFixed(t,e=!1){if(t.hasClass(this.psv.classFixed))return;if(-1!==this.fixedElements.indexOf(t))return;let n=null;if(this.fixedElements.length>0){let t=this.fixedElements[this.fixedElements.length-1];n=(parseFloat(t.css("top"))||0)+t.outerHeight()}else n=this.getAdminBarHeightIfFixed();this.fixedElements.push(t);let s=this.psv.$containerMetaBox,i=s.width(),r=(parseFloat(s.css("padding-top"))||0)+t.outerHeight();e&&(r+=12),s.css("padding-top",r+"px"),t.data("height",t.outerHeight()).css("width",i+"px").addClass(this.psv.classFixed).css("top",n)}getAdminBarHeightIfFixed(){return null===this.adminBarHeight&&(this.adminBarHeight="fixed"===this.psv.$adminBar.css("position").toLocaleLowerCase()?this.psv.$adminBar.outerHeight():0),this.adminBarHeight}invalidateAdminBarHeightCache(){this.adminBarHeight=null}getDocWidth(){return null===this.docWidth&&(this.docWidth=$(document).width()),this.docWidth}invalidateDocWidthCache(){this.docWidth=null}setElementUnfixed(t,e=!1){if(!t.hasClass(this.psv.classFixed))return;let n=-1;for(let e=0;e<this.fixedElements.length;e++)if(this.fixedElements[e].get(0)==t.get(0)){n=e;break}if(-1===n)return;this.fixedElements.splice(n,1);let s=this.psv.$containerMetaBox,i=Math.max(0,(parseFloat(s.css("padding-top"))||0)-t.data("height"));e&&(i-=12),s.css("padding-top",Math.max(0,i)+"px"),t.removeClass(this.psv.classFixed).css("width","").css("top","").removeData("height")}getFixedElementsTotalHeight(){return this.fixedElements.reduce(((t,e)=>t+e.outerHeight()),0)}activatePreviouslyActiveTab(){if(null!==this.getUrlHash())return void this.handleURLHash();let t=$(this.psv.selectorInputURLHash);if(!t.length||!t.first().val())return;let e=t.first().val().split("|");if(e.length<2||""===e[0])return void this.handleURLHash();let n=e[e.length-1];e.splice(e.length-1,1),history.replaceState(void 0,void 0,e.join("|")),this.handleURLHash(),document.documentElement.scrollTop=n}setTabError(t,e){let n=t.closest(".tab").attr("id"),s=this.psv.$containerTabs.find("[data-tab='#"+n+"']");e?s.addClass(this.psv.clsHasError):s.removeClass(this.psv.clsHasError)}removeErrorsFromAllTabs(){this.psv.$containerTabs.find(".nav-tab").each(((t,e)=>{$(e).removeClass(this.psv.clsHasError)}))}onClickTab(t){t.preventDefault(),t.stopImmediatePropagation(),this.activateTab($(t.target).data("tab"))}handleURLHash(){let t=this.getUrlHash();if(null===t)return;let e=t.split("|")[0];this.activateTab(e.replace("#_","#"))}getUrlHash(){let t=window.location.hash||null;return null!==t&&0===t.indexOf("#_")?t:null}isTabActive(t){return $(`[data-tab="#${t}"].nav-tab-active`).length>0}activateTabWithKey(t){this.activateTab("#"+t)}activateTab(t){this.resetFixableElements();let e=this.psv.$containerTabs.find('[data-tab="'+t+'"]');if(!e.length||e.hasClass("hidden")||e.hasClass("nav-tab-active"))return;let n=Math.floor(this.getTopOffsetOfTargetFixable(this.psv.$containerTabs)||0);this.getActiveTab().data("scrolltop",this.getScrollTop()>n?this.getScrollTop():null),this.psv.$containerMetaBox.find("> .tab").addClass("hidden"),this.psv.$containerTabs.find("a").removeClass("nav-tab-active");let s=e.data("tab");$(s).removeClass("hidden"),e.addClass("nav-tab-active"),this.onActiveTabChanged(s.replace(/^#/,""));let r=window.location.hash.split("|");r[0]=s.replace("#","#_"),history.replaceState(void 0,void 0,r.join("|")),i.c.maybeInitTinyMceEditors(this.getActiveTabContainer()),this.resetFixableElements();let o=e.data("scrolltop")||null,a=this.getScrollTop()+this.getAdminBarHeightIfFixed(),l=this.getAdminBarHeightIfFixed();null===o&&(o=n<a?n-l:null),null!==o&&a>=n&&$(document).scrollTop(o)}onActiveTabChanged(t){this.invalidateActiveTabContainer(),this.invalidateActiveTabFixablesCache(),$(document).trigger(r.t.tabActivated,t)}resetPrevScrollPositionCacheOfTabs(){this.getAllTabs().removeData("scrolltop")}getActiveTabFixables(){return void 0!==this.$activeTabFixables||(this.$activeTabFixables=this.getActiveTabContainer().find(this.psv.selectorFixable+"."+s.S.classInitialized)||null),this.$activeTabFixables}invalidateActiveTabFixablesCache(){this.$activeTabFixables=void 0}getActiveTabContainer(){if(void 0!==this.$activeTabContainer)return this.$activeTabContainer;let t=this.getActiveTab();if(null===t)return this.$activeTabContainer=null,this.$activeTabContainer;let e=t.data("tab"),n=$(e).first()||null;return this.$activeTabContainer=null!==n&&n.length?n:null,this.$activeTabContainer}invalidateActiveTabContainer(){this.$activeTabContainer=void 0}getActiveTab(){let t=this.psv.$containerTabs.find(".nav-tab-active").first()||null;return null!==t&&t.length?t:null}getAllTabs(){return this.psv.$containerTabs.find(".nav-tab")}getScrollTop(){return(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0)}disableFixing(t){return this.disabled=t,this.disabled&&this.resetState(),this}getElementPath(t){if(null===t||!t.length)return null;const e=t.closest("tr");if(!e.length)return null;const n=[],s=e.find("> td:first-child label");n.push(s.length?s.text():null);let i,r=e,o=!1;do{if(r=r.prev(),i=r.data("id")||null,null!==i&&null!==i.match(/^section-/)){o=!0;break}}while(!o&&r.length);if(o){const t=r.find(`.${this.psv.clsSectionTitle}`).first();n.push(t.length?t.text():null)}const a=e.closest(`.${this.psv.clsTab}`).first();if(a.length){const t=a.attr("id")||null;if(null!==t){const e=a.parent().find(`a[data-tab="#${t}"]`);n.push(e.length?e.text():null)}}const l=n.reverse().filter((t=>null!==t&&0!==t.length)).join(" > ");return l.length?l:null}}},730:(t,e,n)=>{"use strict";n.d(e,{c:()=>i});var s=n(784);class i{static getMatchAllRegEx(t){return this.matchAllRegExes.has(t)||this.matchAllRegExes.set(t,new RegExp(this.escapeRegExp(t),"g")),this.matchAllRegExes.get(t)}static escapeRegExp(t){return(t=t.toString())&&this.reHasRegExpChar.test(t)?t.replace(this.reRegExpChar,"\\$&"):t}static startsWith(t,e){return 0===t.lastIndexOf(e,0)}static escapeHtml(t){return void 0===t||"undefined"===t||null===t?"":t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}static flashTooltip(t,e){let n=t.attr("data-original-title");t.attr("data-original-title",e),s.u.for(t).fixTitle().show().apply(),t.attr("data-original-title",n),s.u.for(t).fixTitle().apply()}static getCheckboxValue(t){return!(null===(t=t||null)||!t.length||!t[0].checked)}static maybeInitTinyMceEditors(t){null===(t=t||null)||t.hasClass("editors-initialized")||(t.find(".wp-editor-container").each(((t,e)=>{let n=$(e),s=n.find("textarea").first()||null;if(null===s||!s.length||s.hasClass("initialized"))return;let i=s.height();n.find(".mce-container > iframe").css("height",i+"px"),s.addClass("initialized")})),t.addClass("editors-initialized"))}static isElementInViewport(t){if(null===(t||null)||!t.length)return!1;const e=t.offset().top,n=e+t.outerHeight(),s=$(window).scrollTop(),i=s+$(window).height();return n>s&&e<i}static trans(t){return window.wpcc[t]||""}static toggleClass(t,e){t.hasClass(e)?t.removeClass(e):t.addClass(e)}static toggleClassConditionally(t,e,n){n?t.addClass(e):t.removeClass(e)}static getErrorsAsHtml(t){const e=t.map((t=>`<li>${t}</li>`)).join("\n");return`\n            <div class="validation-errors animated fadeIn">\n                <span class="error-text">${t.length>1?window.wpcc.fix_these_errors:window.wpcc.fix_this_error}</span>\n                <div class="error-list">\n                    <ul>${e}</ul>\n                </div>\n            </div>`}static removeErrorsInElement(t){t.find(".validation-errors").remove()}static scrollElementIntoView(t,e,n,s=null){const i=t.height(),r=e.offset().top,o=n.offset().top,a=Math.max(1,o-r-.2*i);t.animate({scrollTop:a},"slow",(()=>{null!==s&&s()}))}static isInt(t){if(isNaN(t))return!1;let e=parseFloat(t);return(0|e)===e}static hasDataType(t,e){if(-1!==e.indexOf(this.T_ANY))return!0;Array.isArray(t)||(t=[t]);for(const n of t)if(-1===e.indexOf(n))return!1;return!0}static containsDataType(t,e){if(-1!==e.indexOf(this.T_ANY))return!0;Array.isArray(t)||(t=[t]);for(const n of t)if(-1!==e.indexOf(n))return!0;return!1}}i.reRegExpChar=/[\\^$.*+?()[\]{}|]/g,i.reHasRegExpChar=RegExp(i.reRegExpChar.source),i.matchAllRegExes=new Map,i.T_ANY=-1},778:(t,e,n)=>{"use strict";n.d(e,{u:()=>s});class s{constructor(){this.factory=new Map,"function"!=typeof window.$&&(window.$=jQuery)}static getInstance(){return null===(window.WPCCrawler||null)&&(window.WPCCrawler=new s),window.WPCCrawler}get(t,e){return this.factoryHas(t)||this.addToFactory(t,e()),this.getFromFactory(t)}factoryHas(t){return this.factory.has(t)}addToFactory(t,e){return this.factory.set(t,e),this}getFromFactory(t){return this.factory.has(t)?this.factory.get(t):null}}},280:(t,e,n)=>{"use strict";var s;n.d(e,{E:()=>s}),function(t){t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left"}(s||(s={}))},140:(t,e,n)=>{"use strict";var s;n.d(e,{k:()=>s}),function(t){t.WARN="wpcc-warn",t.INFO="wpcc-info",t.ERROR="wpcc-error",t.SUCCESS="wpcc-success"}(s||(s={}))},955:(t,e,n)=>{"use strict";var s;n.d(e,{i:()=>s}),function(t){t.SELECTOR="selector",t.ATTRIBUTE="attr",t.ATTRIBUTE_1="attr1",t.ATTRIBUTE_2="attr2",t.FIND="find",t.REPLACE="replace",t.REGEX="regex",t.URL="url",t.CATEGORY_ID="cat_id",t.TITLE="title",t.CONTENT="content",t.SHORT_CODE="short_code",t.SINGLE="single",t.MULTIPLE="multiple",t.APPEND="append",t.KEY="key",t.VALUE="value",t.META_KEY="meta_key",t.TAXONOMY="taxonomy",t.DESCRIPTION="description",t.DOMAIN="domain",t.AS_TAXONOMY="as_taxonomy",t.ATTR_NAME="attr_name",t.OPTIONS_BOX_FIND_REPLACE="find_replace",t.OPTIONS_BOX_TREAT_AS_JSON="treat_as_json",t.OPTIONS_BOX_DECIMAL_SEPARATOR_AFTER="decimal_separator_after",t.OPTIONS_BOX_USE_THOUSANDS_SEPARATOR="use_thousands_separator",t.OPTIONS_BOX_REMOVE_IF_NOT_NUMERIC="remove_if_not_numeric",t.OPTIONS_BOX_PRECISION="precision",t.OPTIONS_BOX_FORMULAS="formulas",t.OPTIONS_BOX_FORMULAS_FORMULA="formula",t.OPTIONS_BOX_REMOVE_IF_EMPTY="remove_if_empty",t.OPTIONS_BOX_TEMPLATES="templates",t.OPTIONS_BOX_TEMPLATES_TEMPLATE="template",t.OPTIONS_BOX_NOTE="note",t.OPTIONS_BOX_IMPORT_SETTINGS="import_settings",t.OPTIONS_BOX_FILE_FIND_REPLACE="file_find_replace",t.OPTIONS_BOX_FILE_MOVE="move",t.OPTIONS_BOX_FILE_COPY="copy",t.OPTIONS_BOX_FILE_MOVE_COPY_PATH="path",t.OPTIONS_BOX_FILE_NAME_TEMPLATES="templates_file_name",t.OPTIONS_BOX_FILE_MEDIA_TITLE_TEMPLATES="templates_media_title",t.OPTIONS_BOX_FILE_MEDIA_DESC_TEMPLATES="templates_media_description",t.OPTIONS_BOX_FILE_MEDIA_CAPTION_TEMPLATES="templates_media_caption",t.OPTIONS_BOX_FILE_MEDIA_ALT_TEXT_TEMPLATES="templates_media_alt_text",t.POST_URL="postUrl",t.IMAGE_URL="imageUrl",t.ITEM_ID="item_id"}(s||(s={}))},118:(t,e,n)=>{"use strict";var s;n.d(e,{n:()=>s}),function(t){t.ACTIVE="_active",t.ACTIVE_RECRAWLING="_active_recrawling",t.ACTIVE_POST_DELETING="_active_post_deleting",t.ACTIVE_TRANSLATION="_active_translation",t.TRANSLATABLE_FIELDS="_translatable_fields",t.ACTIVE_SPINNING="_active_spinning",t.SPINNABLE_FIELDS="_spinnable_fields",t.MAIN_PAGE_URL="_main_page_url",t.DUPLICATE_CHECK_TYPES="_duplicate_check_types",t.DO_NOT_USE_GENERAL_SETTINGS="_do_not_use_general_settings",t.COOKIES="_cookies",t.REQUEST_HEADERS="_request_headers",t.CACHE_TEST_URL_RESPONSES="_cache_test_url_responses",t.FIX_TABS="_fix_tabs",t.FIX_CONTENT_NAVIGATION="_fix_content_navigation",t.CATEGORY_ADD_CATEGORY_URLS_WITH_SELECTOR="_category_add_category_urls_with_selector",t.CATEGORY_LIST_PAGE_URL="_category_list_page_url",t.CATEGORY_LIST_URL_SELECTORS="_category_list_url_selectors",t.CATEGORY_POST_LINK_SELECTORS="_category_post_link_selectors",t.CATEGORY_COLLECT_IN_REVERSE_ORDER="_category_collect_in_reverse_order",t.CATEGORY_UNNECESSARY_ELEMENT_SELECTORS="_category_unnecessary_element_selectors",t.CATEGORY_POST_SAVE_THUMBNAILS="_category_post_save_thumbnails",t.CATEGORY_POST_THUMBNAIL_SELECTORS="_category_post_thumbnail_selectors",t.TEST_FIND_REPLACE_THUMBNAIL_URL_CAT="_test_find_replace_thumbnail_url_cat",t.CATEGORY_FIND_REPLACE_THUMBNAIL_URL="_category_find_replace_thumbnail_url",t.CATEGORY_POST_IS_LINK_BEFORE_THUMBNAIL="_category_post_is_link_before_thumbnail",t.CATEGORY_NEXT_PAGE_SELECTORS="_category_next_page_selectors",t.CATEGORY_MAP="_category_map",t.TEST_FIND_REPLACE_FIRST_LOAD_CAT="_test_find_replace_first_load_cat",t.CATEGORY_FIND_REPLACE_RAW_HTML="_category_find_replace_raw_html",t.CATEGORY_FIND_REPLACE_FIRST_LOAD="_category_find_replace_first_load",t.CATEGORY_FIND_REPLACE_ELEMENT_ATTRIBUTES="_category_find_replace_element_attributes",t.CATEGORY_EXCHANGE_ELEMENT_ATTRIBUTES="_category_exchange_element_attributes",t.CATEGORY_REMOVE_ELEMENT_ATTRIBUTES="_category_remove_element_attributes",t.CATEGORY_FIND_REPLACE_ELEMENT_HTML="_category_find_replace_element_html",t.TEST_URL_CATEGORY="_test_url_category",t.CATEGORY_NOTIFY_EMPTY_VALUE_SELECTORS="_category_notify_empty_value_selectors",t.CATEGORY_REQUEST_FILTERS="_category_request_filters",t.CATEGORY_PAGE_FILTERS="_category_page_filters",t.CATEGORY_DATA_FILTERS="_category_data_filters",t.TEST_URL_POST="_test_url_post",t.POST_TITLE_SELECTORS="_post_title_selectors",t.POST_EXCERPT_SELECTORS="_post_excerpt_selectors",t.POST_CONTENT_SELECTORS="_post_content_selectors",t.POST_CATEGORY_NAME_SELECTORS="_post_category_name_selectors",t.POST_CATEGORY_ADD_ALL_FOUND_CATEGORY_NAMES="_post_category_add_all_found_category_names",t.POST_CATEGORY_NAME_SEPARATORS="_post_category_name_separators",t.POST_CATEGORY_ADD_HIERARCHICAL="_post_category_add_hierarchical",t.POST_CATEGORY_DO_NOT_ADD_CATEGORY_IN_MAP="_post_category_do_not_add_category_in_map",t.POST_DATE_SELECTORS="_post_date_selectors",t.TEST_FIND_REPLACE_DATE="_test_find_replace_date",t.POST_FIND_REPLACE_DATE="_post_find_replace_date",t.POST_DATE_ADD_MINUTES="_post_date_add_minutes",t.POST_CUSTOM_CONTENT_SHORTCODE_SELECTORS="_post_custom_content_shortcode_selectors",t.POST_FIND_REPLACE_CUSTOM_SHORT_CODE="_post_find_replace_custom_short_code",t.POST_TAG_SELECTORS="_post_tag_selectors",t.POST_SLUG_SELECTORS="_post_slug_selectors",t.POST_PAGINATE="_post_paginate",t.POST_NEXT_PAGE_URL_SELECTORS="_post_next_page_url_selectors",t.POST_NEXT_PAGE_ALL_PAGES_URL_SELECTORS="_post_next_page_all_pages_url_selectors",t.POST_SAVE_AS_SINGLE_PAGE="_post_save_as_single_page",t.POST_IS_LIST_TYPE="_post_is_list_type",t.POST_LIST_ITEM_STARTS_AFTER_SELECTORS="_post_list_item_starts_after_selectors",t.POST_LIST_TITLE_SELECTORS="_post_list_title_selectors",t.POST_LIST_CONTENT_SELECTORS="_post_list_content_selectors",t.POST_LIST_ITEM_NUMBER_SELECTORS="_post_list_item_number_selectors",t.POST_LIST_ITEM_AUTO_NUMBER="_post_list_item_auto_number",t.POST_LIST_INSERT_REVERSED="_post_list_insert_reversed",t.POST_META_KEYWORDS="_post_meta_keywords",t.POST_META_KEYWORDS_AS_TAGS="_post_meta_keywords_as_tags",t.POST_META_DESCRIPTION="_post_meta_description",t.POST_SAVE_ALL_IMAGES_IN_CONTENT="_post_save_all_images_in_content",t.POST_SAVE_IMAGES_AS_MEDIA="_post_save_images_as_media",t.POST_SAVE_IMAGES_AS_GALLERY="_post_save_images_as_gallery",t.POST_GALLERY_IMAGE_SELECTORS="_post_gallery_image_selectors",t.POST_SAVE_IMAGES_AS_WOOCOMMERCE_GALLERY="_post_save_images_as_woocommerce_gallery",t.POST_IMAGE_SELECTORS="_post_image_selectors",t.TEST_FIND_REPLACE_IMAGE_URLS="_test_find_replace_image_urls",t.POST_FIND_REPLACE_IMAGE_URLS="_post_find_replace_image_urls",t.POST_SAVE_THUMBNAILS_IF_NOT_EXIST="_post_save_thumbnails_if_not_exist",t.POST_THUMBNAIL_SELECTORS="_post_thumbnail_selectors",t.TEST_FIND_REPLACE_THUMBNAIL_URL="_test_find_replace_thumbnail_url",t.POST_FIND_REPLACE_THUMBNAIL_URL="_post_find_replace_thumbnail_url",t.POST_CUSTOM_META_SELECTORS="_post_custom_meta_selectors",t.POST_CUSTOM_META="_post_custom_meta",t.POST_FIND_REPLACE_CUSTOM_META="_post_find_replace_custom_meta",t.POST_CUSTOM_TAXONOMY_SELECTORS="_post_custom_taxonomy_selectors",t.POST_CUSTOM_TAXONOMY="_post_custom_taxonomy",t.POST_NOTIFY_EMPTY_VALUE_SELECTORS="_post_notify_empty_value_selectors",t.POST_TRIGGER_SAVE_POST_HOOK="_post_trigger_save_post_hook",t.TEST_FIND_REPLACE_FIRST_LOAD="_test_find_replace_first_load",t.POST_FIND_REPLACE_RAW_HTML="_post_find_replace_raw_html",t.POST_FIND_REPLACE_FIRST_LOAD="_post_find_replace_first_load",t.POST_FIND_REPLACE_ELEMENT_ATTRIBUTES="_post_find_replace_element_attributes",t.POST_EXCHANGE_ELEMENT_ATTRIBUTES="_post_exchange_element_attributes",t.POST_REMOVE_ELEMENT_ATTRIBUTES="_post_remove_element_attributes",t.POST_FIND_REPLACE_ELEMENT_HTML="_post_find_replace_element_html",t.POST_UNNECESSARY_ELEMENT_SELECTORS="_post_unnecessary_element_selectors",t.POST_REQUEST_FILTERS="_post_request_filters",t.POST_PAGE_FILTERS="_post_page_filters",t.POST_TEMPLATE_MAIN="_post_template_main",t.POST_TEMPLATE_TITLE="_post_template_title",t.POST_TEMPLATE_EXCERPT="_post_template_excerpt",t.POST_TEMPLATE_LIST_ITEM="_post_template_list_item",t.POST_TEMPLATE_GALLERY_ITEM="_post_template_gallery_item",t.POST_REMOVE_LINKS_FROM_SHORT_CODES="_post_remove_links_from_short_codes",t.POST_CONVERT_IFRAMES_TO_SHORT_CODE="_post_convert_iframes_to_short_code",t.POST_CONVERT_SCRIPTS_TO_SHORT_CODE="_post_convert_scripts_to_short_code",t.POST_REMOVE_EMPTY_HTML_TAGS="_post_remove_empty_html_tags",t.POST_REMOVE_SCRIPTS="_post_remove_scripts",t.TEST_FIND_REPLACE="_test_find_replace",t.POST_FIND_REPLACE_TEMPLATE="_post_find_replace_template",t.POST_FIND_REPLACE_TITLE="_post_find_replace_title",t.POST_FIND_REPLACE_EXCERPT="_post_find_replace_excerpt",t.POST_FIND_REPLACE_TAGS="_post_find_replace_tags",t.POST_FIND_REPLACE_META_KEYWORDS="_post_find_replace_meta_keywords",t.POST_FIND_REPLACE_META_DESCRIPTION="_post_find_replace_meta_description",t.POST_FIND_REPLACE_CUSTOM_SHORTCODES="_post_find_replace_custom_shortcodes",t.TEMPLATE_UNNECESSARY_ELEMENT_SELECTORS="_template_unnecessary_element_selectors",t.POST_DATA_FILTERS="_post_data_filters",t.NOTES="_notes",t.NOTES_SIMPLE="_notes_simple",t.POST_IMPORT_SETTINGS="_post_import_settings",t.POST_EXPORT_SETTINGS="_post_export_settings",t.DEV_TOOLS_STATE="_dev_tools_state",t.DEV_TOOLS_URL="_dt_toolbar_url",t.DEV_TOOLS_CSS_SELECTOR="_dt_toolbar_css_selector",t.DEV_TOOLS_TARGET_HTML_TAG="_dt_target_html_tag",t.DEV_TOOLS_SELECTION_BEHAVIOR="selection_behavior",t.DEV_TOOLS_TEST_BUTTON_BEHAVIOR="test_button_behavior",t.DEV_TOOLS_APPLY_MANIPULATION_OPTIONS="apply_manipulation_options",t.DEV_TOOLS_USE_IMMEDIATELY="use_immediately",t.DEV_TOOLS_REMOVE_SCRIPTS="remove_scripts",t.DEV_TOOLS_REMOVE_STYLES="remove_styles",t.OPTIONS_BOX="_options_box",t.OPTIONS_BOX_FILE_FIND_REPLACE="_options_box[file_find_replace]",t.OPTIONS_BOX_MOVE="_options_box[move]",t.OPTIONS_BOX_COPY="_options_box[copy]",t.OPTIONS_BOX_TEMPLATES_FILE_NAME="_options_box[templates_file_name]",t.OPTIONS_BOX_TEMPLATES_MEDIA_TITLE="_options_box[templates_media_title]",t.OPTIONS_BOX_TEMPLATES_MEDIA_DESC="_options_box[templates_media_description]",t.OPTIONS_BOX_TEMPLATES_MEDIA_CAPTION="_options_box[templates_media_caption]",t.OPTIONS_BOX_TEMPLATES_MEDIA_ALT_TEXT="_options_box[templates_media_alt_text]",t.OPTIONS_BOX_DECIMAL_SEPARATOR_AFTER="_options_box[decimal_separator_after]",t.OPTIONS_BOX_USE_THOUSANDS_SEPARATOR="_options_box[use_thousands_separator]",t.OPTIONS_BOX_REMOVE_IF_NOT_NUMERIC="_options_box[remove_if_not_numeric]",t.OPTIONS_BOX_PRECISION="_options_box[precision]",t.OPTIONS_BOX_FORMULAS="_options_box[formulas]",t.OPTIONS_BOX_FIND_REPLACE="_options_box[find_replace]",t.OPTIONS_BOX_TREAT_AS_JSON="_options_box[treat_as_json]",t.OPTIONS_BOX_IMPORT_SETTINGS="_options_box_import_settings",t.OPTIONS_BOX_EXPORT_SETTINGS="_options_box_export_settings",t.OPTIONS_BOX_NOTE="_options_box[note]",t.OPTIONS_BOX_REMOVE_IF_EMPTY="_options_box[remove_if_empty]",t.OPTIONS_BOX_TEMPLATES="_options_box[templates]",t.CRON_LAST_CHECKED_AT="_cron_last_checked_at",t.CRON_LAST_CHECKED_CATEGORY_URL="_cron_last_checked_category_url",t.CRON_LAST_CHECKED_CATEGORY_NEXT_PAGE_URL="_cron_last_checked_category_next_page_url",t.CRON_NO_NEW_URL_INSERTED_COUNT="_cron_no_new_url_inserted_count",t.CRON_CRAWLED_PAGE_COUNT="_cron_crawled_page_count",t.CRON_LAST_CRAWLED_AT="_cron_last_crawled_at",t.CRON_LAST_CRAWLED_URL_ID="_cron_last_crawled_url_id",t.CRON_POST_NEXT_PAGE_URL="_cron_post_next_page_url",t.CRON_POST_NEXT_PAGE_URLS="_cron_post_next_page_urls",t.CRON_POST_DRAFT_ID="_cron_post_draft_id",t.CRON_RECRAWL_LAST_CRAWLED_AT="_cron_recrawl_last_crawled_at",t.CRON_RECRAWL_LAST_CRAWLED_URL_ID="_cron_recrawl_last_crawled_url_id",t.CRON_RECRAWL_POST_NEXT_PAGE_URL="_cron_recrawl_post_next_page_url",t.CRON_RECRAWL_POST_NEXT_PAGE_URLS="_cron_recrawl_post_next_page_urls",t.CRON_RECRAWL_POST_DRAFT_ID="_cron_recrawl_post_draft_id",t.CRON_LAST_DELETED_AT="_cron_last_deleted_at",t.WPCC_IS_SCHEDULING_ACTIVE="_wpcc_is_scheduling_active",t.WPCC_NO_NEW_URL_PAGE_TRIAL_LIMIT="_wpcc_no_new_url_page_trial_limit",t.WPCC_MAX_PAGE_COUNT_PER_CATEGORY="_wpcc_max_page_count_per_category",t.WPCC_INTERVAL_URL_COLLECTION="_wpcc_interval_url_collection",t.WPCC_INTERVAL_POST_CRAWL="_wpcc_interval_post_crawl",t.WPCC_IS_RECRAWLING_ACTIVE="_wpcc_is_recrawling_active",t.WPCC_INTERVAL_POST_RECRAWL="_wpcc_interval_post_recrawl",t.WPCC_RUN_COUNT_URL_COLLECTION="_wpcc_run_count_url_collection",t.WPCC_RUN_COUNT_POST_CRAWL="_wpcc_run_count_post_crawl",t.WPCC_RUN_COUNT_POST_RECRAWL="_wpcc_run_count_post_recrawl",t.WPCC_MAX_RECRAWL_COUNT="_wpcc_max_recrawl_count",t.WPCC_MIN_TIME_BETWEEN_TWO_RECRAWLS_IN_MIN="_wpcc_min_time_between_two_recrawls_in_min",t.WPCC_RECRAWL_POSTS_NEWER_THAN_IN_MIN="_wpcc_recrawl_posts_newer_than_in_min",t.WPCC_IS_DELETING_POSTS_ACTIVE="_wpcc_is_deleting_posts_active",t.WPCC_INTERVAL_POST_DELETE="_wpcc_interval_post_delete",t.WPCC_MAX_POST_COUNT_PER_POST_DELETE_EVENT="_wpcc_max_post_count_per_post_delete_event",t.WPCC_DELETE_POSTS_OLDER_THAN_IN_MIN="_wpcc_delete_posts_older_than_in_min",t.WPCC_IS_DELETE_POST_ATTACHMENTS="_wpcc_is_delete_post_attachments",t.WPCC_ALLOW_COMMENTS="_wpcc_allow_comments",t.WPCC_POST_STATUS="_wpcc_post_status",t.WPCC_POST_TYPE="_wpcc_post_type",t.WPCC_POST_CATEGORY_TAXONOMIES="_wpcc_post_category_taxonomies",t.WPCC_POST_AUTHOR="_wpcc_post_author",t.WPCC_POST_TAG_LIMIT="_wpcc_post_tag_limit",t.WPCC_CHANGE_PASSWORD="_wpcc_change_password",t.WPCC_POST_PASSWORD="_wpcc_post_password",t.WPCC_POST_SET_SRCSET="_wpcc_post_set_srcset",t.WPCC_PROTECTED_ATTACHMENTS="_wpcc_protected_attachments",t.WPCC_ALLOWED_IFRAME_SHORT_CODE_DOMAINS="_wpcc_allowed_iframe_short_code_domains",t.WPCC_ALLOWED_SCRIPT_SHORT_CODE_DOMAINS="_wpcc_allowed_script_short_code_domains",t.WPCC_IS_TRANSLATION_ACTIVE="_wpcc_is_translation_active",t.WPCC_SELECTED_TRANSLATION_SERVICE="_wpcc_selected_translation_service",t.WPCC_TRANSLATION_GOOGLE_TRANSLATE_FROM="_wpcc_translation_google_translate_from",t.WPCC_TRANSLATION_GOOGLE_TRANSLATE_TO="_wpcc_translation_google_translate_to",t.WPCC_TRANSLATION_GOOGLE_TRANSLATE_PROJECT_ID="_wpcc_translation_google_translate_project_id",t.WPCC_TRANSLATION_GOOGLE_TRANSLATE_API_KEY="_wpcc_translation_google_translate_api_key",t.WPCC_TRANSLATION_GOOGLE_TRANSLATE_TEST="_wpcc_translation_google_translate_test",t.WPCC_TRANSLATION_MICROSOFT_TRANSLATOR_TEXT_FROM="_wpcc_translation_microsoft_translator_text_from",t.WPCC_TRANSLATION_MICROSOFT_TRANSLATOR_TEXT_TO="_wpcc_translation_microsoft_translator_text_to",t.WPCC_TRANSLATION_MICROSOFT_TRANSLATOR_TEXT_CLIENT_SECRET="_wpcc_translation_microsoft_translator_text_client_secret",t.WPCC_TRANSLATION_MICROSOFT_TRANSLATOR_TEXT_TEST="_wpcc_translation_microsoft_translator_text_test",t.WPCC_TRANSLATION_YANDEX_TRANSLATE_FROM="_wpcc_translation_yandex_translate_from",t.WPCC_TRANSLATION_YANDEX_TRANSLATE_TO="_wpcc_translation_yandex_translate_to",t.WPCC_TRANSLATION_YANDEX_TRANSLATE_API_KEY="_wpcc_translation_yandex_translate_api_key",t.WPCC_TRANSLATION_YANDEX_TRANSLATE_TEST="_wpcc_translation_yandex_translate_test",t.WPCC_TRANSLATION_AMAZON_TRANSLATE_FROM="_wpcc_translation_amazon_translate_from",t.WPCC_TRANSLATION_AMAZON_TRANSLATE_TO="_wpcc_translation_amazon_translate_to",t.WPCC_TRANSLATION_AMAZON_TRANSLATE_ACCESS_KEY="_wpcc_translation_amazon_translate_access_key",t.WPCC_TRANSLATION_AMAZON_TRANSLATE_SECRET="_wpcc_translation_amazon_translate_secret",t.WPCC_TRANSLATION_AMAZON_TRANSLATE_REGION="_wpcc_translation_amazon_translate_region",t.WPCC_TRANSLATION_AMAZON_TRANSLATE_TEST="_wpcc_translation_amazon_translate_test",t.WPCC_IS_SPINNING_ACTIVE="_wpcc_is_spinning_active",t.WPCC_SELECTED_SPINNING_SERVICE="_wpcc_selected_spinning_service",t.WPCC_SPINNING_SEND_IN_ONE_REQUEST="_wpcc_spinning_send_in_one_request",t.WPCC_SPINNING_PROTECTED_TERMS="_wpcc_spinning_protected_terms",t.WPCC_SPINNING_SPIN_REWRITER_EMAIL="_wpcc_spinning_spin_rewriter_email",t.WPCC_SPINNING_SPIN_REWRITER_API_KEY="_wpcc_spinning_spin_rewriter_api_key",t.WPCC_SPINNING_SPIN_REWRITER_CONFIDENCE_LEVEL="_wpcc_spinning_spin_rewriter_confidence_level",t.WPCC_SPINNING_SPIN_REWRITER_AUTO_PROTECTED_TERMS="_wpcc_spinning_spin_rewriter_auto_protected_terms",t.WPCC_SPINNING_SPIN_REWRITER_NESTED_SPINTAX="_wpcc_spinning_spin_rewriter_nested_spintax",t.WPCC_SPINNING_SPIN_REWRITER_AUTO_SENTENCES="_wpcc_spinning_spin_rewriter_auto_sentences",t.WPCC_SPINNING_SPIN_REWRITER_AUTO_PARAGRAPHS="_wpcc_spinning_spin_rewriter_auto_paragraphs",t.WPCC_SPINNING_SPIN_REWRITER_AUTO_NEW_PARAGRAPHS="_wpcc_spinning_spin_rewriter_auto_new_paragraphs",t.WPCC_SPINNING_SPIN_REWRITER_AUTO_SENTENCE_TREES="_wpcc_spinning_spin_rewriter_auto_sentence_trees",t.WPCC_SPINNING_SPIN_REWRITER_USE_ONLY_SYNONYMS="_wpcc_spinning_spin_rewriter_use_only_synonyms",t.WPCC_SPINNING_SPIN_REWRITER_REORDER_PARAGRAPHS="_wpcc_spinning_spin_rewriter_reorder_paragraphs",t.WPCC_SPINNING_SPIN_REWRITER_TEXT_WITH_SPINTAX="_wpcc_spinning_spin_rewriter_text_with_spintax",t.WPCC_SPINNING_SPIN_REWRITER_TEST="_wpcc_spinning_spin_rewriter_test",t.WPCC_SPINNING_TURKCE_SPIN_API_TOKEN="_wpcc_spinning_turkce_spin_api_token",t.WPCC_SPINNING_TURKCE_SPIN_TEST="_wpcc_spinning_turkce_spin_test",t.WPCC_META_KEYWORDS_META_KEY="_wpcc_meta_keywords_meta_key",t.WPCC_META_DESCRIPTION_META_KEY="_wpcc_meta_description_meta_key",t.WPCC_TEST_FIND_REPLACE="_wpcc_test_find_replace",t.WPCC_FIND_REPLACE="_wpcc_find_replace",t.WPCC_IS_NOTIFICATION_ACTIVE="_wpcc_is_notification_active",t.WPCC_NOTIFICATION_EMAIL_INTERVAL_FOR_SITE="_wpcc_notification_email_interval_for_site",t.WPCC_NOTIFICATION_EMAILS="_wpcc_notification_emails",t.WPCC_MAKE_SURE_ENCODING_UTF8="_wpcc_make_sure_encoding_utf8",t.WPCC_CONVERT_CHARSET_TO_UTF8="_wpcc_convert_charset_to_utf8",t.WPCC_HTTP_USER_AGENT="_wpcc_http_user_agent",t.WPCC_HTTP_ACCEPT="_wpcc_http_accept",t.WPCC_HTTP_ALLOW_COOKIES="_wpcc_http_allow_cookies",t.WPCC_DISABLE_SSL_VERIFICATION="_wpcc_disable_ssl_verification",t.WPCC_USE_PROXY="_wpcc_use_proxy",t.WPCC_CONNECTION_TIMEOUT="_wpcc_connection_timeout",t.WPCC_TEST_URL_PROXY="_wpcc_test_url_proxy",t.WPCC_PROXIES="_wpcc_proxies",t.WPCC_PROXY_TRY_LIMIT="_wpcc_proxy_try_limit",t.WPCC_PROXY_RANDOMIZE="_wpcc_proxy_randomize",t.WPCC_DISABLE_TOOLTIP="_wpcc_disable_tooltip",t.WPCC_REFRESH_DOCS_LABEL_INDEX="_wpcc_refresh_docs_label_index",t.WPCC_TOOLS_SITE_ID="_wpcc_tools_site_id",t.WPCC_TOOLS_CATEGORY_ID="_wpcc_tools_category_id",t.WPCC_TOOLS_POST_URLS="_post_urls",t.WPCC_TOOLS_POST_AND_FEATURED_IMAGE_URLS="_post_and_featured_image_urls",t.WPCC_TOOLS_CATEGORY_URLS="_category_urls",t.WPCC_TOOLS_MAX_POSTS_TO_BE_CRAWLED="_max_posts_to_be_crawled",t.WPCC_TOOLS_MAX_PARALLEL_CRAWLING_COUNT="_max_parallel_crawling_count",t.WPCC_TOOLS_MANUAL_CRAWLING_TOOL_CLEAR_AFTER_SUBMIT="_manual_crawling_tool_clear_after_submit",t.WPCC_TOOLS_RECRAWL_POST_ID="_wpcc_tools_recrawl_post_id",t.WPCC_TOOLS_CLEAR_URLS_SITE_ID="_wpcc_tools_clear_urls_site_id",t.WPCC_TOOLS_URL_TYPE="_wpcc_tools_url_type",t.WPCC_TOOLS_SAFETY_CHECK="_wpcc_tools_safety_check",t.WPCC_DASHBOARD_COUNT_LAST_CRAWLED_POSTS="_wpcc_dashboard_count_last_crawled_posts",t.WPCC_DASHBOARD_COUNT_LAST_URLS="_wpcc_dashboard_count_last_urls",t.WPCC_DASHBOARD_COUNT_LAST_RECRAWLED_POSTS="_wpcc_dashboard_count_last_recrawled_posts",t.WPCC_DASHBOARD_COUNT_LAST_DELETED_URLS="_wpcc_dashboard_count_last_deleted_urls"}(s||(s={}))},644:(t,e,n)=>{"use strict";var s;n.d(e,{R:()=>s}),function(t){t.SITE_SETTINGS_TAB_MAIN="tab-main",t.SITE_SETTINGS_TAB_CATEGORY="tab-category",t.SITE_SETTINGS_TAB_POST="tab-post",t.SITE_SETTINGS_TAB_TEMPLATES="tab-templates",t.SITE_SETTINGS_TAB_FILTERS="tab-filters",t.SITE_SETTINGS_TAB_NOTES="tab-notes",t.SITE_SETTINGS_TAB_GENERAL_SETTINGS="tab-general-settings",t.SITE_SETTINGS_TAB_IMPORT_EXPORT_SETTINGS="tab-import-export-settings",t.OPTIONS_BOX_TAB_FIND_REPLACE="tab-options-box-find-replace",t.OPTIONS_BOX_TAB_GENERAL="tab-options-box-general",t.OPTIONS_BOX_TAB_CALCULATIONS="tab-options-box-calculations",t.OPTIONS_BOX_TAB_TEMPLATES="tab-options-box-templates",t.OPTIONS_BOX_TAB_NOTES="tab-options-box-notes",t.OPTIONS_BOX_TAB_IMPORT_EXPORT="tab-options-box-import-export",t.OPTIONS_BOX_TAB_FILE_FIND_REPLACE="tab-options-box-file-find-replace",t.OPTIONS_BOX_TAB_FILE_TEMPLATES="tab-options-box-file-templates",t.OPTIONS_BOX_TAB_FILE_OPERATIONS="tab-options-box-file-operations",t.GENERAL_SETTINGS_TAB_SCHEDULING="tab-gs-scheduling",t.GENERAL_SETTINGS_TAB_POST="tab-gs-post",t.GENERAL_SETTINGS_TAB_TRANSLATION="tab-gs-translation",t.GENERAL_SETTINGS_TAB_SPINNING="tab-gs-spinning",t.GENERAL_SETTINGS_TAB_SEO="tab-gs-seo",t.GENERAL_SETTINGS_TAB_NOTIFICATIONS="tab-gs-notifications",t.GENERAL_SETTINGS_TAB_ADVANCED="tab-gs-advanced",t.TOOLS_TAB_MANUAL_CRAWLING="tab-manual-crawling",t.TOOLS_TAB_MANUAL_RECRAWLING="tab-manual-recrawling",t.TOOLS_TAB_URLS="tab-urls"}(s||(s={}))},136:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var s=n(955),i=n(877),r=n(784),o=n(685),a=n(305),l=n(140),c=n(730);class u{constructor(t){this._$container=t}showMediaViewer(){const t=window.wp||null;if(null===t||!(null==t?void 0:t.media))return;null===u.frame&&(u.frame=t.media({title:window.wpcc.select_an_image,button:{text:window.wpcc.use_this_image},multiple:!1}));const e=()=>{var t,n,s;const i=(null===(s=null===(n=null===(t=u.frame.state())||void 0===t?void 0:t.get("selection"))||void 0===n?void 0:n.first())||void 0===s?void 0:s.toJSON())||null;this.onAttachmentSelected(i);const r=this.getImageIdInput();r&&flashBackground(r),u.frame.off("select",e)};u.frame.on("select",e),u.frame.open()}reset(){this.onAttachmentSelected(null),this.setInitialized(!1)}setPreviewImage(t){var e,n,s;const i=this.getPreviewContainer(),o=this.getPreviewElement();if(i&&o){if(null===t)return i.removeClass(u.clsHasImage),i.removeAttr(u.attrAttachmentId),void o.removeAttr("style");i.addClass(u.clsHasImage),o.css({"background-image":`url(${null!==(s=null===(n=null===(e=t.sizes)||void 0===e?void 0:e.thumbnail)||void 0===n?void 0:n.url)&&void 0!==s?s:t.url})`}),i.attr(u.attrAttachmentId,t.id),this.setAnchor(t),r.u.initAllIn(i)}}setAnchor(t){var e,n,s,i,o,a,l,c,u,h,d,p,g;const _=this.getAnchor();_&&(null===t?_.removeAttr("target").attr("href","#"):_.attr("target","_blank").attr("href",t.editLink),null===t?(_.removeAttr(`data-${r.u.TOOLTIP_DATA_ATTR_NAME}`).removeAttr("data-placement").removeAttr("data-html").removeAttr("title"),null===(e=this.getTooltip())||void 0===e||e.destroy().apply()):(_.attr(`data-${r.u.TOOLTIP_DATA_ATTR_NAME}`,r.u.TOOLTIP_ATTRIBUTE_VALUE).attr("data-html","true").attr("data-placement","right").attr("title",`\n                    <img alt="" \n                         loading="lazy"\n                         src="${null!==(i=null===(s=null===(n=t.sizes)||void 0===n?void 0:n.thumbnail)||void 0===s?void 0:s.url)&&void 0!==i?i:t.url}"\n                         width="${null!==(c=null!==(l=null===(a=null===(o=null==t?void 0:t.sizes)||void 0===o?void 0:o.thumbnail)||void 0===a?void 0:a.width)&&void 0!==l?l:t.width)&&void 0!==c?c:""}"\n                         height="${null!==(p=null!==(d=null===(h=null===(u=null==t?void 0:t.sizes)||void 0===u?void 0:u.thumbnail)||void 0===h?void 0:h.height)&&void 0!==d?d:t.height)&&void 0!==p?p:""}"/>\n                `),null===(g=this.getTooltip())||void 0===g||g.fixTitle().apply()))}setInitialized(t){c.c.toggleClassConditionally(this.$container,u.clsInitialized,t)}onInputChanged(t){const e=t.val();if("string"!=typeof e||""===e)return void this.setPreviewImage(null);const n=this.getPreviewContainer();n&&(n.attr(u.attrAttachmentId)||null)===e||(this.setPreviewImage(null),null==n||n.addClass(u.clsLoading),a.d.getInstance().clearNotification(t),this.setInitialized(!1),u.loadImageData([e]).done((n=>{var s;if(this.setInitialized(!0),"object"!=typeof n)return;const i=null!==(s=n[e])&&void 0!==s?s:null;i?this.setPreviewImage(i):a.d.getInstance().notifyRegular(t,window.wpcc.image_with_this_id_does_not_exist,l.k.ERROR)})).always((()=>{null==n||n.removeClass(u.clsLoading)})))}onAttachmentSelected(t){var e;null===(e=this.getImageIdInput())||void 0===e||e.val((null==t?void 0:t.id)||""),this.setPreviewImage(t)}getTooltip(){const t=this.$container.find(r.u.TOOLTIP_EL_SELECTOR).first();return t.length?r.u.for(t):null}getImageIdInput(){const t=this.$container.find(u.selectorIdInput).first();return t.length?t:null}getAnchor(){const t=this.getPreviewContainer().find("a").first();return t.length?t:null}getPreviewElement(){var t;const e=null===(t=this.getPreviewContainer())||void 0===t?void 0:t.find(`.${u.clsImage}`).first();return e.length?e:null}getPreviewContainer(){const t=this.$container.find(`.${u.clsMediaPreview}`).first();return t.length?t:null}get $container(){return this._$container}static init(){if(this.initialized)return;this.initialized=!0,$(document).on("click",`.${u.clsMediaViewerButton}`,(t=>{const e=this.newInstance($(t.currentTarget));e&&(t.stopPropagation(),t.preventDefault(),e.showMediaViewer())})).on("change",this.selectorIdInput,(t=>{const e=$(t.currentTarget),n=this.newInstance(e);n&&n.onInputChanged(e)}));const t=t=>{var e;t.hasClass(u.clsContainer)&&(null===(e=this.newInstance(t))||void 0===e||e.reset())};i.G.getInstance().registerModifier(t),i.G.getInstance().registerResetModifier(t),this.initImagePreviewsAsync()}static initImagePreviewsAsync(t=null){const e=`${u.selectorFormItem}:not(.${u.clsInitialized})`;(null!==t?t.find(e):$(e)).each(((t,e)=>{var n,s;const i=new u($(e)),r=null!==(s=null===(n=i.getImageIdInput())||void 0===n?void 0:n.val())&&void 0!==s?s:null;"string"==typeof r&&""!==r?this.awaitingFormItems.push({imageId:r,item:i}):i.setInitialized(!0)})),null===this.timeout&&(this.timeout=setTimeout((()=>{this.initImagePreviews(this.awaitingFormItems),this.timeout=null,this.awaitingFormItems=[]}),500))}static initImagePreviews(t){if(0===t.length)return;const e=new Set(t.map((t=>t.imageId)));this.loadImageData([...e]).done((e=>{"object"==typeof e&&t.forEach((t=>{var n;t.item.setInitialized(!0);const s=null!==(n=e[t.imageId])&&void 0!==n?n:null;null!==s&&t.item.setPreviewImage(s)}))}))}static loadImageData(t){return $.post(window.ajaxurl,{wcc_nonce:o.$.getInstance().$wccNonce.val(),action:window.pageActionKey,data:{cmd:"attachmentInfo",attachmentIds:t}}).fail((()=>{console.error("Details of images cannot be retrieved from the backend.")}))}static newInstance(t){const e=t.closest(this.selectorFormItem);return e.length?new u(e):null}}u.initialized=!1,u.frame=null,u.clsMediaViewerButton="wcc-media-viewer",u.clsContainer="media",u.clsHasImage="has-image",u.clsMediaPreview="media-preview",u.clsImage="image",u.clsMediaContainer="media-container",u.clsLoading="loading",u.clsInitialized="initialized",u.selectorIdInput=`.${u.clsMediaContainer} input[name$="[${s.i.ITEM_ID}]"]`,u.selectorFormItem=`.input-group.${u.clsContainer}`,u.attrAttachmentId="data-attachment-id",u.awaitingFormItems=[],u.timeout=null},296:(t,e,n)=>{"use strict";n.d(e,{H:()=>d});var s=n(685),i=n(778),r=n(118),o=n(589),a=n(955),l=n(877);class c extends o.s{constructor(){super(...arguments),this.selectorKey=null,this.selectorValue=null}isSuitable(t,e){return e===this.getSettingKey()}onExport(t){const e=[],n=s.$.getInstance();let i,r,o,a,l;return t.find(`.${n.clsInputs} .${n.clsInputGroup}`).each(((t,n)=>{i=$(n),r=this.findKeyInput(i),o=this.findValueInput(i),null!==r&&null!==o&&(a=r.val()||null,l=o.val()||"",null!==a&&null!==l&&(a=a.toString(),l=l.toString(),null!==a&&null!==l&&e.push(this.onExportSinglePair(a,l))))})),this.onCombineExportedPairs(e)}onImport(t,e){const n=s.$.getInstance(),i=e.find(`.${n.clsInputs}`).first();if(!i.length)return;const r=l.G.getInstance(),o=this.onSplitImportedPairs(t);let a,c,u;for(const t of o){const e=this.onImportSinglePair(t);null!==e&&(a=r.addNewInputGroup(i),c=this.findKeyInput(a),u=this.findValueInput(a),null!==c&&null!==u&&(c.val(e.key),null!==e.value&&u.val(e.value)))}}findKeyInput(t){const e=t.find(this.getKeySelector()).first();return e.length?e:null}findValueInput(t){const e=t.find(this.getValueSelector()).first();return e.length?e:null}getKeySelector(){return null===this.selectorKey&&(this.selectorKey=`input[name$="[${a.i.KEY}]"]`),this.selectorKey}getValueSelector(){return null===this.selectorValue&&(this.selectorValue=`input[name$="[${a.i.VALUE}]"]`),this.selectorValue}}class u extends c{constructor(){super(...arguments),this.separator="=",this.pairEndChar=";"}getSettingKey(){return r.n.COOKIES}onExportSinglePair(t,e){return t+(""===e?"":`${this.separator}${e}`)}onCombineExportedPairs(t){return t.join(`${this.pairEndChar} `)}onSplitImportedPairs(t){return t.split(this.pairEndChar)}onImportSinglePair(t){const e=t.split(this.separator);if(!e.length)return null;const n=e[0].trim();return n.length?{key:n,value:e.length>1?e.slice(1).join(this.separator):null}:null}}class h extends c{constructor(){super(...arguments),this.separator=":",this.pairEndChar="\n"}getSettingKey(){return r.n.REQUEST_HEADERS}onExportSinglePair(t,e){return`${t}${this.separator} ${e}`}onCombineExportedPairs(t){return t.join(this.pairEndChar)}onSplitImportedPairs(t){return t.split(this.pairEndChar).map((t=>t.trimLeft())).filter((t=>t.length>0&&-1!==t.indexOf(this.separator)))}onImportSinglePair(t){const e=t.split(this.separator);if(!e.length)return null;const n=e[0].trim();if(!n.length)return null;let s=e.length>1?e.slice(1).join(this.separator):null;return null!==s&&" "===s[0]&&(s=s.substr(1)),{key:n,value:s}}}class d{constructor(){this.portableSettings=[],this.psv=s.$.getInstance(),this.psv.$containerMetaBox.on("click",`.${this.psv.clsButtonSettingExport}`,(t=>this.onClickExportButton(t))).on("click",`.${this.psv.clsButtonSettingImport}`,(t=>this.onClickImportButton(t))),this.registerCommonPortableSettings()}static getInstance(){return i.u.getInstance().get("ImportExportHandler",(()=>new d))}registerPortableSetting(t){return null!==t&&this.portableSettings.push(t),this}registerCommonPortableSettings(){this.registerPortableSetting(new u).registerPortableSetting(new h)}onClickImportButton(t){t.preventDefault();const e=this.getPortableSetting($(t.target));null!==e&&this.onClickImportExport(t,(()=>this.createImportContainer(e)),(t=>{t.parent().find(`.${this.psv.clsButtonSettingExport}`).removeClass(this.psv.clsButtonActive)}),((t,n)=>{const s=n.find(`.${this.psv.clsSettingImportExportTextarea}`).first(),i=t.closest("tr");if(!s.length||!i.length)return;const r=s.val().toString();r.length&&e.onImport(r,i)}))}onClickExportButton(t){t.preventDefault();const e=this.getPortableSetting($(t.target));null!==e&&this.onClickImportExport(t,(()=>this.createExportContainer(e)),((t,n)=>{t.parent().find(`.${this.psv.clsButtonSettingImport}`).removeClass(this.psv.clsButtonActive);const s=n.find(`.${this.psv.clsSettingImportExportTextarea}`).first(),i=t.closest("tr");if(!s.length||!i.length)return;const r=e.onExport(i);null!==r&&s.val(r)}))}getPortableSetting(t){const e=this.findSettingKey(t);for(const n of this.portableSettings)if(n.isSuitable(t,e))return n;return null}findSettingKey(t){if(null===t||!t.length)return null;const e=t.closest("tr[aria-label]");return null!==e&&e.length?e.attr("aria-label"):null}onClickImportExport(t,e,n=null,s=null){if(t.preventDefault(),null===e)return;const i=$(t.target),r=i.hasClass(this.psv.clsButtonActive),o=i.parent().closest("tr").find(`.${this.psv.clsSettingImportExport}`).first();if(o.length){if(!r)return o.empty().append(e()).removeClass("hidden"),i.addClass(this.psv.clsButtonActive),void(null!==n&&n(i,o));null!==s&&s(i,o),i.removeClass(this.psv.clsButtonActive),o.addClass("hidden").empty()}}createExportContainer(t){const e=t.getExportDescription();return this.createImportExportContainer(this.psv.clsSettingExportContainer,!0,null!==e?e:window.wpcc.export_setting_description)}createImportContainer(t){const e=t.getImportPlaceholder(),n=t.getImportDescription();return this.createImportExportContainer(this.psv.clsSettingImportContainer,!1,null!==n?n:window.wpcc.import_setting_description,null!==e?e:window.wpcc.import_setting_placeholder)}createImportExportContainer(t,e,n,s=null){const i=$(`<textarea rows="3" class="${this.psv.clsSettingImportExportTextarea}" />`);return e&&i.attr("readonly","readonly"),null!==s&&i.attr("placeholder",s),$(`<div class="${t}">\n                    <span class="description">${n}</span>\n                </div>`).append(i)}}},589:(t,e,n)=>{"use strict";n.d(e,{s:()=>s});class s{getExportDescription(){return null}getImportDescription(){return null}getImportPlaceholder(){return null}}},784:(t,e,n)=>{"use strict";n.d(e,{u:()=>r});class s{constructor(){this.$elements=null,this.callQueue=[]}static for(t){return null===s.instance&&(s.instance=new s),s.instance.setElements(t),s.instance.resetCallQueue(),s.instance}init(){return this.addCall((()=>this.getElements().tooltip())),this}destroy(){return this.addCall((()=>this.getElements().tooltip("destroy"))),this}fixTitle(){return this.addCall((()=>this.getElements().tooltip("fixTitle"))),this}show(){return this.addCall((()=>this.getElements().tooltip("show"))),this}hide(){return this.addCall((()=>this.getElements().tooltip("hide").blur())),this}apply(){try{for(let t of this.getCallQueue())t()}catch(t){console.error(t)}this.resetCallQueue(),this.setElements(null)}resetCallQueue(){this.callQueue=[]}getCallQueue(){return this.callQueue}addCall(t){this.callQueue.push(t)}getElements(){return this.$elements}setElements(t){return this.$elements=t,this}}s.instance=null;class i extends s{static for(t){return null===i.instance&&(i.instance=new i),i.instance.setElements(t),i.instance.resetCallQueue(),i.instance}init(){return this}destroy(){return this.addCall((()=>{this.getElements()&&this.getElements().removeAttr("title")})),this}fixTitle(){return this}show(){return this}hide(){return this}}i.instance=null;class r{static for(t){return void 0===window.wpccTooltipDisabled||window.wpccTooltipDisabled||"function"!=typeof $.fn.tooltip||"function"!=typeof $.fn.emulateTransitionEnd?i.for(t):s.for(t)}static initAll(){r.for($(r.TOOLTIP_EL_SELECTOR)).init().apply()}static initAllIn(t){r.for(t.find(r.TOOLTIP_EL_SELECTOR)).init().apply()}static initForSelector(t){r.for($(t+r.TOOLTIP_EL_SELECTOR)).init().apply()}}r.TOOLTIP_DATA_ATTR_NAME="wpcc-toggle",r.TOOLTIP_ATTRIBUTE_NAME="data-"+r.TOOLTIP_DATA_ATTR_NAME,r.TOOLTIP_ATTRIBUTE_VALUE="wpcc-tooltip",r.TOOLTIP_EL_SELECTOR="["+r.TOOLTIP_ATTRIBUTE_NAME+'="'+r.TOOLTIP_ATTRIBUTE_VALUE+'"]'},709:(t,e,n)=>{"use strict";n.d(e,{T:()=>Y});var s=n(778),i=n(401),r=n(938);class o{constructor(t,e,n,s,i){this.description=null,this.views=[],this.name=t,this.key=e,this.inputTypes=n,this.outputTypes=s,this.actionProperty=i}getKey(){return this.key}getName(){return this.name}getDescription(){return this.description}setDescription(t){return this.description=t,this}getInputTypes(){return this.inputTypes}getOutputTypes(){return this.outputTypes}isActionProperty(){return this.actionProperty}getViews(){return this.views}addView(t){return this.views.push(t),this}static fromObject(t){const e=new o(t.name,t.key,t.inputTypes,t.outputTypes,t.actionProperty).setDescription(t.description||null);return r.W.addViewDefinitions(e,null!==t.views?t.views:[]),e}static createValueProperty(t){return new o(window.wpcc.value,t.valuePropertyVal,null,null,!0)}}class a{constructor(t,e,n,s){this.description=null,this.outputTypes=null,this.views=[],this.testViews=[],this.testable=!1,this.needSubjectValue=null,this.key=t,this.name=e,this.inputTypes=n,this.type=s}getKey(){return this.key}getName(){return this.name}getDescription(){return this.description}setDescription(t){return this.description=t,this}isNeedSubjectValue(){return this.needSubjectValue}setOutputTypes(t){this.outputTypes=t}getOutputTypes(){return this.outputTypes}setNeedSubjectValue(t){this.needSubjectValue=t}getViews(){return this.views}hasViews(){return this.views.length>0}addView(t){return this.views.push(t),this}getTestViews(){return this.testViews}addTestView(t){return this.testViews.push(t),this}isTestable(){return this.testable}setTestable(t){return this.testable=t,this}static fromObject(t){const e=new a(t.key,t.name,t.inputTypes,t.type).setDescription(t.description||null).setTestable(t.testable||!1);return void 0!==t.needSubjectValue&&e.setNeedSubjectValue(t.needSubjectValue),void 0!==t.outputTypes&&e.setOutputTypes(t.outputTypes),r.W.addViewDefinitions(e,null!==t.views?t.views:[]),r.W.addTestViewDefinitions(e,null!==t.testViews?t.testViews:[]),e}}var l=n(675),c=n.n(l);class u{constructor(t,e){this.template=null,this.key=t,this.html=e}render(t){return null===this.template&&(this.template=c().compile(this.html)),this.template(t)}}class h{constructor(t,e){this.eventGroup=t,this.commandTypes=e}isSuitableForEventGroup(t){return null===t||null===this.eventGroup||this.eventGroup===t}isSuitableForCommandType(t){return null===t||null===this.commandTypes||!this.commandTypes.length||-1!==this.commandTypes.indexOf(t)}static fromObject(t){return new h(t.eventGroup||null,t.commandTypes||null)}}class d{constructor(t,e,n,s){this.description=null,this.views=[],this.title=t,this.key=e,this.dataTypes=n,this.fieldConfigs=s}getName(){return this.title}setKey(t){return this.key=t,this}getKey(){return this.key}getDescription(){return this.description}setDescription(t){return this.description=t,this}getDataTypes(){return this.dataTypes}isSuitableFor(t,e){if(null===this.fieldConfigs)return!0;let n;for(n of this.fieldConfigs)if(n.isSuitableForCommandType(e)&&n.isSuitableForEventGroup(t))return!0;return!1}getViews(){return this.views}addView(t){return this.views.push(t),this}static fromObject(t){let e=null;const n=t.fieldConfigs||null;Array.isArray(n)&&(e=[],n.forEach((t=>e.push(h.fromObject(t)))));const s=new d(t.title,t.key,t.dataTypes,e).setDescription(t.description||null);return r.W.addViewDefinitions(s,null!==t.filterViews?t.filterViews:[]),s}}class p{constructor(t,e,n){this.identifier=t,this.name=e,this.subjects=n}getIdentifier(){return this.identifier}getName(){return this.name}getSubjects(){return this.subjects}filterSubjectGroupFor(t,e){const n=new Map;let s;for(s of this.getSubjects().values())s.isSuitableFor(e,t)&&n.set(s.getKey(),s);return n.size?new p(this.getIdentifier(),this.getName(),n):null}static fromObject(t){const e=t.identifier,n=new Map;let s;for(const i of t.subjects||[])s=d.fromObject(i),s.setKey(`${e}.${s.getKey()}`),n.set(s.getKey(),s);return new p(e,t.name,n)}}class g{constructor(t,e,n,s){this.key=t,this.name=e,this.description=n,this.eventGroup=s}getKey(){return this.key}getName(){return this.key}getDescription(){return this.description}getEventGroup(){return this.eventGroup}static fromObject(t){return new g(t.key,t.name,t.desc,t.eventGroup)}}class _{constructor(){this.events=new Map,this.properties=new Map,this.subjectGroups=new Map,this.commands=new Map,this.viewTemplates=new Map}addEvent(t){return this.events.set(t.getKey(),t),this}getEvents(){return this.events}addProperty(t){return this.properties.set(t.getKey(),t),this}getProperties(){return this.properties}addSubjectGroup(t){return this.subjectGroups.set(t.getIdentifier(),t),this}getSubjectGroups(){return this.subjectGroups}addCommand(t){return this.commands.set(t.getKey(),t),this}getCommands(){return this.commands}addViewTemplate(t,e){return this.viewTemplates.set(t,new u(t,e)),this}getViewTemplates(){return this.viewTemplates}static fromObject(t){const e=new _;(t.events||[]).forEach((t=>e.addEvent(g.fromObject(t))));const n=t.viewTemplates||{};for(const t in n)e.addViewTemplate(t,n[t]);return(t.commands||[]).forEach((t=>e.addCommand(a.fromObject(t)))),(t.subjectGroups||[]).forEach((t=>{e.addSubjectGroup(p.fromObject(t))})),(t.properties||[]).forEach((t=>e.addProperty(o.fromObject(t)))),e}}var f,m=n(685);!function(t){t.ACTION="action",t.CONDITION="condition"}(f||(f={}));var S,T=n(730);!function(t){t.TEST_RESULT_CONTAINER="partials.test-result-container"}(S||(S={}));class v{constructor(t,e){this.definition=null,this.eventSelectMap=new Map,this.subjectSelectMap=new Map,this.$propertySelect=null,this.propertySelectMap=new Map,this.$commandSelect=null,this.commandSelectMap=new Map,this.$testResultContainer=null,this.fv=t,this.initDefinition((()=>{this.init(),null!==e&&e()}))}init(){c().registerHelper("json",(t=>JSON.stringify(t)))}getCommandSelectForProperty(t,e,n){const s=this.getProperty(t);if(null===s)return null;if(s.isActionProperty())return this.getCommandSelectForTypes(s.getOutputTypes(),e,s.getOutputTypes());const i=this.getSubject(n);return this.getCommandSelectForTypes(s.getOutputTypes(),e,null!==i?i.getDataTypes():null)}getCommandSelectForSubject(t,e){const n=this.getSubject(t);return null===n?null:this.getCommandSelectForTypes(n.getDataTypes(),e,n.getDataTypes())}getCommandSelectForTypes(t,e,n=null){let s=e+"_"+t.join(",");if(e===f.ACTION&&null!==n&&(s+="_"+n.join(",")),!this.commandSelectMap.has(s)){const i=this.getCommandSelect();let r,o,a,l;i.find("option").each(((s,i)=>{l=$(i),a=l.data("type"),r=l.data("input-types")||[],o=l.data("output-types")||[],a===e&&T.c.containsDataType(r,t)&&(e!==f.ACTION||null===n||T.c.containsDataType(o,n))||l.remove()})),this.commandSelectMap.set(s,i.length?i:null)}const i=this.commandSelectMap.get(s);return null!==i?i.clone():null}getPropertySelectForSubject(t,e){const n=this.getSubject(t);if(null===n)return null;const s=`${t}_${e}`;if(!this.propertySelectMap.has(s)){const t=n.getDataTypes(),i=this.getPropertySelect();let r,o;i.find("option").each(((n,s)=>{o=$(s),o.attr("value")!==this.fv.valuePropertyVal&&(r=o.data("input-types")||[],T.c.containsDataType(r,t)&&(e!==f.ACTION||o.data("action-property"))||o.remove())})),this.propertySelectMap.set(s,i.find("option").length?i:null)}const i=this.propertySelectMap.get(s);return null!==i?i.clone():null}getCommandViews(t,e=null,n=null){const s=this.getCommand(t);if(null===s)return null;const i=e?this.getProperty(e):null,r=n?this.getSubject(n):null,o=$(`<table class="${m.$.getInstance().clsWccSettings}" />`);s.hasViews()||o.addClass(this.fv.clsHasNoSettingViews),null!==r&&this.appendViewDefinitions(o,r,this.fv.clsSubjectView),null!==i&&this.appendViewDefinitions(o,i,this.fv.clsPropertyView),this.appendViewDefinitions(o,s,this.fv.clsCommandView),this.appendTestViewDefinitions(o,s,this.fv.clsTestView),s.isTestable()&&(o.addClass(this.fv.clsHasTestViews),o.append($(`<tr class="${this.fv.clsTestView} ${this.fv.clsTestCommandContainer}" />`).append($('<td colspan="2" />').append($(`<button class="button ${this.fv.clsTestCommand}" title="${window.wpcc.test_this_command}">\n                            <span class="dashicons dashicons-search"></span>\n                        </button>`)).append(this.createTestResultContainer()))));const a=$(`<div class="${this.fv.clsCommandViews}" data-${this.fv.dataCommandKey}="${s.getKey()}" />`);null!==r&&a.attr(`data-${this.fv.dataSubjectKey}`,r.getKey()),null!==i&&a.attr(`data-${this.fv.dataPropertyKey}`,i.getKey());const l=this.createCommandDescriptionView(r,i,s);return null!==l&&a.append(l),o.find("tr:first-child").length||a.children().length?(a.addClass(this.fv.clsShowTestViews),a.append(o)):null}getEventSelect(t){if(!this.eventSelectMap.has(t)){const e=this.fv.selectNameEvent,n=c().compile(`\n                <select class="${this.fv.clsFilteringEvents}" name="${e}" id="${e}">\n                    {{#each events}}\n                        <option value="{{key}}" title="{{description}}">\n                            {{name}}\n                        </option>\n                    {{/each}}\n                </select>`);this.eventSelectMap.set(t,this.wrapSelect($(n({events:this.getEventsFor(t)})),window.wpcc.filter_when,e))}return this.eventSelectMap.get(t).clone()}getSubjectSelect(t,e){this.subjectSelectMap.has(t)||this.subjectSelectMap.set(t,new Map);const n=this.subjectSelectMap.get(t);if(!n.has(e)){const s=this.fv.selectNameSubject,i=c().compile(`\n                <select class="${this.fv.clsFilteringSubjects}" name="${s}" id="${s}">\n                    {{#each subjectGroups}}\n                        <optgroup label="{{name}}">\n                            {{#each subjects}}\n                                <option value="{{this.1.key}}" data-types="{{{json this.1.dataTypes}}}">\n                                    {{this.1.title}}\n                                </option>\n                            {{/each}}\n                        </optgroup>\n                    {{/each}}\n                </select>`);n.set(e,this.wrapSelect($(i({subjectGroups:this.getSubjectGroupsFor(t,e)})),window.wpcc.subject,s,this.fv.clsSubjectView))}return this.subjectSelectMap.get(t).get(e).clone()}getPropertySelect(){if(null===this.$propertySelect){const t=this.fv.selectNameProperty,e=c().compile(`\n                <select class="${this.fv.clsFilteringProperties}" name="${t}" id="${t}">\n                    <option value="${this.fv.valuePropertyVal}">${window.wpcc.value}</option>\n                    {{#each properties}}\n                        <option \n                            value="{{key}}" \n                            data-input-types="{{{json inputTypes}}}"\n                            data-output-types="{{{json outputTypes}}}"\n                            data-action-property="{{actionProperty}}">\n                            {{name}}\n                        </option>\n                    {{/each}}\n                </select>`),n=Array.from(this.definition.getProperties().values()).sort(((t,e)=>t.getName().localeCompare(e.getName())));this.$propertySelect=this.wrapSelect($(e({properties:n})),window.wpcc.property,t,this.fv.clsPropertyView)}return this.$propertySelect.clone()}getCommandSelect(){if(null===this.$commandSelect){const t=this.fv.selectNameCommand,e=c().compile(`\n                <select class="${this.fv.clsFilteringCommands}" name="${t}" id="${t}">\n                    {{#each commands}}\n                        <option\n                            data-type="{{type}}" \n                            value="{{key}}" \n                            data-input-types="{{{json inputTypes}}}"\n                            {{#if outputTypes}} data-output-types="{{{json outputTypes}}}" {{/if}}>\n                            {{name}}\n                        </option>\n                    {{/each}}\n                </select>`),n=Array.from(this.definition.getCommands().values()).sort(((t,e)=>t.getName().localeCompare(e.getName())));this.$commandSelect=this.wrapSelect($(e({commands:n})),window.wpcc.command,t,this.fv.clsCommandView)}return this.$commandSelect.clone()}wrapSelect(t,e,n,s=null){const i=null!==s?`data-${this.fv.dataHighlightClass}="${s}"`:"";return $(`<div class="${this.fv.clsSelectContainer}" ${i}>\n                    <label for="${n}" class="select-title">${e}</label>\n                </div>`).append(t)}initDefinition(t){if(null===this.definition){const e=m.$.getInstance(),n=e.postId;if(-1===n)return void console.error("Post ID does not exist");$.post(window.ajaxurl,{wcc_nonce:e.$wccNonce.val(),action:window.pageActionKey,data:{postId:n,cmd:"filtering",filteringCmd:"viewDefinitions"}}).done((t=>{null!==(t||null)?this.definition=_.fromObject(t):console.error("Response is not valid",t)})).fail((()=>{console.error("Filtering definitions could not be retrieved.")})).always((()=>{t()}))}else t()}getEventsFor(t){const e=[];let n;for(n of this.getDefinition().getEvents().values())n.getEventGroup()===t&&e.push(n);return e}getSubjectGroupsFor(t,e){const n=[];let s,i;for(s of this.getDefinition().getSubjectGroups().values())i=s.filterSubjectGroupFor(t,e),null!==i&&n.push(i);return n}appendViewDefinitions(t,e,n=null){e.getViews().forEach((e=>this.appendViewDefinition(t,e,n)))}appendTestViewDefinitions(t,e,n=null){e.getTestViews().forEach((e=>this.appendViewDefinition(t,e,n)))}appendViewDefinition(t,e,n=null){const s=this.definition.getViewTemplates().get(e.getKey())||null;if(null===s)return;const i=$(s.render(e.getVariables()));null!==n&&i.addClass(n),t.append(i)}createCommandDescriptionView(t,e,n){if(null===t&&null===e&&null===n)return null;const s=[r.W.createItemDescriptionView(t),r.W.createItemDescriptionView(e),r.W.createItemDescriptionView(n)].filter((t=>null!==t));if(0===s.length)return null;const i=$(`<div class="${this.fv.clsCommandDescriptionContainer}"></div>`);for(const t of s)i.append(t);return i}createTestResultContainer(){return null===this.$testResultContainer&&(this.$testResultContainer=this.renderTemplateWithKey(S.TEST_RESULT_CONTAINER)),null!==this.$testResultContainer?this.$testResultContainer.clone():null}renderTemplateWithKey(t,e={}){if(null===t)return null;const n=this.getDefinition().getViewTemplates().get(t)||null;return null===n?null:$(n.render(e))}getDefinition(){return this.definition}getSubject(t){const e=t.substring(0,t.indexOf("."));try{return this.definition.getSubjectGroups().get(e).getSubjects().get(t)||null}catch(t){return null}}getProperty(t){return this.definition.getProperties().get(t)||null}getCommand(t){return this.definition.getCommands().get(t)||null}}var C,E=n(766),I=n(784);!function(t){t.AND="and",t.OR="or"}(C||(C={}));var b=n(545),w=n(152),O=n(136);class y{constructor(t,e,n){this.$conditionBlockPrototype=null,this.commandContainerMap=new Map,this.definitionService=t,this.fv=e,this.getEventHandlerCallback=n}createFilters(t){const e=m.$.getInstance(),n=$(`<div class="${this.fv.clsFilters}">\n            <div class="${this.fv.clsActions}">\n                <div class="left">\n                    <button class="button ${this.fv.clsButtonAddFilter}">${window.wpcc.add_new}</button>\n                    <button class="button ${e.clsButtonSettingExport}">${window.wpcc.export}</button>\n                    <button class="button ${e.clsButtonSettingImport}">${window.wpcc.import}</button>\n                </div>\n                <div class="right">\n                    <label title="${window.wpcc.filter_enabled_description}">\n                        <input type="checkbox" tabindex="-1" checked="checked"\n                            class="${this.fv.clsInputFilterSettingEnabled}" \n                            name="${w.b.ENABLED}"> ${window.wpcc.enabled}\n                    </label>\n                </div>\n            </div>\n            <div class="${e.clsSettingImportExport} hidden"></div>\n        </div>`);return this.prepareInputContainer(n,this.fv.clsFilters),n.prepend(this.createFilterContainer(t))}createFilterContainer(t){const e=$(`<div class="${this.fv.clsFilterOptions}">\n                <input class="${this.fv.clsInputFilterTitle}" type="text" name="filter_title" placeholder="${window.wpcc.enter_filter_title}">\n                <input class="${this.fv.clsInputFilterCollapsed}" type="hidden" name="${b.G.FILTER_COLLAPSED}">\n                <input class="${this.fv.clsInputSummaryExpanded}" type="hidden" name="${b.G.SUMMARY_EXPANDED}">\n                <input class="${this.fv.clsInputFilterEnabled}" type="hidden" name="${b.G.CONFIG_ENABLED}" value="1">\n                <input class="${this.fv.clsInputSideBySide}" type="hidden" name="${b.G.SIDE_BY_SIDE}" value="1">\n            </div>`);return this.prepareInputContainer(e,this.fv.clsFilterOptions),$(`<div class="${this.fv.clsFilterContainer} ${this.fv.clsSideBySide}" />`).append($(`<div class="${this.fv.clsFilterOperations}"/>`).append($(`<div class="${this.fv.clsActionContainer} ${this.fv.clsFilterActions}">`).append(this.createDashiconButtonHtml(this.fv.clsToggleFilterCollapse,null,"arrow-up-alt2"))).append(e).append($(`<div class="${this.fv.clsActionContainer} ${this.fv.clsFilterActions}">\n                        ${this.createFontAwesomeButtonHtml(this.fv.clsToggleCommandSummaries+" "+this.fv.clsSummaryButton,window.wpcc.toggle_expand_all,"expand-alt")}\n                        ${this.createFontAwesomeButtonHtml(this.fv.clsFilterToggleEnabled,window.wpcc.toggle_filter_enabled,"toggle-on",window.wpcc.enabled)}\n                        ${this.createFontAwesomeButtonHtml(this.fv.clsFilterToggleSideBySide,window.wpcc.toggle_side_by_side,"toggle-on",window.wpcc.side_by_side)}\n                        ${this.createFontAwesomeButtonHtml(this.fv.clsFilterMoveUp,window.wpcc.move_up,"caret-up")}\n                        ${this.createFontAwesomeButtonHtml(this.fv.clsFilterMoveDown,window.wpcc.move_down,"caret-down")}\n                        ${this.createFontAwesomeButtonHtml(this.fv.clsFilterClone,window.wpcc.clone,"clone")}\n                        ${this.createDashiconButtonHtml(this.fv.clsRemoveFilter,window.wpcc.remove_filter,"trash")}\n                    </div>`))).append(this.createFilterHeader(t,this.fv.clsFilterIf,window.wpcc.filter_if).append(this.createNewConditionBlock())).append(this.createFilterHeader(t,this.fv.clsFilterThen,window.wpcc.filter_then).append(this.createNewCommandsContainer()).append(this.createNewAddActionButtonContainer()))}createNewConditionBlock(){if(null===this.$conditionBlockPrototype){const t=b.G.OPERATOR;this.$conditionBlockPrototype=$(`<div class="${this.fv.clsConditionBlock}" data-${this.fv.dataType}="${C.AND}">\n                        <div class="${this.fv.clsBlockOptions}">\n                            <div class="block-option">\n                                <select name="${t}" id="${t}" class="${this.fv.clsConditionOperator}">\n                                    <option value="${C.AND}">${window.wpcc.operator_and}</option>\n                                    <option value="${C.OR}">${window.wpcc.operator_or}</option>\n                                </select>\n                            </div>\n                        </div>\n                        <div class="${this.fv.clsActionContainer} ${this.fv.clsBlockActions}">\n                            ${this.createSortableButtonHtml()}\n                            ${this.createDashiconButtonHtml(this.fv.clsRemoveCondition,window.wpcc.remove_block,"trash")}\n                        </div>\n                    </div>`).append(this.createNewCommandsContainer()).append(this.createNewAddConditionButtonsContainer())}const t=this.$conditionBlockPrototype.clone();return this.prepareConditionBlock(t),t}createNewCommandContainer(t,e){const n=`${t}-${e}`;if(this.commandContainerMap.has(n))return this.commandContainerMap.get(n).clone();const s=$(`<div class="${this.fv.clsCommandOptions}" />`);t===f.CONDITION?s.append(this.createCommandCheckboxOption(b.G.CMD_OPTION_STOP_AFTER_FIRST_MATCH,window.wpcc.stop_after_first_match,window.wpcc.stop_after_first_match_desc)):t===f.ACTION&&s.append(this.createCommandCheckboxOption(b.G.CMD_OPTION_ONLY_MATCHED_ITEMS,window.wpcc.only_matched_items,window.wpcc.only_matched_items_desc));const i=$(`<div class="${this.fv.clsActionContainer} ${this.fv.clsCommandButtons}" />`).append(this.createFontAwesomeButtonHtml(this.fv.clsCommandMoveUp,window.wpcc.move_up,"caret-up")).append(this.createFontAwesomeButtonHtml(this.fv.clsCommandMoveDown,window.wpcc.move_down,"caret-down"));t===f.CONDITION&&i.append(this.createFontAwesomeButtonHtml(this.fv.clsCommandMoveOut,window.wpcc.move_out,"level-up-alt fa-flip-horizontal")).append(this.createFontAwesomeButtonHtml(this.fv.clsCommandMoveIn,window.wpcc.move_in,"level-down-alt")),i.append(this.createFontAwesomeButtonHtml(this.fv.clsCommandClone,window.wpcc.clone,"clone")).append(this.createSortableButtonHtml()).append(this.createDashiconButtonHtml(this.fv.clsRemoveCommand,window.wpcc.remove_command,"trash"));const r=$(`<div class="${this.fv.clsCommandContainer}" data-${this.fv.dataType}="${t}">\n                    <div class="${this.fv.clsCommandViews}"></div>\n                </div>`).append(i).prepend($(`<div class="${this.fv.clsCommandContent}" />`).append(this.definitionService.getSubjectSelect(t,e)));return r.find("."+this.fv.clsCommandViews).before(s),this.commandContainerMap.set(n,r),r.clone()}createCommandCheckboxOption(t,e,n=null){const s=$(`<div class="${this.fv.clsCommandOption} ${this.fv.clsCheckboxOption} ${this.fv.clsCommandOptionPrefix}${t}" />`),i=$(`<label for="${t}">\n                <input type="checkbox" name="${t}" id="${t}">\n                <span>${e}</span>\n            </label>`);return null!==n&&i.attr("title",n).attr(I.u.TOOLTIP_ATTRIBUTE_NAME,I.u.TOOLTIP_ATTRIBUTE_VALUE),s.append(i),s}initCommands(t){const e=this.getEventHandlerCallback();null!==e?t.find("."+this.fv.clsFilteringSubjects).each(((t,n)=>{e.getCommandHandler().subjectChanged($(n))})):console.error("Event handler does not exist. Command could not be initialized.")}prepareCommandContainer(t){this.prepareInputContainer(t,this.fv.clsCommandContainer)}prepareConditionBlock(t){this.prepareInputContainer(t,this.fv.clsConditionBlock,`> .${this.fv.clsBlockOptions}`)}createFilterHeader(t,e,n){const s=$(`<div class="${this.fv.clsFilterHeader}">\n                    <span class="filter-title">${n}</span>\n                </div>`).append(this.definitionService.getEventSelect(t));return this.prepareInputContainer(s,this.fv.clsFilterHeader),$(`<div class="${this.fv.clsFilter} ${e}"></div>`).append(s)}prepareInputContainer(t,e,n=null){if(t.hasClass(e)||(t=t.closest("."+e)),!t.length)return void console.warn("Input container could not be found. The given container will not be prepared.");const s=t.data("id"),i=void 0!==s?s:y.inputContainerCounter++,r=`${this.fv.inputName}[${i}][{0}]`;let o,a,l,c,u,h;void 0===s&&t.attr("data-id",i);let d=':input:not([data-prepared="1"])';null!==n&&(d=n+" "+d),t.find(d).each(((e,n)=>{o=$(n),o.attr("data-prepared",1),a=l=o.attr("name")||null,null!==a&&(u=a.indexOf("["),-1!==u?(h=a.substring(u),l=a.substring(0,u)):h="",c=r.replace("{0}",l)+h,t.find(`label[for="${a}"]`).attr("for",c),o.attr("id",c).attr("name",c).attr("data-original-name",a))})),E.I.getInstance().initSortablesInElement(t),I.u.initAllIn(t),O.Z.initImagePreviewsAsync(t)}createNewAddConditionButtonsContainer(){return $(`<div class="${this.fv.clsAddContainer} add-condition" />`).append(this.createAddButton(this.fv.clsButtonAddCommand,window.wpcc.add_command)).append(this.createAddButton(this.fv.clsButtonAddCondition,window.wpcc.add_condition_block))}createNewCommandsContainer(){return $(`<div class="${this.fv.clsCommands}" />`)}createNewAddActionButtonContainer(){return $(`<div class="${this.fv.clsAddContainer} add-action" />`).append(this.createAddButton(this.fv.clsButtonAddCommand,window.wpcc.add_command))}createAddButton(t,e){return $(`<div class="filter-button ${this.fv.clsButtonFilterAdd} ${t}">\n                <span class="dashicons dashicons-plus"></span> ${e}\n            </div>`)}createSortableButtonHtml(){return this.createDashiconButtonHtml(this.fv.clsFilterSort,window.wpcc.move_this,"move")}createDashiconButtonHtml(t,e,n){return r.W.createDashiconButtonHtml(t,e,n)}createFontAwesomeButtonHtml(t,e,n,s=null){return r.W.createFontAwesomeButtonHtml(t,e,n,s)}}y.inputContainerCounter=0;var A=n(62),R=n(852),N=n(877);class P{setInputValues(t,e,n=!1){if(null===t||!e.length)return;let s;for(const i of Object.keys(t))s=t[i],Array.isArray(s)?this.setMultipleInputValue(e,i,s):this.setInputValue(e.find(`[data-original-name="${i}"], [name="${i}"]`),s,n)}setMultipleInputValue(t,e,n,s=!1){if(null===t||!t.length||null===e||!Array.isArray(n))return;const i=t.find(`tr[aria-label="${e}"]`),r=i.find(".actions > .wcc-add-new").first(),o=i.find(".inputs").first();if(!i.length||!r.length||!o.length)return;const a=N.G.getInstance();let l,c,u;for(let t=0;t<n.length;t++)if(t>0&&a.addNew(r),l=o.find(`.input-group:nth-child(${t+1})`),c=n[t]||null,null!==c&&l.length)if("object"==typeof c)for(u of Object.keys(c))this.setInputValue(l.find(`[name$="[${u}]"]`),c[u]);else this.setInputValue(l.find("[name]").first(),c)}setInputValue(t,e,n=!1){if(null===t||!t.length)return;const s=t[0].tagName.toLowerCase();"select"===s?t.find(`option[value="${e}"]`).length?t.val(e):t[0].selectedIndex=0:"input"===s?"checkbox"===(t.attr("type")||null)?t.prop("checked",!1!==e):t.val(e):"textarea"===s&&t.val(e),n&&t.trigger("change")}}var L=n(444);class x{constructor(t){this.commandSelectChangeListenerMap=new Map,this.filteringService=t,this.fv=t.getFilteringVariables(),this.eventHandler=t.getEventHandler(),this.inputUnserializer=new P,this.commandSelectAssignmentOrder=[this.fv.selectNameSubject,this.fv.selectNameProperty,this.fv.selectNameCommand];const e=this.eventHandler.getCommandHandler();this.commandSelectChangeListenerMap.set(this.fv.selectNameSubject,(t=>e.subjectChanged(t))).set(this.fv.selectNameProperty,(t=>e.propertyChanged(t))).set(this.fv.selectNameCommand,(t=>e.commandChanged(t)))}unserialize(t,e=null,n=!0){if(null===t)return void console.warn("Filters container must not be null.");if(null===e&&(e=this.extractSerializedValues(t)),null===e)return void console.error("Serialized values could not be found. No unserialization will be done.");this.unserializeFilterSettingOptions(e[w.b.OPTIONS]||{},t),this.filteringService.getEventHandler().setCachingEnabled(!1);const s=n?t.find(`> .${this.fv.clsFilterContainer}`):null;let i,r=$();const o=this.eventHandler.getEventGroupForFilterSetting(t),a=e[w.b.FILTERS]||[],l=a.length;for(let t=0;t<l;t++)i=this.filteringService.getElementService().createFilterContainer(o),this.unserializeFilter(a[t],i,!1,o),r=r.add(i);r.length&&(t.prepend(r),null!==s&&s.remove()),this.filteringService.getEventHandler().setCachingEnabled(!0)}unserializeFilter(t,e,n=!0,s=null){n&&this.filteringService.getEventHandler().setCachingEnabled(!1);const i=t[b.G.CONFIG]||{},r=e.find(`> .${this.fv.clsFilterIf}`);this.setFilterOptionInput(e,t,b.G.TITLE,this.fv.clsInputFilterTitle),this.setFilterOptionInput(e,t,b.G.FILTER_COLLAPSED,this.fv.clsInputFilterCollapsed),this.setFilterOptionInput(e,t,b.G.SUMMARY_EXPANDED,this.fv.clsInputSummaryExpanded),this.setFilterOptionInput(e,t,b.G.SIDE_BY_SIDE,this.fv.clsInputSideBySide),this.setFilterOptionInput(e,i,b.G.CONFIG_ENABLED,this.fv.clsInputFilterEnabled);const o=t[b.G.FILTER_IF];this.unserializeConditionBlock(o,r.find(`> .${this.fv.clsConditionBlock}`),s);const a=e.find(`> .${this.fv.clsFilterThen}`),l=a.find(`> .${this.fv.clsCommands}`),c=t[b.G.FILTER_THEN];for(const t of c[b.G.ITEMS])this.eventHandler.getConditionHandler().addCommand(this.getAddButton(a,this.fv.clsButtonAddCommand),s),this.unserializeCommand(t,this.getLastElementInContainer(l,`.${this.fv.clsCommandContainer}`));this.setFilterEvent(r,o),this.setFilterEvent(a,c);const u=new L.w(e,this.fv);T.c.toggleClassConditionally(e,this.fv.clsSideBySide,u.isSideBySide()),T.c.toggleClassConditionally(e,this.fv.clsFilterDisabled,!u.isEnabled()),u.isFilterCollapsed()&&setTimeout((()=>{this.eventHandler.getFilterHandler().toggleFilterCollapse(e)}),500),n&&this.filteringService.getEventHandler().setCachingEnabled(!0)}unserializeCommand(t,e){if(null===e||!e.length)return;let n,s;delete t[b.G.TYPE];for(const i of this.commandSelectAssignmentOrder)n=e.find(`[data-original-name="${i}"], [name="${i}"]`).first(),n.length&&(this.inputUnserializer.setInputValue(n,t[i]||null),s=this.commandSelectChangeListenerMap.get(i)||null,null!==s&&s(n),delete t[i]);this.inputUnserializer.setInputValues(t,e),this.filteringService.getElementService().prepareCommandContainer(e)}unserializeFilterSettingOptions(t,e){this.inputUnserializer.setInputValues(t,e.find(`> .${this.fv.clsActions}`),!0)}unserializeConditionBlock(t,e,n=null){if(null===e||!e.length||null===t)return;const s=e.find(e.find(`> .${this.fv.clsBlockOptions}`));this.inputUnserializer.setInputValues(t[b.G.OPTIONS]||null,s),this.eventHandler.getConditionHandler().conditionOperatorChanged(s.find("."+this.fv.clsConditionOperator));const i=t[b.G.ITEMS]||[];let r;for(const t of i)r=t[b.G.TYPE],r===b.G.TYPE_CONDITION?(this.eventHandler.getConditionHandler().addCondition(this.getAddButton(e,this.fv.clsButtonAddCondition)),this.unserializeConditionBlock(t,this.getLastElementInCommandsContainer(e,this.fv.clsConditionBlock),n)):r===b.G.TYPE_COMMAND&&(this.eventHandler.getConditionHandler().addCommand(this.getAddButton(e,this.fv.clsButtonAddCommand),n),this.unserializeCommand(t,this.getLastElementInCommandsContainer(e,this.fv.clsCommandContainer)))}getLastElementInCommandsContainer(t,e){return this.getLastElementInContainer(t,`> .${this.fv.clsCommands} > .${e}`)}getLastElementInContainer(t,e){const n=t.find(e).last();return n.length?n:null}getAddButton(t,e){return t.find(`> .${this.fv.clsAddContainer} > .${e}`)}setFilterEvent(t,e){const n=(e[b.G.OPTIONS]||{})[b.G.EVENT]||null;this.inputUnserializer.setInputValue(t.find(`> .${this.fv.clsFilterHeader} select.${this.fv.clsFilteringEvents}`),n)}extractSerializedValues(t){const e=t.find(`> .${this.fv.clsSerializedInput}`).val()||null;return null!==e?JSON.parse(e.toString()):null}setFilterOptionInput(t,e,n,s){const i=e[n]||null;if(null===i)return;const r=t.find(`.${this.fv.clsFilterOperations} .${s}`);r.length&&r.val(i)}}class D{constructor(t,e){this.mainHandler=t,this.fv=e.getFilteringVariables(),this.elService=e.getElementService(),this.definitionService=e.getDefinitionService(),this.sortableHandler=e.getSortableHandler()}}var k=n(45);class B{constructor(t,e){this.clsLoading="loading",this.clsHidden="hidden",this.fv=e,this.$cmdContainer=this.getClosestCommandContainer(t)}test(){if(null===this.$cmdContainer)return;const t=this.getTestResultContainer(),e="Test result container could not be found";if(null===t)return void console.error(e);const n=t.find(".content");n.length?(n.html(""),this.setResultsLoading(!0),$.post(window.ajaxurl,{wcc_nonce:m.$.getInstance().$wccNonce.val(),action:window.pageActionKey,data:this.getTestData()}).done((t=>{null!=t&&t&&null!=t.view?(n.html(t.view),$(document).trigger(jQuery.Event(A.t.testResultsLoaded))):n.html(window.wpcc.an_error_occurred)})).fail((t=>{n.html(window.wpcc.an_error_occurred+" <br />"+t.responseText),console.log(t)})).always((()=>{this.setResultsLoading(!1)}))):console.error(e)}getTestData(){const t=this.getTestButton();if(null===t)return null;const e={testType:"test_type_command",commandData:this.getSerialized(),urlSelector:""},n=k.a.getInstance();return n.maybeInjectUrlSelector(e,t),n.addSettingsToAjaxData(e),e}getSerialized(){return null===this.$cmdContainer?null:R.J.serializeInputs(this.$cmdContainer,this.fv)}setResultsLoading(t){const e=this.getTestResultContainer();null!==e&&(e.removeClass(this.clsHidden),t?e.addClass(this.clsLoading):e.removeClass(this.clsLoading))}getTestResultContainer(){if(null===this.$cmdContainer)return null;const t=this.$cmdContainer.find(`.${this.fv.clsTestCommandContainer} .test-results`).first();return t.length?t:null}getTestButton(){if(null===this.$cmdContainer)return null;const t=this.$cmdContainer.find(`.${this.fv.clsTestCommandContainer} .${this.fv.clsTestCommand}`).first();return t.length?t:null}getClosestCommandContainer(t){if(null===t||!t.length)return null;const e=this.fv.clsCommandContainer;if(t.hasClass(e))return t;const n=t.closest(`.${e}`);return n.length?n.first():null}}class M extends D{constructor(t,e){super(t,e),this.selectChangedTriggerMap=new Map,this.inputUnserializer=new P,this.selectChangedTriggerMap.set(this.fv.clsFilteringSubjects,(t=>this.subjectChanged(t))).set(this.fv.clsFilteringProperties,(t=>this.propertyChanged(t))).set(this.fv.clsFilteringCommands,(t=>this.commandChanged(t)))}removeCommand(t){const e=this.getClosestCommandContainer(t);null!==e&&e.remove()}cloneCommand(t){const e=this.getClosestCommandContainer(t);if(null===e)return;const n=this.mainHandler.isCachingEnabled();this.mainHandler.setCachingEnabled(!1);const s=R.J.serializeInputs(e,this.fv,!0),i=this.getCommandTypeWithElement(t),r=this.mainHandler.getEventGroupForFilterSetting(t),o=this.elService.createNewCommandContainer(i,r);this.elService.initCommands(o),new x(Y.getInstance()).unserializeCommand(s,o),e.after(o),this.commandMoved(o),this.mainHandler.setCachingEnabled(n)}moveUpCommand(t){const e=this.getClosestCommandContainer(t);if(null===e)return;if(0!==e.index())return e.prev().before(e),void this.commandMoved(e);const n=this.getClosestConditionBlock(e);null!==n&&null!==this.getClosestConditionBlock(n.parent())&&(n.before(e),this.commandMoved(e))}moveDownCommand(t){const e=this.getClosestCommandContainer(t);if(null===e)return;const n=e.next();if(n.length)return n.after(e),void this.commandMoved(e);const s=this.getClosestConditionBlock(e);null!==s&&null!==this.getClosestConditionBlock(s.parent())&&(s.after(e),this.commandMoved(e))}moveOutCommand(t){const e=this.getClosestCommandContainer(t);if(null===e)return;const n=this.getClosestConditionBlock(e);null!==n&&null!==this.getClosestConditionBlock(n.parent())&&(n.before(e),this.commandMoved(e))}moveInCommand(t){const e=this.getClosestCommandContainer(t);if(null===e)return;const n=e.nextAll(`.${this.fv.clsConditionBlock}`).first();if(!n.length)return;const s=n.find(`> .${this.fv.clsCommands}`).first();s.length&&(s.prepend(e),this.commandMoved(e))}testCommand(t){const e=this.getClosestCommandContainer(t);null!==e&&new B(e,this.fv).test()}removePropertySelect(t){if(!t.length)return;const e=this.getClosestCommandContent(t);if(null===e)return;const n="."+this.fv.clsSelectContainer;t.closest(n).remove(),this.removeCommandSelect(e.find("."+this.fv.clsFilteringCommands))}removeCommandSelect(t){if(null===t||!t.length)return;const e=this.getClosestCommandContainer(t);if(null===e)return;const n=e.find("."+this.fv.clsCommandViews);t.closest("."+this.fv.clsSelectContainer).remove(),this.cacheCommandSettings(n),n.empty(),n.data(this.fv.dataCommandKey,null)}subjectChanged(t){null!==t&&t.length&&this.onChangeIntermediateSelect(t,(t=>this.definitionService.getSubject(t)),((t,e)=>{const n=this.getCommandTypeWithElement(e);return this.definitionService.getPropertySelectForSubject(t,n)}),((t,e)=>{e.hasClass(this.fv.clsFilteringCommands)?this.removeCommandSelect(e):this.removePropertySelect(e),console.warn(`No command is found for the subject "${t}"`)}))}propertyChanged(t){null!==t&&t.length&&this.onChangeIntermediateSelect(t,(t=>t===this.fv.valuePropertyVal?o.createValueProperty(this.fv):this.definitionService.getProperty(t)),((t,e)=>{const n=this.getCommandTypeWithElement(e);if(t===this.fv.valuePropertyVal)return this.createCommandSelectForSelectedSubject(e,n);{const s=this.getClosestSubjectSelect(e);let i=null!==s?s.val():null;return i=null!==i?i.toString():null,this.definitionService.getCommandSelectForProperty(t,n,i)}}),((t,e)=>{this.removeCommandSelect(e),console.warn(`No command is found for the property "${t}"`)}))}commandChanged(t){if(null===t||!t.length)return;const e=this.getClosestCommandContainer(t);if(null===e)return;const n=t.val();if(null===n)return this.removeCommandSelect(t);const s=this.definitionService.getCommand(n.toString());if(null===s)return this.removeCommandSelect(t);const i=e.find("."+this.fv.clsCommandViews);if(!i.length)return void console.warn(`Command views container does not exist for "${s.getKey()}"`);const r=e.find("."+this.fv.clsFilteringProperties),o=e.find("."+this.fv.clsFilteringSubjects),a=r.length?r.val():null,l=o.length?o.val():null,c=this.definitionService.getCommandViews(s.getKey(),null!==a?a.toString():null,null!==l?l.toString():null);this.cacheCommandSettings(i),null===c?(i.empty(),i.data(this.fv.dataCommandKey,s.getKey())):(i.replaceWith(c),this.reloadCommandSettingsFromCache(t)),this.arrangeSubjectValueOptionVisibility(e,s.isNeedSubjectValue()),this.notifyCommandChangeFinished(e)}commandMoved(t){T.c.scrollElementIntoView($("html"),$("body"),t),r.W.flashClosest(t,this.fv.clsCommandContainer)}mouseEnteredSelectContainer(t){this.highlightCommandViewsOf(t,!0)}mouseLeftSelectContainer(t){this.highlightCommandViewsOf(t,!1)}highlightCommandViewsOf(t,e=!0){if(null===t||!t.length)return;const n=this.getClosestCommandContainer(t);if(null===n||!n.length)return;const s=this.getHighlightClassOfSelectContainer(t);if(null===s)return;let i,r=this.fv.clsHighlightedView;n.find(`.${this.fv.clsCommandViews} tr.${s}`).each(((t,n)=>{i=$(n),e?i.addClass(r):i.removeClass(r)}))}getHighlightClassOfSelectContainer(t){if(null===(t=this.getClosestSelectContainer(t)))return null;const e=t.data(this.fv.dataHighlightClass)||null;return null===e?null:e.toString()}getClosestSelectContainer(t){return(t=t.closest(`.${this.fv.clsSelectContainer}`)).length?t:null}getClosestCommandContainer(t){if(null===t||!t.length)return null;const e=t.closest(`.${this.fv.clsCommandContainer}`);return e.length?e:null}getClosestConditionBlock(t){if(null===t||!t.length)return null;const e=t.closest(`.${this.fv.clsConditionBlock}`);return e.length?e:null}arrangeSubjectValueOptionVisibility(t,e){if(null===e||!t.length)return;if(this.getCommandTypeWithElement(t)!==f.ACTION)return;const n=t.find(`.${this.fv.clsCommandOption}.${this.fv.clsCommandOptionPrefix}${b.G.CMD_OPTION_ONLY_MATCHED_ITEMS}`);n.length&&(e?n.removeClass("hidden"):n.addClass("hidden"))}notifyCommandChangeFinished(t){t.trigger(jQuery.Event(A.t.filteringCommandChangeFinished))}onCommandChangeFinished(t){this.elService.prepareCommandContainer($(t.target))}onChangeIntermediateSelect(t,e,n,s){const i=t.val();if(null===i)return;const r=e(i.toString());if(null===r)return;const o=`.${this.fv.clsSelectContainer}`,a=t.closest(o).next(o).find("select"),l=a.length?(a.val()||"").toString():null,c=n(r.getKey(),t);if(null===c)return s(r.getKey(),a),this.arrangeSubjectValueOptionVisibility(this.getClosestCommandContainer(t),!1),void this.notifyCommandChangeFinished(t);this.addNewSelect(t,a,c,l)}addNewSelect(t,e,n,s){const i=n.find("select");let r;for(r of(null!==s?(n.find(`option[value="${s}"]`).length&&i.val(s),e.closest(`.${this.fv.clsSelectContainer}`).replaceWith(n)):t.closest(`.${this.fv.clsSelectContainer}`).after(n),this.selectChangedTriggerMap.keys()))if(i.hasClass(r)){this.selectChangedTriggerMap.get(r)(i);break}}createCommandSelectForSelectedSubject(t,e){if(!t.hasClass(this.fv.clsFilteringSubjects)&&null===(t=this.getClosestSubjectSelect(t)))return null;const n=t.val(),s=null!==n?n.toString():null;return this.definitionService.getCommandSelectForSubject(s,e)}getClosestCommandContent(t){const e=t.closest(`.${this.fv.clsCommandContent}`);return e.length?e:null}getCommandTypeWithElement(t){const e=t.closest("."+this.fv.clsFilter);if(e.length)return e.hasClass(this.fv.clsFilterIf)?f.CONDITION:f.ACTION;const n=t.closest("."+this.fv.clsCommandContainer);return n.length&&n.data(this.fv.dataType)===f.CONDITION?f.CONDITION:f.ACTION}getClosestSubjectSelect(t){const e=t.closest("."+this.fv.clsCommandContent).find("."+this.fv.clsFilteringSubjects).first();return e.length?e:null}cacheCommandSettings(t){if(!this.mainHandler.isCachingEnabled()||!t.length)return;const e=this.getClosestCommandContainer(t);if(null===e)return;if(null===(t.data(this.fv.dataCommandKey)||null))return;const n=Object.assign(Object.assign({},e.data(this.fv.dataCache)||{}),R.J.serializeInputs(t,this.fv,!0));e.data(this.fv.dataCache,n)}reloadCommandSettingsFromCache(t){if(!this.mainHandler.isCachingEnabled()||!t.length)return;const e=this.getClosestCommandContainer(t);if(null===e)return;const n=e.data(this.fv.dataCache)||null;if(null===n)return;const s=e.find("."+this.fv.clsCommandViews);s.length&&this.inputUnserializer.setInputValues(n,s)}}class F extends D{addCommand(t,e=null){if(null===t||!t.length)return;const n=this.mainHandler.getCommandHandler().getCommandTypeWithElement(t);null===e&&(e=this.mainHandler.getEventGroupForFilterSetting(t));const s=this.elService.createNewCommandContainer(n,e);this.getClosestCommandsContainer(t).append(s),this.elService.initCommands(s)}addCondition(t){if(null===t||!t.length)return;const e=this.elService.createNewConditionBlock();this.getClosestCommandsContainer(t).append(e),this.elService.initCommands(e)}removeCondition(t){if(null===t||!t.length)return;const e=`.${this.fv.clsConditionBlock}`,n=t.closest(e);n.parent().closest(e).length?n.remove():n.find(`${e}, .${this.fv.clsCommands}`).empty()}conditionOperatorChanged(t){null!==t&&t.length&&t.closest(`.${this.fv.clsConditionBlock}`).attr("data-type",t.val().toString())}getClosestCommandsContainer(t){return t.parent().parent().find(`> .${this.fv.clsCommands}`)}}class U{constructor(t){this.descriptionCalculationMap=null,this.fv=t}summarize(t){if(null===t||!t.length)return null;if(t.hasClass(this.fv.clsFilterContainer)||(t=t.closest(`.${this.fv.clsFilterContainer}`)),!t.length)return null;const e=t.find(`> .${this.fv.clsFilterIf}`).first(),n=t.find(`> .${this.fv.clsFilterThen}`).first(),s=$(`<div class="${this.fv.clsFilterSummaryContainer}" />`);return s.append(this.summarizeFilterIf(e)),s.append(this.summarizeFilterThen(n)),s}summarizeFilterIf(t){if(null===t||!t.length)return null;const e=t.find(`> .${this.fv.clsConditionBlock}`).first();return null!==e&&e.length?$(`<div class="${this.fv.clsFilterSummary} ${this.fv.clsFilterIfSummary}" />`).append(this.summarizeFilterHeader(t)).append(this.summarizeCondition(e)):null}summarizeFilterThen(t){if(null===t||!t.length)return null;const e=$(`<div class="${this.fv.clsFilterSummary} ${this.fv.clsFilterThenSummary}" />`).append(this.summarizeFilterHeader(t));return t.find(`> .${this.fv.clsCommands} > div`).each(((t,n)=>{e.append(this.summarizeCommand($(n)))})),e}summarizeFilterHeader(t){return $(`<div class="${this.fv.clsFilterHeaderSummary}" />`).append(this.summarizeSelect(t.find(`.${this.fv.clsFilterHeader}`),this.fv.clsFilteringEvents))}summarizeCondition(t){if(null===t||!t.length)return null;const e="data-"+this.fv.dataType,n=t.attr(e);if(null===n||!n.length)return null;const s=$(`<div class="${this.fv.clsConditionSummary}" ${e}="${n}" />`);let i;return t.find(`> .${this.fv.clsCommands} > div`).each(((t,e)=>{i=$(e),i.hasClass(this.fv.clsCommandContainer)?s.append(this.summarizeCommand(i)):i.hasClass(this.fv.clsConditionBlock)&&s.append(this.summarizeCondition(i))})),s}summarizeCommand(t){return null!==t&&t.length?$(`<div class="${this.fv.clsCommandSummary}" />`).append($(`<div class="${this.fv.clsCommandDefinitionSummary}" />`).append(this.summarizeSelect(t,this.fv.clsFilteringSubjects)).append(this.summarizeSelect(t,this.fv.clsFilteringProperties)).append(this.summarizeSelect(t,this.fv.clsFilteringCommands))).append(this.summarizeCommandSettings(t)):null}summarizeSelect(t,e){if(null===t||!t.length)return null;const n=t.find("."+e).first();if(!n.length)return null;const s=this.getSelectedOptionName(n);return null!==s&&s.length?$(`<span class="${e}-summary">${s}</span>`):null}getSelectedOptionName(t){if(null===t||!t.length)return null;const e=t.find("option:selected");return e.length?e.text().trim():null}summarizeCommandSettings(t){const e=t.find(`.${this.fv.clsCommandViews} .${m.$.getInstance().clsWccSettings}`).find("> tbody > tr, > tr");if(!e.length)return null;const n=$(`<div class="${this.fv.clsCommandSettingsSummary} hidden" />`);let s;return e.each(((t,e)=>{s=this.summarizeCommandSettingRow($(e)),null!==s&&n.append(s)})),n.length?n:null}summarizeCommandSettingRow(t){const e=t.find("> td:nth-child(2)");if(!e.length)return null;const n=t.find("> td:first-child label");if(!n.length)return null;const s=n.text();if(null===s||!s.length)return null;if(!e.find(".wcc-add-new").length){const t=this.getInputDescription(e.find(":input").first());return null===t?null:this.createInputSummaryElement(s,t)}const i=e.find(".input-group");let r,o=$("<ol />");return i.each(((t,e)=>{r=this.summarizeAllInputsInElement($(e)),null!==r&&o.append($("<li />").append(r))})),o=o.find("li:first-child").length?o:null,this.createInputSummaryElement(s,o)}summarizeAllInputsInElement(t){if(null===t||!t.length)return null;let e;const n=t.find(":input").map(((t,n)=>(e=this.createInputSummary($(n)),null!==e?e[0]:null)));return n.length?n:null}createInputSummary(t){const e=t.attr("id")||null;if(null===e)return null;let n;const s=$(`label[for="${e}"]`);if(s.length?n=s.text()||null:(n=t.attr("placeholder")||null,null!==n&&n.length||(n=t.attr("title")||null),null!==n&&n.length||(n=t.data("original-title")||null)),null===(n||null)||!n.length)return null;const i=this.getInputDescription(t);return null!==i&&i.length?this.createInputSummaryElement(n,i):null}getInputDescription(t){null===this.descriptionCalculationMap&&(this.descriptionCalculationMap=(new Map).set("select",(t=>this.getDescriptionForSelect(t))).set("input",(t=>this.getDescriptionForInput(t))).set("textarea",(t=>t.val().toString())));const e=t[0].tagName.toLowerCase();if(!this.descriptionCalculationMap.has(e))return null;const n=this.descriptionCalculationMap.get(e)(t);return"input"===e&&"checkbox"===t.attr("type")?n:T.c.escapeHtml(n)}getDescriptionForInput(t){let e;return e="checkbox"===t.attr("type")?T.c.getCheckboxValue(t)?'<span class="dashicons dashicons-yes"></span>':'<span class="dashicons dashicons-no"></span>':t.val().toString(),e}getDescriptionForSelect(t){if(null===t.val())return"-";const e=t.find("option").filter(":selected");if(!e.length)return"-";const n=[];let s;return e.each(((t,e)=>{s=$(e).text()||null,null!==s&&n.push(s)})),n.length?n.join(", "):"-"}createInputSummaryElement(t,e){null===U.$inputSummaryPrototype&&(U.$inputSummaryPrototype=$(`<div class="${this.fv.clsInputSummary}">\n                <div class="${this.fv.clsInputSummaryName}"></div>\n                <div class="${this.fv.clsInputSummaryValue}"></div>\n            </div>`));const n=U.$inputSummaryPrototype.clone();n.find(`> .${this.fv.clsInputSummaryName}`).html(t.trim());const s=n.find(`> .${this.fv.clsInputSummaryValue}`);return"string"==typeof e?s.html(this.maybeCrop(e)):s.append(e),n}maybeCrop(t){return null!==t&&t.length?((t=t.trim()).length>U.maxValueLength&&(t=t.substring(0,U.maxValueLength-3)+"..."),t):t}}U.$inputSummaryPrototype=null,U.maxValueLength=50;class H extends D{addFilter(t){if(null===t||!t.length)return;const e=this.mainHandler.getEventGroupForFilterSetting(t),n=this.elService.createFilterContainer(e);t.closest("."+this.fv.clsActions).before(n),this.elService.initCommands(n),this.sortableHandler.initializeForContainer(n)}toggleFilterCollapse(t){if(null===t||!t.length)return;const e=this.getClosestFilterContainer(t);null!==e&&(e.hasClass(this.fv.clsFilterCollapsed)?this.expandFilter(e):this.collapseFilter(e))}toggleCommandSummarySettings(t){r.W.toggleCommandSummarySettings(this.fv,t)}toggleAllCommandSummaries(t){if(null===t||!t.length)return;const e=this.getClosestFilterContainer(t);if(null===e)return;const n=e.find(`.${this.fv.clsFilterSummaryContainer}`).first();if(!n.length)return;const s=n.find(`.${this.fv.clsCommandSettingsSummary}`),i="hidden",r=e.hasClass(this.fv.clsCommandSummariesExpanded);r?(s.addClass(i),e.removeClass(this.fv.clsCommandSummariesExpanded)):(s.removeClass(i),e.addClass(this.fv.clsCommandSummariesExpanded)),new L.w(e,this.fv).setSummaryExpanded(!r)}cloneFilter(t){if(null===t||!t.length)return;const e=this.getClosestFilterContainer(t);if(null===e)return;const n=this.mainHandler.isCachingEnabled();this.mainHandler.setCachingEnabled(!1);const s=new R.J(this.fv,this.elService).serializeFilterContainer(e),i=Y.getInstance(),r=i.getFilterSettingConfig(t),o=this.elService.createFilterContainer(r?r.getEventGroup():null);new x(i).unserializeFilter(s,o),e.after(o),this.filterMoved(o),this.mainHandler.setCachingEnabled(n)}toggleFilterSideBySide(t){if(null===t||!t.length)return;const e=this.getClosestFilterContainer(t);if(null===e)return;const n=e.hasClass(this.fv.clsSideBySide);T.c.toggleClassConditionally(e,this.fv.clsSideBySide,!n),new L.w(e,this.fv).setSideBySide(!n)}toggleFilterEnabled(t){if(null===t||!t.length)return;const e=this.getClosestFilterContainer(t);if(null===e)return;const n=e.hasClass(this.fv.clsFilterDisabled);T.c.toggleClassConditionally(e,this.fv.clsFilterDisabled,!n),new L.w(e,this.fv).setEnabled(n)}moveUpFilter(t){if(null===t||!t.length)return;const e=this.getClosestFilterContainer(t);null!==e&&0!==e.index()&&(e.prev().before(e),this.filterMoved(e))}moveDownFilter(t){if(null===t||!t.length)return;const e=this.getClosestFilterContainer(t);if(null===e)return;const n=e.next(`.${this.fv.clsFilterContainer}`);n.length&&(n.after(e),this.filterMoved(e))}removeFilter(t){if(null===t||!t.length)return;const e=t.closest("."+this.fv.clsFilterContainer);if(1===e.closest("."+this.fv.clsFilters).find(`> .${this.fv.clsFilterContainer}`).length)return e.hasClass(this.fv.clsFilterCollapsed)&&(this.expandFilter(e),new L.w(e,this.fv).setSummaryExpanded(!1)),this.mainHandler.getConditionHandler().removeCondition(e.find(`.${this.fv.clsFilterIf} > .${this.fv.clsConditionBlock} > .${this.fv.clsActionContainer} .${this.fv.clsRemoveCondition}`).first()),e.find(`.${this.fv.clsFilterThen} > .${this.fv.clsCommands}`).empty(),e.find(`.${this.fv.clsInputFilterTitle}`).val(""),void e.find("select").each(((t,e)=>{e.selectedIndex=0;const n=$(e);n.hasClass(this.fv.clsConditionOperator)&&n.trigger("change")}));e.remove()}expandFilter(t){null!==t&&t.length&&(t.find(`> .${this.fv.clsFilterSummaryContainer}`).remove(),t.find(`.${this.fv.clsFilterOptions} [disabled]`).removeAttr("disabled"),t.removeClass(this.fv.clsFilterCollapsed).removeClass(this.fv.clsCommandSummariesExpanded),new L.w(t,this.fv).setFilterCollapsed(!1))}collapseFilter(t){if(null===t||!t.length)return;const e=t.find(`> .${this.fv.clsFilter}`).first();if(null===e||!e.length)return;const n=new U(this.fv).summarize(t);e.before(n),t.find(`.${this.fv.clsFilterOptions} input:not([type="hidden"])`).attr("disabled","disabled"),t.addClass(this.fv.clsFilterCollapsed),new L.w(t,this.fv).isSummaryExpanded()&&this.toggleAllCommandSummaries(t),new L.w(t,this.fv).setFilterCollapsed(!0)}getClosestFilterContainer(t){const e=t.closest(`.${this.fv.clsFilterContainer}`);return e.length?e:null}filterMoved(t){T.c.scrollElementIntoView($("html"),$("body"),t),r.W.flashClosest(t,this.fv.clsFilterContainer)}}var G=n(589),V=n(296);class W{constructor(t){this.listenersRegistered=!1,this.cachingEnabled=!0,this.definitionService=t.getDefinitionService(),this.elService=t.getElementService(),this.fv=t.getFilteringVariables(),this.commandHandler=new M(this,t),this.conditionHandler=new F(this,t),this.filterHandler=new H(this,t)}registerListeners(){if(this.listenersRegistered)return;this.listenersRegistered=!0;const t="click",e="change";$(document).on(e,this.fv.selectorInputFilterSettingEnabled,(t=>this.onChangeFilterSettingEnabled(t))).on(t,this.fv.selectorAddNewFilterButton,(t=>this.handle(t,(t=>this.filterHandler.addFilter(t))))).on(t,this.fv.selectorCloneFilterButton,(t=>this.handle(t,(t=>this.filterHandler.cloneFilter(t))))).on(t,this.fv.selectorToggleFilterCollapseButton,(t=>this.handle(t,(t=>this.filterHandler.toggleFilterCollapse(t))))).on(t,this.fv.selectorToggleFilterSideBySideButton,(t=>this.handle(t,(t=>this.filterHandler.toggleFilterSideBySide(t))))).on(t,this.fv.selectorToggleFilterEnabledButton,(t=>this.handle(t,(t=>this.filterHandler.toggleFilterEnabled(t))))).on(t,this.fv.selectorMoveUpFilterButton,(t=>this.handle(t,(t=>this.filterHandler.moveUpFilter(t))))).on(t,this.fv.selectorMoveDownFilterButton,(t=>this.handle(t,(t=>this.filterHandler.moveDownFilter(t))))).on(t,this.fv.selectorRemoveFilterButton,(t=>this.handle(t,(t=>this.filterHandler.removeFilter(t))))).on(t,this.fv.selectorCommandDefinitionSummary,(t=>this.handle(t,(t=>this.filterHandler.toggleCommandSummarySettings(t))))).on(t,this.fv.selectorToggleCmdSummariesBtn,(t=>this.handle(t,(t=>this.filterHandler.toggleAllCommandSummaries(t))))).on(t,this.fv.selectorAddCommandButton,(t=>this.handle(t,(t=>this.conditionHandler.addCommand(t))))).on(t,this.fv.selectorAddConditionButton,(t=>this.handle(t,(t=>this.conditionHandler.addCondition(t))))).on(t,this.fv.selectorRemoveConditionButton,(t=>this.handle(t,(t=>this.conditionHandler.removeCondition(t))))).on(e,this.fv.selectorOperatorSelect,(t=>this.handle(t,(t=>this.conditionHandler.conditionOperatorChanged(t))))).on(t,this.fv.selectorRemoveCommandButton,(t=>this.handle(t,(t=>this.commandHandler.removeCommand(t))))).on(t,this.fv.selectorCloneCommandButton,(t=>this.handle(t,(t=>this.commandHandler.cloneCommand(t))))).on(t,this.fv.selectorMoveUpCommandButton,(t=>this.handle(t,(t=>this.commandHandler.moveUpCommand(t))))).on(t,this.fv.selectorMoveDownCommandButton,(t=>this.handle(t,(t=>this.commandHandler.moveDownCommand(t))))).on(t,this.fv.selectorMoveOutCommandButton,(t=>this.handle(t,(t=>this.commandHandler.moveOutCommand(t))))).on(t,this.fv.selectorMoveInCommandButton,(t=>this.handle(t,(t=>this.commandHandler.moveInCommand(t))))).on(t,this.fv.selectorTestCommandButton,(t=>this.handle(t,(t=>this.commandHandler.testCommand(t))))).on(e,this.fv.selectorFilteringSubjectsSelect,(t=>this.handle(t,(t=>this.commandHandler.subjectChanged(t))))).on(e,this.fv.selectorFilteringPropertiesSelect,(t=>this.handle(t,(t=>this.commandHandler.propertyChanged(t))))).on(e,this.fv.selectorFilteringCommandsSelect,(t=>this.handle(t,(t=>this.commandHandler.commandChanged(t))))).on(A.t.filteringCommandChangeFinished,null,(t=>this.commandHandler.onCommandChangeFinished(t))).on("mouseenter",this.fv.selectorFilteringSelectContainer,(t=>this.handle(t,(t=>this.commandHandler.mouseEnteredSelectContainer(t))))).on("mouseleave",this.fv.selectorFilteringSelectContainer,(t=>this.handle(t,(t=>this.commandHandler.mouseLeftSelectContainer(t))))),V.H.getInstance().registerPortableSetting(this.createPortableSetting())}setCachingEnabled(t){this.cachingEnabled=t}isCachingEnabled(){return this.cachingEnabled}getEventGroupForFilterSetting(t){const e=Y.getInstance().getFilterSettingConfig(t);return null!==e?e.getEventGroup():null}onChangeFilterSettingEnabled(t){const e=$(t.target).closest(`.${this.fv.clsInputFilterSettingEnabled}`);if(!e.length)return;const n=e.closest(`.${this.fv.clsFilters}`);if(!n.length)return;const s=T.c.getCheckboxValue(e),i=this.fv.clsFilterSettingDisabled;s?n.removeClass(i):n.addClass(i)}handle(t,e){t.preventDefault(),e($(t.target))}createPortableSetting(){const t=this.fv;return new class extends G.s{isSuitable(e,n){return e.closest(`.${t.clsFilterSetting}`).length>0}getExportDescription(){return window.wpcc.export_filter_description}getImportDescription(){return window.wpcc.import_filter_description}getImportPlaceholder(){return window.wpcc.import_filter_placeholder}onExport(t){try{return Y.getInstance().updateFilterValueInput(t)}catch(t){console.error(t)}return null}onImport(e,n){try{new x(Y.getInstance()).unserialize(n.find(`.${t.clsFilters}`),JSON.parse(e),!1)}catch(t){console.error(t)}}}}getFilterHandler(){return this.filterHandler}getConditionHandler(){return this.conditionHandler}getCommandHandler(){return this.commandHandler}}class j{constructor(t){this.initialized=!1,this.sortableConfig=null,this.fv=t}initialize(){this.initialized||(this.initialized=!0,this.initializeForContainer($(`.${this.fv.clsFilters}`)))}initializeForContainer(t){E.I.getInstance().isSortableAvailable()&&t.find(`.${this.fv.clsCommands}`).sortable(this.getSortableConfig())}getSortableConfig(){if(null===this.sortableConfig){const t=`.${this.fv.clsCommandContainer}, .${this.fv.clsConditionBlock}`;this.sortableConfig={placeholder:"sortable-placeholder",handle:`> .${this.fv.clsActionContainer} .${this.fv.clsFilterSort}`,items:t,connectWith:t,axis:"y",cursor:"move",start:(t,e)=>{e.placeholder.height(e.helper.outerHeight()-2)},update:(t,e)=>{}}}return this.sortableConfig}}class K{constructor(t){this.eventGroup=t}getEventGroup(){return this.eventGroup}static fromObject(t){return new K(t.eventGroup||null)}}class Y{constructor(){this.elService=null,this.eventHandler=null,this.sortableHandler=null,this.fv=new i.D,this.definitionService=new v(this.fv,(()=>this.init()))}static getInstance(){return s.u.getInstance().get("FilteringService",(()=>new Y))}updateFilterValueInputs(){$(`.${this.fv.clsFilterSetting}`).each(((t,e)=>{this.updateFilterValueInput($(e))}))}updateFilterValueInput(t){const e=t.find(`.${this.fv.clsSerializedInput}`);if(!e.length)return null;if(t.find(`.${this.fv.clsFiltersLoading}`).length)return;const n=new R.J(this.fv,this.elService),s=JSON.stringify(n.serialize(t.find("."+this.fv.clsFilters).first()));return e.val(s),s}detachAllInputNames(){return this.forEachFilterContainer((t=>new L.w(t,this.fv).detachInputNames())),this}reattachAllInputNames(){return this.forEachFilterContainer((t=>new L.w(t,this.fv).reattachInputNames())),this}init(){null!==this.definitionService.getDefinition()&&(this.elService=new y(this.definitionService,this.fv,(()=>this.eventHandler)),this.sortableHandler=new j(this.fv),this.eventHandler=new W(this),this.eventHandler.registerListeners(),$(`.${this.fv.clsFilterSetting}`).each(((t,e)=>this.initializeFilterSetting($(e)))),this.sortableHandler.initialize())}initializeFilterSetting(t){const e=t.find(`.${this.fv.clsSerializedInput}`);if(!e.length)return;const n=t.find(`.${this.fv.clsFiltersLoading}`);if(!n.length)return;const s=this.getFilterSettingConfig(t),i=this.elService.createFilters(s?s.getEventGroup():null);n.replaceWith(i),this.elService.initCommands(i);const r=e.val().toString(),o=r.length?JSON.parse(r):null;null!==o&&new x(this).unserialize(i,o)}getFilterSettingConfig(t){const e=t.closest(`.${this.fv.clsFilterSetting}`);if(!e.length)return null;let n=e.data(this.fv.dataFilterConfigCache)||null;return null===n&&(n=K.fromObject(e.data(this.fv.dataFilterConfig)||{}),e.data(this.fv.dataFilterConfigCache,n)),n}forEachFilterContainer(t){$(`.${this.fv.clsFilterSetting} .${this.fv.clsFilters} > .${this.fv.clsFilterContainer}`).each(((e,n)=>t($(n))))}getElementService(){return this.elService}getEventHandler(){return this.eventHandler}getFilteringVariables(){return this.fv}getSortableHandler(){return this.sortableHandler}getDefinitionService(){return this.definitionService}}},401:(t,e,n)=>{"use strict";n.d(e,{D:()=>i});var s=n(545);class i{constructor(){this.clsFilters="wpcc-filters",this.clsInputFilterSettingEnabled="input-filter-setting-enabled",this.clsFilterSettingDisabled="filter-setting-disabled",this.clsFilterOperations="filter-operations",this.clsFilterOptions="filter-options",this.clsFilterTitle="filter-title",this.clsInputFilterTitle="input-filter-title",this.clsInputFilterEnabled="input-filter-enabled",this.clsInputFilterCollapsed="input-filter-collapsed",this.clsInputSummaryExpanded="input-summary-expanded",this.clsInputSideBySide="input-side-by-side",this.clsButtonAddFilter="add-new-filter",this.clsFilterContainer="filter-container",this.clsActions="actions",this.clsActionContainer="action-container",this.clsFilterActions="filter-actions",this.clsConditionBlock="condition-block",this.clsCommands="commands",this.clsRemoveCommand="remove-command",this.clsRemoveCondition="remove-condition",this.clsRemoveFilter="remove-filter",this.clsToggleFilterCollapse="collapse-filter",this.clsFilterToggleEnabled="wpcc-filter-toggle-enabled",this.clsFilterToggleSideBySide="wpcc-filter-toggle-sbs",this.clsFilterMoveUp="wpcc-filter-move-up",this.clsFilterMoveDown="wpcc-filter-move-down",this.clsFilterClone="wpcc-filter-clone",this.clsCommandContainer="command-container",this.clsConditionOperator="condition-operator",this.clsFilteringEvents="filtering-events",this.clsFilteringSubjects="filtering-subjects",this.clsFilteringProperties="filtering-properties",this.clsFilteringCommands="filtering-commands",this.clsCommandContent="command-content",this.clsSelectContainer="select-container",this.clsFilter="filter",this.clsFilterCollapsed="filter-collapsed",this.clsFilterHeader="filter-header",this.clsFilterIf="filter-if",this.clsFilterThen="filter-then",this.clsCommandViews="command-views",this.clsSubjectView="subject-view",this.clsPropertyView="property-view",this.clsCommandView="command-view",this.clsShowTestViews="show-test-views",this.clsTestView="test-view",this.clsTestCommandContainer="test-cmd-container",this.clsTestCommand="test-cmd",this.clsCommandOptions="command-options",this.clsCommandOption="command-option",this.clsCommandOptionPrefix="command-option-",this.clsCheckboxOption="checkbox-option",this.clsAddContainer="add-container",this.clsButtonFilterAdd="filter-add",this.clsButtonAddCommand="command",this.clsButtonAddCondition="condition",this.clsBlockActions="block-actions",this.clsBlockOptions="block-options",this.clsCommandButtons="command-buttons",this.clsFilterSort="wpcc-filter-sort",this.clsCommandClone="wpcc-command-clone",this.clsCommandMoveUp="wpcc-command-move-up",this.clsCommandMoveDown="wpcc-command-move-down",this.clsCommandMoveIn="wpcc-command-move-in",this.clsCommandMoveOut="wpcc-command-move-out",this.clsHasNoSettingViews="has-no-setting-views",this.clsHasTestViews="has-test-views",this.clsHighlightedView="highlighted-view",this.dataSubjectKey="subject-key",this.dataPropertyKey="property-key",this.dataCommandKey="command-key",this.dataCache="cache",this.dataType="type",this.clsFilterSettingSummaryContainer="filter-setting-summary-container",this.clsFilterSummaryContainer="filter-summary-container",this.clsFilterExplanationContainer="filter-exp-container",this.clsFilterSummary="filter-summary",this.clsFilterHeaderSummary="filter-header-summary",this.clsFilterIfSummary="filter-if-summary",this.clsFilterThenSummary="filter-then-summary",this.clsConditionSummary="condition-summary",this.clsCommandSummary="command-summary",this.clsCommandDefinitionSummary="command-def-summary",this.clsExecutionSummary="exec-summary",this.clsUsedMemory="used-memory",this.clsElapsedTime="elapsed-time",this.clsExecuted="executed",this.clsCheckResult="check-result",this.clsUsage="usage",this.clsCommandSettingsSummary="command-settings-summary",this.clsInputSummary="input-summary",this.clsInputSummaryName="input-summary-name",this.clsInputSummaryValue="input-summary-value",this.clsToggleCommandSummaries="toggle-cmd-summaries",this.clsCommandSummariesExpanded="cmd-summaries-expanded",this.clsSummaryButton="summary-button",this.clsSideBySide="side-by-side",this.clsFilterDisabled="filter-disabled",this.clsFilterDisabledPrefix="filter-disabled-prefix",this.clsCommandDescriptionContainer="cmd-desc-container",this.clsItemDescriptionContainer="item-desc-container",this.clsItemName="item-name",this.clsItemDescription="item-desc",this.selectorFiltersContainer=`.${this.clsFilters}`,this.selectorActionsContainer=`${this.selectorFiltersContainer} .${this.clsActions}`,this.selectorInputFilterSettingEnabled=`${this.selectorActionsContainer} .${this.clsInputFilterSettingEnabled}`,this.selectorAddNewFilterButton=`${this.selectorFiltersContainer} .add-new-filter`,this.selectorAddContainer=`${this.selectorFiltersContainer} .${this.clsAddContainer}`,this.selectorAddCommandButton=`${this.selectorAddContainer} .command`,this.selectorAddConditionButton=`${this.selectorAddContainer} .condition`,this.selectorOperatorSelect=`${this.selectorFiltersContainer} .${this.clsConditionOperator}`,this.selectorRemoveCommandButton=`${this.selectorFiltersContainer} .${this.clsRemoveCommand}`,this.selectorRemoveConditionButton=`${this.selectorFiltersContainer} .${this.clsRemoveCondition}`,this.selectorToggleFilterCollapseButton=`${this.selectorFiltersContainer} .${this.clsToggleFilterCollapse}`,this.selectorRemoveFilterButton=`${this.selectorFiltersContainer} .${this.clsRemoveFilter}`,this.selectorCloneFilterButton=`${this.selectorFiltersContainer} .${this.clsFilterClone}`,this.selectorToggleFilterSideBySideButton=`${this.selectorFiltersContainer} .${this.clsFilterToggleSideBySide}`,this.selectorToggleFilterEnabledButton=`${this.selectorFiltersContainer} .${this.clsFilterToggleEnabled}`,this.selectorMoveUpFilterButton=`${this.selectorFiltersContainer} .${this.clsFilterMoveUp}`,this.selectorMoveDownFilterButton=`${this.selectorFiltersContainer} .${this.clsFilterMoveDown}`,this.selectorFilteringSubjectsSelect=`${this.selectorFiltersContainer} .${this.clsFilteringSubjects}`,this.selectorFilteringPropertiesSelect=`${this.selectorFiltersContainer} .${this.clsFilteringProperties}`,this.selectorFilteringCommandsSelect=`${this.selectorFiltersContainer} .${this.clsFilteringCommands}`,this.selectorFilteringSelectContainer=`${this.selectorFiltersContainer} .${this.clsCommandContainer} .${this.clsCommandContent} .${this.clsSelectContainer}`,this.selectorCloneCommandButton=`${this.selectorFiltersContainer} .${this.clsCommandClone}`,this.selectorMoveUpCommandButton=`${this.selectorFiltersContainer} .${this.clsCommandMoveUp}`,this.selectorMoveDownCommandButton=`${this.selectorFiltersContainer} .${this.clsCommandMoveDown}`,this.selectorMoveInCommandButton=`${this.selectorFiltersContainer} .${this.clsCommandMoveIn}`,this.selectorMoveOutCommandButton=`${this.selectorFiltersContainer} .${this.clsCommandMoveOut}`,this.selectorTestCommandButton=`${this.selectorFiltersContainer} .${this.clsTestCommandContainer} .${this.clsTestCommand}`,this.selectorCommandDefinitionSummary=`${this.selectorFiltersContainer} .${this.clsCommandDefinitionSummary}`,this.selectorFilterConditionExecSummary=`${this.selectorFiltersContainer} .${this.clsConditionSummary} > .${this.clsExecutionSummary}`,this.selectorToggleCmdSummariesBtn=`${this.selectorFiltersContainer} .${this.clsToggleCommandSummaries}`,this.valuePropertyVal="-1",this.inputName="_wpcc_filtering",this.clsSerializedInput="filter-serialized-input",this.selectNameEvent=s.G.EVENT,this.selectNameSubject=s.G.SUBJECT,this.selectNameProperty=s.G.PROPERTY,this.selectNameCommand=s.G.COMMAND,this.clsFiltersLoading="filters-loading",this.clsFilterSetting="filter-setting",this.clsPageFilter="page-filter",this.clsRequestFilter="request-filter",this.dataFilterConfig="config",this.dataFilterConfigCache="config-cache",this.dataHighlightClass="highlight-cls"}}},545:(t,e,n)=>{"use strict";var s;n.d(e,{G:()=>s}),function(t){t.TYPE="type",t.TYPE_COMMAND="command",t.TYPE_CONDITION="condition",t.ITEMS="items",t.OPTIONS="options",t.CONFIG="config",t.OPERATOR="operator",t.COMMAND="command",t.EVENT="event",t.SUBJECT="subject",t.PROPERTY="property",t.TITLE="title",t.FILTER_IF="filterIf",t.FILTER_THEN="filterThen",t.FILTER_COLLAPSED="filterCollapsed",t.SUMMARY_EXPANDED="summaryExpanded",t.SIDE_BY_SIDE="sideBySide",t.CMD_OPTION_STOP_AFTER_FIRST_MATCH="stopAfterFirstMatch",t.CMD_OPTION_ONLY_MATCHED_ITEMS="onlyMatchedItems",t.CONFIG_ENABLED="enabled"}(s||(s={}))},152:(t,e,n)=>{"use strict";var s;n.d(e,{b:()=>s}),function(t){t.FILTERS="filters",t.OPTIONS="options",t.ENABLED="enabled"}(s||(s={}))},444:(t,e,n)=>{"use strict";n.d(e,{w:()=>s});class s{constructor(t,e){this.$container=t,this.fv=e}isFilterCollapsed(){return"1"===this.$container.find(`.${this.fv.clsInputFilterCollapsed}`).val()}setFilterCollapsed(t){this.$container.find(`.${this.fv.clsInputFilterCollapsed}`).val(t?"1":"0")}isSummaryExpanded(){return"1"===this.$container.find(`.${this.fv.clsInputSummaryExpanded}`).val()}setSummaryExpanded(t){this.$container.find(`.${this.fv.clsInputSummaryExpanded}`).val(t?"1":"0")}isEnabled(){return"1"===this.$container.find(`.${this.fv.clsInputFilterEnabled}`).val()}setEnabled(t){this.$container.find(`.${this.fv.clsInputFilterEnabled}`).val(t?"1":"0")}isSideBySide(){return"1"===this.$container.find(`.${this.fv.clsInputSideBySide}`).val()}setSideBySide(t){this.$container.find(`.${this.fv.clsInputSideBySide}`).val(t?"1":"0")}detachInputNames(){let t;this.$container.find(":input[name]").each(((e,n)=>{t=$(n),t.attr("data-name",t.attr("name")),t.removeAttr("name")}))}reattachInputNames(){let t;this.$container.find(":input[data-name]").each(((e,n)=>{t=$(n),t.attr("name",t.attr("data-name")),t.removeAttr("data-name")}))}}},852:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var s=n(545),i=n(444),r=n(152);class o{constructor(t,e){this.fv=t,this.elService=e}serialize(t){if(null===t)return void console.warn("Filters container must not be null.");const e=[];t.find(`> .${this.fv.clsFilterContainer}`).each(((t,n)=>{e.push(this.serializeFilterContainer($(n)))}));const n={};return n[r.b.FILTERS]=e,n[r.b.OPTIONS]=this.serializeSettingOptions(t),n}serializeSettingOptions(t){const e=t.find(`.${this.fv.clsActions}`);return o.serializeInputs(e,this.fv,!0)}serializeFilterContainer(t){const e={},n={};this.reattachInputNames(t),this.setOptionValue(t,e,s.G.TITLE,this.fv.clsInputFilterTitle),this.setOptionValue(t,e,s.G.FILTER_COLLAPSED,this.fv.clsInputFilterCollapsed),this.setOptionValue(t,e,s.G.SUMMARY_EXPANDED,this.fv.clsInputSummaryExpanded),this.setOptionValue(t,e,s.G.SIDE_BY_SIDE,this.fv.clsInputSideBySide),e[s.G.CONFIG]=n,this.setOptionValue(t,n,s.G.CONFIG_ENABLED,this.fv.clsInputFilterEnabled),e[s.G.FILTER_IF]=this.serializeConditionBlock(t.find(`> .${this.fv.clsFilterIf} > .${this.fv.clsConditionBlock}`));const i=[];let r;return t.find(`> .${this.fv.clsFilterThen} > .${this.fv.clsCommands} > .${this.fv.clsCommandContainer}`).each(((t,e)=>{r=this.serializeCommandContainer($(e)),null!==r&&i.push(r)})),e[s.G.FILTER_THEN]={},e[s.G.FILTER_THEN][s.G.ITEMS]=i,e[s.G.FILTER_THEN][s.G.OPTIONS]={},e[s.G.FILTER_IF][s.G.OPTIONS][s.G.EVENT]=this.getSelectedEvent(t,this.fv.clsFilterIf),e[s.G.FILTER_THEN][s.G.OPTIONS][s.G.EVENT]=this.getSelectedEvent(t,this.fv.clsFilterThen),e}reattachInputNames(t){new i.w(t,this.fv).reattachInputNames()}getSelectedEvent(t,e){const n=t.find(`> .${e} select.${this.fv.clsFilteringEvents}`);if(!n.length)return"";const s=n.val();return null===s?"":s.toString()}serializeConditionBlock(t){const e={};let n,i;return e[s.G.OPTIONS]=o.serializeInputs(t.find(`> .${this.fv.clsBlockOptions}`),this.fv),e[s.G.ITEMS]=[],t.find(`> .${this.fv.clsCommands}`).find(`> .${this.fv.clsCommandContainer}, > .${this.fv.clsConditionBlock}`).each(((t,r)=>{n=$(r),n.hasClass(this.fv.clsCommandContainer)?(i=this.serializeCommandContainer(n),i[s.G.TYPE]=s.G.TYPE_COMMAND):n.hasClass(this.fv.clsConditionBlock)&&(i=this.serializeConditionBlock(n),i[s.G.TYPE]=s.G.TYPE_CONDITION),null!=i&&e[s.G.ITEMS].push(i)})),e}serializeCommandContainer(t){return this.elService.prepareCommandContainer(t),o.serializeInputs(t,this.fv)}setOptionValue(t,e,n,s){const i=t.find("."+s);e[n]=i.length?i.val():""}static serializeInputs(t,e,n=!1){if(null===t||!t.length)return null;const s=t.find(":input").serializeObject();if(n){const e=[];let n,i,r,o;t.find('input[type="checkbox"]:not(:checked)').each(((t,n)=>{e.push($(n).attr("name"))})),e.forEach((t=>{for(n=t.split(/]?\[|]/g),""===n[n.length-1]&&n.splice(-1,1),o=s,r=n.length,i=0;i<r-1;i++)if(o.hasOwnProperty(n[i])||(o[n[i]]={}),o=o[n[i]]||null,null===o)return;o[n[r-1]]=!1}))}const i=s[e.inputName]||null;return null===i?null:i[Object.keys(i)[0]]}}},938:(t,e,n)=>{"use strict";n.d(e,{W:()=>r});class s{constructor(t,e){this.key=t,this.variables=e||{}}getKey(){return this.key}getVariables(){return this.variables}static fromObject(t){return""===t.viewKey?null:new s(t.viewKey,t.variables)}}var i=n(709);class r{static addViewDefinitions(t,e){let n;for(let i of e)n=s.fromObject(i),null!==n&&t.addView(n)}static addTestViewDefinitions(t,e){let n;for(let i of e)n=s.fromObject(i),null!==n&&t.addTestView(n)}static flashClosest(t,e){if(null===t||!t.length)return;const n=t.closest(`.${e}`);n.length&&this.flashElement(n)}static flashElement(t,e=null){if(null===t||!t.length)return;const n=t.css("backgroundColor");null===e&&(e="rgba(184, 234, 132, 1)"),t.stop().css("transition","none").css("background-color",e).animate({backgroundColor:n},1200,"swing",(()=>{t.css("transition","").css("background-color","")}))}static toggleCommandSummarySettings(t,e){if(null===e||!e.length)return;const n=e.closest(`.${t.clsCommandSummary}`).find(`.${t.clsCommandSettingsSummary}`).first();if(!n.length)return;const s="hidden";n.hasClass(s)?n.removeClass(s):n.addClass(s)}static createItemDescriptionView(t){if(null===t||null===t.getDescription())return null;const e=i.T.getInstance().getFilteringVariables(),n=$(`<div class="${e.clsItemDescriptionContainer}"></div>`),s=t.getName();return null!==s&&n.append($(`<span class="${e.clsItemName}">${s}</span>`)),n.append($(`<span class="${e.clsItemDescription}">${t.getDescription()}</span>`)),n}static createDashiconButtonHtml(t,e,n){return this.createButtonHtml(t,e,`<span class="dashicons dashicons-${n}"></span>`)}static createFontAwesomeButtonHtml(t,e,n,s=null){return s=null===s?"":` ${s}`,this.createButtonHtml(t,e,`<i class="fas fa-${n}">${s}</i>`)}static createButtonHtml(t,e,n){return`<div class="button ${t}" ${null!==e?`title="${e}"`:""}>${n}</div>`}}},685:(t,e,n)=>{"use strict";n.d(e,{$:()=>s});class s{constructor(){this.clsWccSettings="wcc-settings",this.selectorContainerMetaBox=".wcc-settings-meta-box",this.selectorContainerTabs=".wcc-settings-meta-box > .nav-tab-wrapper",this.selectorAdminBar="#wpadminbar",this.$containerMetaBox=$(this.selectorContainerMetaBox),this.$containerTabs=$(this.selectorContainerTabs),this.$form=$("#post"),this.$errorAlert=$("#wcc-alert"),this.$wccNonce=$("#wcc_nonce"),this.$adminBar=$(this.selectorAdminBar),this.postId=parseInt(this.$containerMetaBox.data("post-id")||"-1"),this.clsInputs="inputs",this.clsInputGroup="input-group",this.clsAddNew="wcc-add-new",this.clsSectionTitle="section-title",this.clsTab="tab",this.clsTabHidden="hidden",this.selectorCategoryMap="#category-map",this.selectorTabMain="#tab-main",this.selectorTabPost="#tab-post",this.selectorTabCategory="#tab-category",this.selectorTabGsPost="#tab-gs-post",this.selectorTabGeneralSettings="#tab-general-settings",this.selectorTestButton=".wcc-test",this.selectorInputContainerPasswords=".input-container-passwords",this.selectorLoadGeneralSettingsButton="#btn-load-general-settings",this.selectorClearGeneralSettingsButton="#btn-clear-general-settings",this.selectorInputImport="#_post_import_settings",this.selectorLoadTranslationLanguages=".load-languages",this.selectorClearTranslationLanguages=".clear-languages",this.selectorInputURLHash="input[name='url_hash']",this.inputNameCookies="_cookies",this.baseHtmlManipulationInputNames=["find_replace_raw_html","find_replace_first_load","find_replace_element_attributes","exchange_element_attributes","remove_element_attributes","find_replace_element_html","unnecessary_element_selectors"],this.selectorOriginalTestResults=".original-results",this.selectorButtonSeeUnmodifiedTestResults=this.selectorOriginalTestResults+" .see-unmodified-results",this.selectorInvalidateCacheButton=".invalidate-cache-for-this-url",this.selectorInvalidateAllCachesButton=".invalidate-all-test-url-caches",this.selectorQuickSaveButton=".quick-save-container .quick-save",this.selectorExportSettingsTextArea="#_post_export_settings",this.clsHasError="has-error",this.$inputAction=$("#hiddenaction"),this.infoTextsHidden=!0,this.classFixed="wpcc-fixed",this.selectorFixable=".fixable",this.selectorCheckboxFixTabs="#_fix_tabs",this.selectorCheckboxFixContentNavigation="#_fix_content_navigation",this.clsButtonActive="active",this.clsSettingImportExport="setting-import-export",this.clsSettingImportExportTextarea="setting-import-export-textarea",this.clsButtonSettingImport="setting-import",this.clsButtonSettingExport="setting-export",this.clsSettingImportContainer="setting-import-container",this.clsSettingExportContainer="setting-export-container"}static getInstance(){return null===this.instance&&(this.instance=new s),this.instance}}s.instance=null},45:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>TestDataPreparer});var _common_Notifier__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(305),_PostSettingsVariables__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(685),_common_Utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(730),_common_enum_TabKey__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(644),_common_enum_SettingKey__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(118),_filtering_FilteringService__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(709),_filtering_serialization_FilterSerializer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(852);class TestDataPreparer{constructor(){this.notifier=_common_Notifier__WEBPACK_IMPORTED_MODULE_0__.d.getInstance(),this.psv=_PostSettingsVariables__WEBPACK_IMPORTED_MODULE_1__.$.getInstance(),window.$lastClickedOptionsBoxButton=null}static getInstance(){return null===this.INSTANCE&&(this.INSTANCE=new TestDataPreparer),this.INSTANCE}prepareTestData(t){const e=this.getTestDataFromButton(t);if(null===e)return null;this.addSettingsToAjaxData(e);const n=_filtering_FilteringService__WEBPACK_IMPORTED_MODULE_5__.T.getInstance().getFilteringVariables(),s=t.closest(`.${n.clsFilterSetting}`);s.length&&(s.hasClass(n.clsPageFilter)?e.fromPageFilter="1":s.hasClass(n.clsRequestFilter)&&(e.fromRequestFilter="1"));let i=t.closest(".input-group").find(":input[name]");if(!i.length)return null;const r=this.checkRequiredElements(e);if(null===r)return null;if(this.maybeInjectUrlSelector(e,t),null===this.addSelectorValues(e,r,t))return null;this.addExtra(e),this.addOptionsBoxSettings(e),e.serializedValues=i.serialize();let o=i.first().attr("name");return e.formItemName=/^([^\[]+)/.exec(o)[1]||null,this.addFormItemDotKey(e,o),this.addDataForFindReplaceInCustomMetaOrShortCodeTest(t,e),this.addTranslationOptions(t,e),this.addSpinningOptions(t,e),e}addSettingsToAjaxData(t){if(null==(t=t||null))return void console.error("Test data is null.");this.addManipulationOptionsToAjaxData(t),this.addCookiesSetting(t),this.addRequestHeadersSetting(t),this.addCacheSetting(t);const e=this.addCustomGeneralSettings(t);this.addUseUtf8(t,e)}addTranslationOptions(t,e,n=!1){this.addTransformationOptions(t,e,n,"wcc-test-translation","translation-settings","serializedTranslationOptions")}addSpinningOptions(t,e,n=!1){this.addTransformationOptions(t,e,n,"wcc-test-spinning","spinning-settings","serializedSpinningOptions")}maybeInjectUrlSelector(t,e){let n=t.urlSelector;void 0===n||n.length||(n=this.getTestUrlSelectorWithElement(e),null!==n&&(t.urlSelector=n))}getTestDataFromButton(t){const e=t.data("wcc")||null;if(null===e||!e)return null;let n=null;try{n=JSON.parse(JSON.stringify(e))||null}catch(t){}return null==n||"string"==typeof n?(console.error("Test button data could not be parsed to JSON. Data: ",e),null):n}addFormItemDotKey(t,e){const n=/^[^\[]+(.*?\[(?=[0-9](?=[^0-9]+$)))/.exec(e);if(null===n||!n.length)return;let s=n[1]||"";s.length>1&&(s=s.substr(1,s.length-2).replace(/\]\[/g,".").replace(/\[/g,"").replace(/\]/g,""),t.formItemDotKey=s)}addOptionsBoxSettings(t){null!==window.$lastClickedOptionsBoxButton&&(t.optionsBox=window.$lastClickedOptionsBoxButton.find(":input").first().val(),t.fromOptionsBox=1)}addExtra(t){if(!t.hasOwnProperty("extra"))return;const e=t.extra,n={};let s,i;for(let t in e)e.hasOwnProperty(t)&&(s=e[t],s.hasOwnProperty("selector")&&s.hasOwnProperty("data")&&(i=$(s.selector).data(s.data),null!=i&&"undefined"!==i&&(n[t]=i)));$.isEmptyObject(n)?delete t.extra:t.extra=n}addSelectorValues(t,e,n){let s;for(let i in t){if(!t.hasOwnProperty(i)||!/Selector$/.test(i))continue;if(s=t[i]||null,null===s)continue;let r=null;if(r=Array.isArray(s)?this.findTargetElementWithSelectorRules(n,s):$(s),e&&(null==r.val()||!r.val().length))return this.notifier.notify(r,void 0),null;delete t[i],r.length&&1===r.length&&(t[i.replace("Selector","")]=r.val()||null)}return!0}findTargetElementWithSelectorRules(t,e){if(null===e||!Array.isArray(e)||!e.length)return null;let n,s=t;for(n of e)if(n.hasOwnProperty("closest")?s=s.closest(n.closest):n.hasOwnProperty("find")&&(s=s.find(n.find)),null===s||!s.length)return null;return s}checkRequiredElements(data){let requiredElExpr=data.requiredSelectors;if(void 0===requiredElExpr)return!0;if(!requiredElExpr.length)return!1;requiredElExpr=" "+requiredElExpr.replace(/([()&|])/g," $1 ").replace(/\s{2,}/g," ").replace(/\&/g,"&&").replace(/\|/g,"||").trim()+" ";let selectorMatches=requiredElExpr.match(/([#\[\]=\^~.a-z0-9_\-"']+)\s?/g),evalStr=requiredElExpr,currentSelector,$el,valueExists,requiredEls=[];for(let t in selectorMatches)selectorMatches.hasOwnProperty(t)&&(currentSelector=selectorMatches[t].trim(),currentSelector.length&&($el=$(currentSelector).first(),valueExists=$el.length&&null!=$el.val()&&$el.val().length,!valueExists&&$el.length&&requiredEls.push($el),evalStr=evalStr.replace(new RegExp(_common_Utils__WEBPACK_IMPORTED_MODULE_2__.c.escapeRegExp(currentSelector)+"\\s","g"),valueExists?"true ":"false ")));const evalCheckStr=evalStr.replace(/true|false|\||&/g,"").trim();if(evalCheckStr.length)return console.debug("eval string contains unwanted text. Your site may be compromised."),null;if(!eval(evalStr)&&requiredEls.length){let t=requiredEls.length-1,e=0;return this.notifier.notify(requiredEls[Math.floor(Math.random()*(t-e+1))+e],void 0),null}return!1}addCookiesSetting(t){const e=$(this.psv.selectorTabMain).find("label[for="+this.psv.inputNameCookies+"]").closest("tr").find(".inputs")||null;null!==e&&e.length&&(t.cookies=e.find(":input").serialize())}addRequestHeadersSetting(t){const e=$(this.psv.selectorTabMain).find("label[for="+_common_enum_SettingKey__WEBPACK_IMPORTED_MODULE_4__.n.REQUEST_HEADERS+"]").closest("tr").find(".inputs")||null;null!==e&&e.length&&(t.requestHeaders=e.find(":input").serialize())}addCacheSetting(t){const e=$(this.psv.selectorTabMain).find(`input[name="${_common_enum_SettingKey__WEBPACK_IMPORTED_MODULE_4__.n.CACHE_TEST_URL_RESPONSES}"]`)||null;null!==e&&e.length&&(t.cacheTestUrlResponses=e[0].checked?1:0)}addCustomGeneralSettings(t){let e=$(`#${_common_enum_SettingKey__WEBPACK_IMPORTED_MODULE_4__.n.DO_NOT_USE_GENERAL_SETTINGS}`)||null,n=!1;if(null!==e){const s="customGeneralSettings";e.length&&e[0].checked?(t[s]=$(this.psv.selectorTabGeneralSettings).find(":input").serialize(),n=!0):t[s]=void 0}return n}addUseUtf8(t,e){const n="convertEncodingToUtf8",s=$(`#${_common_enum_SettingKey__WEBPACK_IMPORTED_MODULE_4__.n.WPCC_MAKE_SURE_ENCODING_UTF8}`)||null;if(null!==s&&s.length&&e){t.useUtf8=s.first()[0].checked?1:0;let e=$(`#${_common_enum_SettingKey__WEBPACK_IMPORTED_MODULE_4__.n.WPCC_CONVERT_CHARSET_TO_UTF8}`)||null;t[n]=_common_Utils__WEBPACK_IMPORTED_MODULE_2__.c.getCheckboxValue(e)?1:0}else t.useUtf8=-1,t[n]=-1}addManipulationOptionsToAjaxData(t){if(null==(t=t||null))return;let e=$("div.tab:not(.hidden)").first(),n=e.attr("id").replace("tab-","").toLowerCase();-1!==["templates","filters"].indexOf(n)&&(e=$(this.psv.selectorTabPost));let s,i,r,o,a=/[^\\[]+/,l={};for(let t=0;t<this.psv.baseHtmlManipulationInputNames.length;t++)s=this.psv.baseHtmlManipulationInputNames[t],i=e.find('input[name*="'+s+'"]').first(),r=i.closest(".inputs").find(":input"),r.length<1||(o=i.attr("name").match(a)[0],l[o]=r.serialize());const c=_filtering_FilteringService__WEBPACK_IMPORTED_MODULE_5__.T.getInstance().getFilteringVariables(),u=[this.getFiltersSerialized(e,c.clsRequestFilter),this.getFiltersSerialized(e,c.clsPageFilter)];for(const t of u)null!==t&&(l[t.inputName]=t.serialized);t.manipulation_options=l}getFiltersSerialized(t,e){const n=_filtering_FilteringService__WEBPACK_IMPORTED_MODULE_5__.T.getInstance(),s=n.getFilteringVariables(),i=`.${s.clsFilterSetting}.${e}`,r=t.find(i).first();if(!r.length)return null;const o=r.find(`.${s.clsFilters}`).first();return o.length?{inputName:r.closest("tr").find("> td > label[for]").attr("for"),serialized:new _filtering_serialization_FilterSerializer__WEBPACK_IMPORTED_MODULE_6__.J(s,n.getElementService()).serialize(o)}:null}addTransformationOptions(t,e,n,s,i,r){if(!n&&!t.hasClass(s))return;let o=$("#"+i).find(":input")||null;null!==o&&o.length&&(e[r]=o.serialize())}addDataForFindReplaceInCustomMetaOrShortCodeTest(t,e){let n="wcc-test-find-replace-in-custom-meta";if(!t.hasClass(n)&&!t.hasClass("wcc-test-find-replace-in-custom-short-code"))return;let s=t.hasClass(n),i="."+(s?"meta-key":"short-code"),r="."+(s?"selector-custom-post-meta":"selector-custom-shortcode"),o=t.closest(".input-group").find(".input-container").find(i);if(!o.length)return;let a=o.val()||null;if(null===a)return;if(a=a.toString(),null===a||!a.length)return;let l=!1;$(".input-group"+r+" "+i).each((function(){if(l)return;let t=$(this);if(t.val()==a){let n=t.closest(".input-group").find(".css-selector"),s=t.closest(".input-group").find(".css-selector-attr"),i=t.closest(".input-group").find('[name*="[options_box]"]'),r=n.val(),o=s.val(),a=i.length?i.val():void 0;null!=r&&r.length&&(e.valueSelector=r,null!=o&&o.length&&(e.valueSelectorAttr=o),void 0!==a&&(e.valueOptionsBoxData=a),l=!0)}})),l||s&&$(".input-group.custom-post-meta .meta-key").each((function(){if(l)return;let t=$(this);if(t.val()==a){let n=t.closest(".input-group").find("input[type=text]:not(.meta-key)").val();null!=n&&n.length&&(e.subject=n,l=!0)}}))}getTestUrlSelectorWithElement(t){const e=this.getTopMostTab(t);if(null===e)return null;const n=e.attr("id")||null;return null===n?null:this.getTestUrlSelectorForTab(n)}getTestUrlSelectorForTab(t){return null===t?null:-1!==[_common_enum_TabKey__WEBPACK_IMPORTED_MODULE_3__.R.SITE_SETTINGS_TAB_POST,_common_enum_TabKey__WEBPACK_IMPORTED_MODULE_3__.R.SITE_SETTINGS_TAB_TEMPLATES,_common_enum_TabKey__WEBPACK_IMPORTED_MODULE_3__.R.SITE_SETTINGS_TAB_FILTERS].indexOf(t)?"#"+_common_enum_SettingKey__WEBPACK_IMPORTED_MODULE_4__.n.TEST_URL_POST:-1!==[_common_enum_TabKey__WEBPACK_IMPORTED_MODULE_3__.R.SITE_SETTINGS_TAB_CATEGORY].indexOf(t)?"#"+_common_enum_SettingKey__WEBPACK_IMPORTED_MODULE_4__.n.TEST_URL_CATEGORY:null}getTopMostTab(t){let e=null,n=t.closest(".tab");for(;n.length;)e=n,n=e.parent().closest(".tab");return null!==e&&e.length?e:null}}TestDataPreparer.INSTANCE=null},564:(t,e,n)=>{"use strict";var s=n(418),i=n(129),r=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function h(t){return(t||"").toString().replace(r,"")}var d=[["#","hash"],["?","query"],function(t,e){return _(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function g(t){var e,s=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},i={},r=typeof(t=t||s);if("blob:"===t.protocol)i=new m(unescape(t.pathname),{});else if("string"===r)for(e in i=new m(t,{}),p)delete i[e];else if("object"===r){for(e in t)e in p||(i[e]=t[e]);void 0===i.slashes&&(i.slashes=a.test(t.href))}return i}function _(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function f(t,e){t=(t=h(t)).replace(o,""),e=e||{};var n,s=c.exec(t),i=s[1]?s[1].toLowerCase():"",r=!!s[2],a=!!s[3],l=0;return r?a?(n=s[2]+s[3]+s[4],l=s[2].length+s[3].length):(n=s[2]+s[4],l=s[2].length):a?(n=s[3]+s[4],l=s[3].length):n=s[4],"file:"===i?l>=2&&(n=n.slice(2)):_(i)?n=s[4]:i?r&&(n=n.slice(2)):l>=2&&_(e.protocol)&&(n=s[4]),{protocol:i,slashes:r||_(i),slashesCount:l,rest:n}}function m(t,e,n){if(t=(t=h(t)).replace(o,""),!(this instanceof m))return new m(t,e,n);var r,a,l,c,p,S,T=d.slice(),v=typeof e,C=this,E=0;for("object"!==v&&"string"!==v&&(n=e,e=null),n&&"function"!=typeof n&&(n=i.parse),r=!(a=f(t||"",e=g(e))).protocol&&!a.slashes,C.slashes=a.slashes||r&&e.slashes,C.protocol=a.protocol||e.protocol||"",t=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||u.test(t))||!a.slashes&&(a.protocol||a.slashesCount<2||!_(C.protocol)))&&(T[3]=[/(.*)/,"pathname"]);E<T.length;E++)"function"!=typeof(c=T[E])?(l=c[0],S=c[1],l!=l?C[S]=t:"string"==typeof l?~(p="@"===l?t.lastIndexOf(l):t.indexOf(l))&&("number"==typeof c[2]?(C[S]=t.slice(0,p),t=t.slice(p+c[2])):(C[S]=t.slice(p),t=t.slice(0,p))):(p=l.exec(t))&&(C[S]=p[1],t=t.slice(0,p.index)),C[S]=C[S]||r&&c[3]&&e[S]||"",c[4]&&(C[S]=C[S].toLowerCase())):t=c(t,C);n&&(C.query=n(C.query)),r&&e.slashes&&"/"!==C.pathname.charAt(0)&&(""!==C.pathname||""!==e.pathname)&&(C.pathname=function(t,e){if(""===t)return e;for(var n=(e||"/").split("/").slice(0,-1).concat(t.split("/")),s=n.length,i=n[s-1],r=!1,o=0;s--;)"."===n[s]?n.splice(s,1):".."===n[s]?(n.splice(s,1),o++):o&&(0===s&&(r=!0),n.splice(s,1),o--);return r&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(C.pathname,e.pathname)),"/"!==C.pathname.charAt(0)&&_(C.protocol)&&(C.pathname="/"+C.pathname),s(C.port,C.protocol)||(C.host=C.hostname,C.port=""),C.username=C.password="",C.auth&&(~(p=C.auth.indexOf(":"))?(C.username=C.auth.slice(0,p),C.username=encodeURIComponent(decodeURIComponent(C.username)),C.password=C.auth.slice(p+1),C.password=encodeURIComponent(decodeURIComponent(C.password))):C.username=encodeURIComponent(decodeURIComponent(C.auth)),C.auth=C.password?C.username+":"+C.password:C.username),C.origin="file:"!==C.protocol&&_(C.protocol)&&C.host?C.protocol+"//"+C.host:"null",C.href=C.toString()}m.prototype={set:function(t,e,n){var r=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(n||i.parse)(e)),r[t]=e;break;case"port":r[t]=e,s(e,r.protocol)?e&&(r.host=r.hostname+":"+e):(r.host=r.hostname,r[t]="");break;case"hostname":r[t]=e,r.port&&(e+=":"+r.port),r.host=e;break;case"host":r[t]=e,l.test(e)?(e=e.split(":"),r.port=e.pop(),r.hostname=e.join(":")):(r.hostname=e,r.port="");break;case"protocol":r.protocol=e.toLowerCase(),r.slashes=!n;break;case"pathname":case"hash":if(e){var o="pathname"===t?"/":"#";r[t]=e.charAt(0)!==o?o+e:e}else r[t]=e;break;case"username":case"password":r[t]=encodeURIComponent(e);break;case"auth":var a=e.indexOf(":");~a?(r.username=e.slice(0,a),r.username=encodeURIComponent(decodeURIComponent(r.username)),r.password=e.slice(a+1),r.password=encodeURIComponent(decodeURIComponent(r.password))):r.username=encodeURIComponent(decodeURIComponent(e))}for(var c=0;c<d.length;c++){var u=d[c];u[4]&&(r[u[1]]=r[u[1]].toLowerCase())}return r.auth=r.password?r.username+":"+r.password:r.username,r.origin="file:"!==r.protocol&&_(r.protocol)&&r.host?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(t){t&&"function"==typeof t||(t=i.stringify);var e,n=this,s=n.host,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.protocol&&n.slashes||_(n.protocol)?"//":"");return n.username?(o+=n.username,n.password&&(o+=":"+n.password),o+="@"):n.password?(o+=":"+n.password,o+="@"):"file:"!==n.protocol&&_(n.protocol)&&!s&&"/"!==n.pathname&&(o+="@"),(":"===s[s.length-1]||l.test(n.hostname)&&!n.port)&&(s+=":"),o+=s+n.pathname,(e="object"==typeof n.query?t(n.query):n.query)&&(o+="?"!==e.charAt(0)?"?"+e:e),n.hash&&(o+=n.hash),o}},m.extractProtocol=f,m.location=g,m.trimLeft=h,m.qs=i,t.exports=m}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var __webpack_exports__={};(()=>{"use strict";var t,e=__webpack_require__(778);!function(t){t[t.CRAWL_NOW=0]="CRAWL_NOW",t[t.ADD_TO_DATABASE=1]="ADD_TO_DATABASE"}(t||(t={}));class n{constructor(t,e,n,s,i){this._siteName=(t||"").trim(),this._siteId=e,this._url=(n||"").trim(),this._categoryId=i,this._categoryName=(s||"").trim()}get siteName(){return this._siteName}get siteId(){return this._siteId}get url(){return this._url}get categoryId(){return this._categoryId}get categoryName(){return this._categoryName}get response(){return this._response}set response(t){this._response=t}}class s extends n{constructor(t,e,n,s,i,r){super(t,e,n,s,i),this._imageUrl=r||""}get imageUrl(){return this._imageUrl}get postId(){return this._postId}set postId(t){this._postId=t}get postUrl(){return this._postUrl}set postUrl(t){this._postUrl=t}}class i{constructor(){this.selectorToolsContainer="#container-tools",this.selectorTabNavigation=this.selectorToolsContainer+" > .nav-tab-wrapper",this.selectorTabs=this.selectorToolsContainer+" > .tab"}static getInstance(){return null===this.INSTANCE&&(this.INSTANCE=new i),this.INSTANCE}}i.INSTANCE=null;var r=__webpack_require__(730);class o extends n{}var a=__webpack_require__(305),l=__webpack_require__(140),c=__webpack_require__(784);class u{constructor(){this.selectorContainerUrlQueue="#container-url-queue-manual-crawl",this.selectorTableContainerUrlQueue=this.selectorContainerUrlQueue+" .table-container",this.selectorTableUrlQueue="#table-url-queue-manual-crawl",this.selectorToolContainerManualCrawl="#tool-manual-crawl",this.classForm="tool-manual-crawl",this.selectorForm="."+this.classForm,this.classButtonCrawlNow="crawl-now",this.classButtonAddToDatabase="add-to-database",this.selectorButtonCrawlNow=".button."+this.classButtonCrawlNow,this.selectorButtonAddToDatabase=".button."+this.classButtonAddToDatabase,this.selectorButtonDelete=".button.delete",this.selectorButtonRepeat=".button.repeat",this.$urlRowPrototype=null,this.$responseRowPrototype=null,this.classResponse="response",this.classHasResponse="has-response",this.classOpen="open",this.selectorCheckboxClearUrls="#_manual_crawling_tool_clear_after_submit",this.beingProcessedCategoryUrlData=null,this.categoryUrlQueue=[],this.isPaused=!1,this.runningRequestCount=0,this.maxParallelCrawling=1,this.inputNameSiteId="_wpcc_tools_site_id",this.inputNameCategoryId="_wpcc_tools_category_id",this.inputNameCategoryUrls="_category_urls",this.inputNamePostUrls="_post_urls",this.tv=i.getInstance(),this.selectorUrls=this.selectorTableUrlQueue+" tbody > tr.url:not(.prototype)",this.selectorUrlResponses=this.selectorTableUrlQueue+" tbody > tr.url:not(.prototype) + ."+this.classResponse,this.selectorUrlsToBeCrawled=this.selectorTableUrlQueue+" tbody > tr.url:not(.prototype):not(.loading):not(.done)",this.selectorUrlsDone=this.selectorTableUrlQueue+" tbody > tr.url.done:not(.prototype)",this.selectorUrlsBeingCrawled=this.selectorTableUrlQueue+" tbody > tr.url.loading:not(.prototype)",this.selectorStatus=this.selectorContainerUrlQueue+" #status",this.selectorButtonContinue=this.selectorContainerUrlQueue+" .button.continue",this.selectorButtonPause=this.selectorContainerUrlQueue+" .button.pause",this.selectorClearAllUrls=this.selectorTableUrlQueue+" thead th.controls .remove-all",this.selectorInputMaxPostsToBeCrawled=this.selectorToolContainerManualCrawl+" #_max_posts_to_be_crawled",this.selectorInputMaxParallelCrawlingCount=this.selectorToolContainerManualCrawl+" #_max_parallel_crawling_count",this.selectorShowAllResponses=this.selectorContainerUrlQueue+" .show-all-responses",this.selectorHideAllResponses=this.selectorContainerUrlQueue+" .hide-all-responses",$(document).on("click",this.selectorButtonAddToDatabase,(e=>this.onClickSubmit(e,t.ADD_TO_DATABASE))),$(document).on("click",this.selectorButtonCrawlNow,(e=>this.onClickSubmit(e,t.CRAWL_NOW))),$(document).on("click",this.selectorContainerUrlQueue+" "+this.selectorButtonDelete,(t=>this.onClickDeleteUrl(t))),$(document).on("click",this.selectorContainerUrlQueue+" "+this.selectorButtonRepeat,(t=>this.onClickRepeatCrawling(t))),$(document).on("click",this.selectorTableUrlQueue+" tbody > tr",(t=>this.onClickUrlRow(t))),$(document).on("click",this.selectorTableUrlQueue+" tbody > tr a",(t=>t.stopPropagation())),$(document).on("click",this.selectorButtonContinue,(()=>this.continueCrawling())),$(document).on("click",this.selectorButtonPause,(()=>this.pauseCrawling())),$(document).on("click",this.selectorClearAllUrls,(()=>this.clearAllUrls())),$(document).on("click",this.selectorShowAllResponses,(()=>this.showAllResponses())),$(document).on("click",this.selectorHideAllResponses,(()=>this.hideAllResponses()))}static getInstance(){return null===this.INSTANCE&&(this.INSTANCE=new u),this.INSTANCE}clearAllUrls(){let t=this.selectorUrlsDone+", "+this.selectorUrlsToBeCrawled+", "+this.selectorUrlsDone+" + tr.response";$(t).remove(),this.onUpdateUrlTable()}onClickSubmit(e,n){e.preventDefault(),e.stopPropagation();let s=$(e.target);c.u.for(s).hide().apply();let i=this.getEnteredUrls();switch(n){case t.CRAWL_NOW:this.pauseThreshold=this.getMaxPostsToBeCrawled(),this.crawledUrlCountAfterSubmit=0,this.maxParallelCrawling=this.getMaxParallelCrawlingCount(),this.pauseThreshold>0&&(this.maxParallelCrawling=Math.min(this.maxParallelCrawling,this.pauseThreshold)),this.continueCrawling(),this.retrievePostUrlsFromCategoryUrls(),this.addUrlsToQueueTable(i),this.crawlNextUrlInQueue(),flashBackground($(this.selectorContainerUrlQueue));break;case t.ADD_TO_DATABASE:this.handleAddUrlsToDatabase(i),flashBackground($(this.selectorContainerUrlQueue))}}retrievePostUrlsFromCategoryUrls(){if(null!==this.beingProcessedCategoryUrlData||!this.categoryUrlQueue.length||this.isPaused)return;this.beingProcessedCategoryUrlData=this.categoryUrlQueue.shift(),this.onUpdateUrlTable();let t=this.beingProcessedCategoryUrlData;$.post(window.ajaxurl,{wcc_nonce:$("#wcc_nonce").val(),action:window.pageActionKey,data:{tool_type:"get_post_urls_from_category_url",category_url:t.url,site_id:t.siteId}}).done((e=>{let n=e.results||[];e.hasInfo&&this.showTestResult(e.view);let i,r,o,c=n.length,u=[];for(let e=0;e<c;e++)i=n[e]||null,null!==i&&(r=i.url||null,o=i.thumbnail||null,null!==r&&u.push(new s(t.siteName,t.siteId,r,t.categoryName,t.categoryId,o)));if(!u.length)return a.d.getInstance().notifyRegular($('label[for="'+this.inputNameCategoryUrls+'"]'),window.wpcc.no_urls_found+" "+t.url,l.k.INFO),void this.onUpdateUrlTable();this.addUrlsToQueueTable(u),this.crawlNextUrlInQueue()})).fail((e=>{a.d.getInstance().notifyRegular($('label[for="'+this.inputNameCategoryUrls+'"]'),window.wpcc.an_error_occurred+" ("+t.url+"): "+e.responseText,l.k.ERROR),console.log(e)})).always((t=>{this.beingProcessedCategoryUrlData=null,this.retrievePostUrlsFromCategoryUrls(),this.updateStatus()}))}handleAddUrlsToDatabase(t){let e=this.getTestResultContainer();if(e.hasClass("loading"))return;e.removeClass("hidden").addClass("loading");let n=e.find(".content").first();n.html("");let s=this.categoryUrlQueue;this.categoryUrlQueue=[],$.post(window.ajaxurl,{wcc_nonce:$("#wcc_nonce").val(),action:window.pageActionKey,data:{tool_type:"add_urls_to_database",post_urls:JSON.stringify(t),category_urls:JSON.stringify(s)}}).done((t=>{t?n.html(t.view):n.html(window.wpcc.no_result)})).fail((t=>{console.log(t),n.html(window.wpcc.an_error_occurred+": "+t.responseText)})).always((t=>{e.removeClass("loading")}))}onClickUrlRow(t){let e=$(t.target).closest("tr"),n=this.getUrlRowResponse(e);null!==n&&(n.hasClass("hidden")?(n.removeClass("hidden"),e.addClass(this.classOpen)):(n.addClass("hidden"),e.removeClass(this.classOpen)))}crawlNextUrlInQueue(){if(!(this.runningRequestCount>=this.maxParallelCrawling))for(;this.runningRequestCount<this.maxParallelCrawling;){if(this.isPaused)return;if(this.pauseThreshold>0&&this.crawledUrlCountAfterSubmit>=this.pauseThreshold)return this.crawledUrlCountAfterSubmit=0,this.pauseThreshold=0,void this.pauseCrawling();let t=$(this.selectorUrlsToBeCrawled).first()||null;if(null===t||!t.length)return;this.runningRequestCount+=1,this.crawledUrlCountAfterSubmit++,this.crawlUrlRow(t,null,null,(t=>{this.runningRequestCount-=1,this.crawlNextUrlInQueue()}))}}crawlUrlRow(t,e=null,n=null,s=null,i=!1){let r=t.data("urlData")||null,o=this.getNewResponseRowElement();if(null===r)return o.html(window.wpcc.url_data_not_exist),void this.setUrlRowDone(t);this.setUrlRowLoading(t),this.updateStatus(),$.post(window.ajaxurl,{wcc_nonce:$("#wcc_nonce").val(),action:window.pageActionKey,data:{tool_type:"save_post",[this.inputNameSiteId]:r.siteId,_wpcc_tools_post_url:r.url,[this.inputNameCategoryId]:r.categoryId,_wpcc_tools_featured_image_url:r.imageUrl,_wpcc_recrawl_if_duplicate:i?"1":"0"}}).done((t=>{t?this.setResponseRowHtml(o,t.view):this.setResponseRowHtml(o,window.wpcc.no_result),null!==e&&e(t)})).fail((t=>{console.log(t),this.setResponseRowHtml(o,window.wpcc.an_error_occurred+": "+t.responseText),null!==n&&n(t)})).always((e=>{t.after(o),t.addClass(this.classHasResponse).addClass(this.classOpen),this.setUrlRowDone(t),this.updateStatus(),null!==s&&s(e)}))}setUrlRowLoading(t){t.addClass("loading").removeClass("done"),t.find("td.status").html('<span class="dashicons dashicons-update"></span>'),t.find(".button.delete").addClass("hidden"),t.find(".button.repeat").addClass("hidden")}setUrlRowDone(t){t.removeClass("loading").addClass("done"),t.find("td.status").html('<span class="dashicons dashicons-yes"></span>'),t.find(".button.delete").removeClass("hidden"),t.find(".button.repeat").removeClass("hidden")}addUrlsToQueueTable(t){let e=$(this.selectorTableContainerUrlQueue).first(),n=e.find(" tbody").first();t=t||[];for(let e of t)n.append(this.createUrlRow(e));this.onUpdateUrlTable(),t.length&&(c.u.initAll(),flashBackground(e)),this.updateStatus()}onUpdateUrlTable(){let t=$(this.selectorTableContainerUrlQueue).first(),e=$(this.selectorContainerUrlQueue).find(".default-message").first(),n=$(this.selectorTableUrlQueue).find("tbody tr:not(.hidden)")||null;if((null===n||!n.length)&&null===this.beingProcessedCategoryUrlData)return t.addClass("hidden"),e.removeClass("hidden"),void this.continueCrawling();t.removeClass("hidden"),e.addClass("hidden"),this.updateStatus()}createUrlRow(t){let e=this.getNewUrlRowElement();if(e.find(".site").text(t.siteName),e.find(".category").text(t.categoryName),t.imageUrl.length){let n=$("<img/>").attr("src",t.imageUrl),s=$("<a/>").attr("href",t.imageUrl).attr("target","_blank").attr(c.u.TOOLTIP_ATTRIBUTE_NAME,c.u.TOOLTIP_ATTRIBUTE_VALUE).attr("data-placement","right").attr("data-html","true").attr("title",n[0].outerHTML);s.append(n),e.find(".image").append(s)}return e.find(".post-url").html('<a target="_blank" href="'+t.url+'">'+t.url+"</a>"),e.data("urlData",t),e}setResponseRowHtml(t,e){let n=t.find("."+this.classResponse).first();return n.html(e),n}getNewUrlRowElement(){return null===this.$urlRowPrototype&&(this.$urlRowPrototype=$(this.selectorTableUrlQueue).find("tr.prototype.url").first()),this.$urlRowPrototype.clone().removeClass("prototype").removeClass("hidden")}getNewResponseRowElement(){return null===this.$responseRowPrototype&&(this.$responseRowPrototype=$(this.selectorTableUrlQueue).find("tr.prototype.response").first()),this.$responseRowPrototype.clone().removeClass("prototype").removeClass("hidden")}getEnteredUrls(){let t=[],e=$(this.selectorForm).first(),n=e.serializeObjectNoNull(),i=n[this.inputNameSiteId]||null,r=n[this.inputNameCategoryId]||null,c=this.selectorForm+" #"+this.inputNameSiteId+' option[value="'+i+'"]',u=$(c).text()||null,h=this.selectorForm+" #"+this.inputNameCategoryId+' option[value="'+r+'"]',d=$(h).text()||null;if(null===i||null===r){let e=null===i?this.inputNameSiteId:this.inputNameCategoryId;return a.d.getInstance().notifyRegular($('label[for="'+e+'"]'),window.wpcc.this_is_not_valid,l.k.WARN),t}let p=n._post_and_featured_image_urls||null;if(null!==p){let e,n,o,a=p.length;for(let l=0;l<a;l++)e=p[l]||null,null!==e&&(n=e.postUrl||null,o=e.imageUrl||null,null!==n&&this.isValidUrl(n)&&(null===o||this.isValidUrl(o)||(o=null),t.push(new s(u,i,n,d,r,o))))}let g=n[this.inputNamePostUrls]||null;if(null!==g){let e,n=g.split("\n").map(((t,e)=>t.trim())),o=n.length;for(let a=0;a<o;a++)e=n[a]||null,null!==e&&this.isValidUrl(e)&&t.push(new s(u,i,e,d,r,null))}let _=n[this.inputNameCategoryUrls]||null;if(null!==_){_=_.map(((t,e)=>t.trim()));for(let t of _)t=t||null,null!==t&&this.categoryUrlQueue.push(new o(u,i,t,d,r))}let f=$(this.selectorCheckboxClearUrls)||null;return null!==f&&f.length&&f[0].checked&&(e.find(".wcc-remove").each(((t,e)=>{$(e).trigger("click")})),e.find("textarea").val("").html("")),t}isValidUrl(t){return null!==(t=t||null)&&!!r.c.startsWith(t.toLowerCase(),"http")}onClickRepeatCrawling(t){t.preventDefault(),t.stopPropagation();let e=$(t.target).closest("tr"),n=e.next()||null;if(null===(e.data("urlData")||null))return a.d.getInstance().notifyRegular(e,window.wpcc.url_data_not_exist_for_this,l.k.ERROR),void console.log("URL data does not exist for this row.");null!==n&&n.length&&n.hasClass(this.classResponse)?(n.remove(),e.removeClass(this.classOpen),this.crawlUrlRow(e,null,null,null,!0)):a.d.getInstance().notifyRegular(e,window.wpcc.this_url_not_crawled_yet,l.k.INFO)}onClickDeleteUrl(t){t.preventDefault();let e=$(t.target).closest("tr"),n=e.next()||null;null!==n&&n.length&&n.hasClass(this.classResponse)&&n.remove(),e.remove(),this.onUpdateUrlTable()}getUrlRowResponse(t){let e=t.next()||null;return null!==e&&e.length&&e.hasClass(this.classResponse)?e:null}updateStatus(){let t=$(this.selectorStatus),e=t.html(),n='<span class="counts">'+$(this.selectorUrlsDone).length+"/"+$(this.selectorUrls).length+"</span>",s=$(this.selectorUrlsBeingCrawled);if(s.length){let t;n+=" "+window.wpcc.currently_crawling+": ",s.each(((e,s)=>{t=$(s).data("urlData")||null,null!==t&&(n+=$("<a/>").attr("href",t.url).attr("target","_blank").addClass("post-url").append(t.url).attr("style","display: block;")[0].outerHTML)}))}if(null!==this.beingProcessedCategoryUrlData){let t=$("<a/>").attr("href",this.beingProcessedCategoryUrlData.url).attr("target","_blank").addClass("category-url").append(this.beingProcessedCategoryUrlData.url);n+='<br><span class="dashicons dashicons-update"></span> '+window.wpcc.retrieving_urls_from.format(t[0].outerHTML)}n!==e&&(flashBackground(t),t.html(n))}getContinueButton(){return $(this.selectorButtonContinue).first()}getPauseButton(){return $(this.selectorButtonPause).first()}getTestResultContainer(){return $(this.selectorToolContainerManualCrawl).find(".panel-wrap > .test-results").first()}showTestResult(t){this.getTestResultContainer().removeClass("loading").removeClass("hidden").find(".content").html(t)}pauseCrawling(){this.isPaused=!0,this.getContinueButton().removeClass("hidden"),this.getPauseButton().addClass("hidden")}continueCrawling(){this.isPaused=!1,this.getContinueButton().addClass("hidden"),this.getPauseButton().removeClass("hidden"),this.crawlNextUrlInQueue(),this.retrievePostUrlsFromCategoryUrls()}getMaxPostsToBeCrawled(){let t=$(this.selectorInputMaxPostsToBeCrawled)||null;if(null===t)return 0;let e=t.val()||0;return 0===e?e:(e=parseInt(e.toString()),e<0?0:e)}getMaxParallelCrawlingCount(){let t=$(this.selectorInputMaxParallelCrawlingCount)||null;if(null===t)return 1;let e=t.val()||1;return 1===e?e:(e=parseInt(e.toString()),e<1?1:e)}showAllResponses(){$(this.selectorUrlResponses).removeClass("hidden"),$(this.selectorUrls+"."+this.classHasResponse).addClass(this.classOpen)}hideAllResponses(){$(this.selectorUrlResponses).addClass("hidden"),$(this.selectorUrls+"."+this.classHasResponse).removeClass(this.classOpen)}}u.INSTANCE=null;class h{constructor(){this.registerFunction()}static getInstance(){return null===this.INSTANCE&&(this.INSTANCE=new h),this.INSTANCE}registerFunction(){$.fn.serializeObjectNoNull=function(){let t=$.fn.serializeObject.apply(this,arguments);for(let e in t)t.hasOwnProperty(e)&&t[e]instanceof Array&&(t[e]=t[e].filter((function(t){return null!==t})));return t}}}h.INSTANCE=null;var d,p,g=__webpack_require__(62);class _{constructor(){this.processing=!1,this.tv=i.getInstance(),h.getInstance(),u.getInstance(),$(".tool-form").on("submit",(t=>this.handleFormSubmission(t))),$(".details").on("click",".hide-test-results",(t=>this.hideTestResults(t)))}hideTestResults(t){t.preventDefault();const e=$(t.target).closest(".test-results");$(document).trigger(jQuery.Event(g.t.testResultsBeforeHidden,{container:e})),e.addClass("hidden"),$(document).trigger(jQuery.Event(g.t.testResultsHidden,{container:e}))}handleFormSubmission(t){if(t.preventDefault(),this.processing)return;this.processing=!0;let e=$(t.target),n=e.find(".test-results").first(),s=n.find(".content");n.removeClass("hidden").addClass("loading"),s.html(""),$.post(window.ajaxurl,{wcc_nonce:$("#wcc_nonce").val(),action:window.pageActionKey,data:this.getFormData(e)}).done((function(t){t?s.html(t.view):s.html(window.wpcc.no_result)})).fail((function(t){console.log(t),s.html(window.wpcc.an_error_occurred+": "+t.responseText)})).always((t=>{n.removeClass("loading"),this.processing=!1,$(document).trigger(jQuery.Event(g.t.toolTestResultsLoaded))}))}getFormData(t){let e=t.serializeArray(),n={};return $.map(e,((t,e)=>{n[t.name]=t.value})),n}}!function(t){t.SITE_LISTING="site_listing",t.SITE_SETTINGS="site_settings",t.ADD_NEW_SITE="add_new_site",t.DASHBOARD="dashboard",t.SITE_TESTER="site_tester",t.TOOLS="tools",t.GENERAL_SETTINGS="general_settings",t.FEATURE_REQUEST="feature_request"}(d||(d={})),function(t){t.POST="test_post",t.CATEGORY="test_category"}(p||(p={}));class f{constructor(){this.elapsedTimeMs=0,this.memoryUsageKb=0,this.messages=[]}getElapsedTimeMs(){return this.elapsedTimeMs}setElapsedTimeMs(t){return this.elapsedTimeMs=t||0,this}getMemoryUsageKb(){return this.memoryUsageKb}setMemoryUsageKb(t){return this.memoryUsageKb=t||0,this}addMessage(t){null!==(t||null)&&this.messages.push(t)}setMessages(t){return this.messages=t||[],this}getMessages(){return this.messages}static fromObject(t){return null===(t||null)?null:this.prepareLogger(t,new f)}static prepareLogger(t,e){return e.setElapsedTimeMs(t.elapsedTimeMs).setMemoryUsageKb(t.memoryUsageKb).setMessages(t.messages)}}class m extends f{constructor(){super(...arguments),this.subjects=[],this.subjectCount=0,this.deniedSubjects=[],this.deniedSubjectCount=0}getSubjects(){return this.subjects}setSubjects(t){return this.subjects=t||[],this}getSubjectCount(){return this.subjectCount}setSubjectCount(t){return this.subjectCount=t,this}getDeniedSubjects(){return this.deniedSubjects}setDeniedSubjects(t){return this.deniedSubjects=t||[],this}getDeniedSubjectCount(){return this.deniedSubjectCount}setDeniedSubjectCount(t){return this.deniedSubjectCount=null===t?0:t,this}static prepareCmdLogger(t,e){return f.prepareLogger(t,e.setSubjects(t.subjects||null).setSubjectCount(t.subjectsCount||0).setDeniedSubjects(t.deniedSubjects||null).setDeniedSubjectCount(t.deniedSubjectsCount||0))}}class S extends m{constructor(){super(...arguments),this.modifiedSubjects=[],this.modifiedSubjectCount=0,this.onlyAllowedSubjects=!1}getModifiedSubjects(){return this.modifiedSubjects}setModifiedSubjects(t){return this.modifiedSubjects=t||[],this}getModifiedSubjectCount(){return this.modifiedSubjectCount}setModifiedSubjectCount(t){return this.modifiedSubjectCount=null===t?0:t,this}setOnlyAllowedSubjects(t){return this.onlyAllowedSubjects=!0===t,this}isOnlyAllowedSubjects(){return this.onlyAllowedSubjects}static fromObject(t){return null===(t||null)?null:this.prepareActionCmdLogger(t,new S).setModifiedSubjects(t.modifiedSubjects||null).setModifiedSubjectCount(t.modifiedSubjectsCount||0)}static prepareActionCmdLogger(t,e){return m.prepareCmdLogger(t,e.setOnlyAllowedSubjects(t.onlyAllowedSubjects||null))}}class T{static getInstance(){return e.u.getInstance().get("FilterExplainingUtils",(()=>new T))}constructor(){}createExecutionSummary(t,e,n,s=!0){const i=$(`<div class="${t.clsExecutionSummary}" />`).append(`<span \n                class="${t.clsExecuted} dashicons dashicons-${n?"yes":"no"}" \n                title="${n?window.wpcc.executed:window.wpcc.not_executed}" />`);if(n&&null!==e&&i.append($(`<div class="${t.clsUsage}" />`).append(`<span class="${t.clsUsedMemory}"  title="${window.wpcc.used_memory}">${e.getMemoryUsageKb()} kB</span>`).append(`<span class="${t.clsElapsedTime}" title="${window.wpcc.elapsed_time}">${e.getElapsedTimeMs()} ms</span>`)),null!==e){const t=$('<div class="numbers" />');s&&n&&e instanceof m&&t.append(this.createTextWithIcon(e.getSubjectCount(),"subject-count","thumbs-up",window.wpcc.subject_count)).append(this.createTextWithIcon(e.getDeniedSubjectCount(),"denied-subject-count","thumbs-down",window.wpcc.denied_subject_count)),t.append(this.createTextWithIcon(e.getMessages().length,"msg-count","comment",window.wpcc.message_count)),i.append(t)}return i}addCheckResultToExecutionSummary(t,e,n){if(null===e||!e.length)return e;const s=e.find("> .usage");return s.length&&s.before(`<span \n                class="${t.clsCheckResult} dashicons dashicons-${n?"yes":"no"}" \n                title="${n?window.wpcc.condition_met:window.wpcc.condition_not_met}" />`),s}createDetailSummary(t,e){if(null===e)return null;const n=$(`<div class="${t.clsCommandSettingsSummary}" />`);return e instanceof m&&(n.append(this.createMessageContainer(t,window.wpcc.subjects,e.getSubjects())),e instanceof S&&n.append(this.createMessageContainer(t,window.wpcc.modified_subjects,e.getModifiedSubjects())),n.append(this.createMessageContainer(t,window.wpcc.denied_subjects,e.getDeniedSubjects()))),n.append(this.createMessageContainer(t,window.wpcc.messages,e.getMessages())),n.find(`.${t.clsInputSummary}`).length?n:null}createMessageContainer(t,e,n=[],s=!0){const i=$(`<div class="${t.clsInputSummaryValue}">`);if(null!==n&&n.length){const t=$("<ol />");n.forEach((e=>{t.append(`<li><code>${r.c.escapeHtml(e)}</code></li>`)})),i.append(t)}else{if(s)return null;i.html("-")}return $(`<div class="${t.clsInputSummary}" />`).append($(`<div class="${t.clsInputSummaryName}">${e}</div>`)).append(i)}createTextWithIcon(t,e,n,s){return $(`<span title="${s}" class="${e}"><i class="fas fa-${n}"></i> ${t}</span>`)}}class v{constructor(){this.executed=!1,this.needSubjectValue=!1,this.fv=R.getInstance().getFilteringVariables()}getSubject(){return this.subject||""}setSubject(t){return this.subject=t||"",this}getProperty(){return null!==this.property&&this.property.length?this.property:window.wpcc.value}setProperty(t){return this.property=t,this}getCommand(){return this.command||""}setCommand(t){return this.command=t||"",this}isExecuted(){return this.executed}setExecuted(t){return this.executed=!!t,this}doesNeedSubjectValue(){return this.needSubjectValue}setNeedSubjectValue(t){return this.needSubjectValue=!!t,this}getLogger(){return this.logger}setLogger(t){return this.logger=t||null,this}toElement(){return $(`<div class="${this.fv.clsCommandSummary}" />`).append(this.createDefinitionSummary()).append(T.getInstance().createDetailSummary(this.fv,this.getLogger()))}createDefinitionSummary(){const t=$(`<div class="${this.fv.clsCommandDefinitionSummary}" />`).append($(`<span class="${this.fv.clsFilteringSubjects}-summary">${this.getSubject()}</span>`)),e=this.getProperty();return null!==e&&t.append($(`<span class="${this.fv.clsFilteringProperties}-summary">${e}</span>`)),t.append($(`<span class="${this.fv.clsFilteringCommands}-summary">${this.getCommand()}</span>`)),t.append(T.getInstance().createExecutionSummary(this.fv,this.getLogger(),this.isExecuted(),this.doesNeedSubjectValue())),t}static prepareCmdExplainer(t,e){return e.setSubject(t.subject||null).setProperty(t.property||null).setCommand(t.command||null).setExecuted((t.details||{}).executed||!1).setNeedSubjectValue((t.details||{}).needSubjectValue||!1),e}}class C extends m{static fromObject(t){return null===(t||null)?null:this.prepareConditionCmdLogger(t,new C)}static prepareConditionCmdLogger(t,e){return m.prepareCmdLogger(t,e)}}class E extends v{constructor(){super(...arguments),this.checkResult=!1}getCheckResult(){return this.checkResult}setCheckResult(t){return this.checkResult=!!t,this}toElement(){const t=super.toElement(),e=t.find(`.${this.fv.clsExecutionSummary}`);return e.length&&T.getInstance().addCheckResultToExecutionSummary(this.fv,e,this.getCheckResult()),t}static fromObject(t){if(null===(t||null))return null;const e=t.details||null;if(null===e)return null;const n=(new E).setCheckResult(e.checkResult).setLogger(C.fromObject(e));return v.prepareCmdExplainer(t,n)}}class I{constructor(){this.executed=!1,this.checkResult=!1,this.ownItemCount=0,this.totalCmdCount=0,this.items=[],this.logger=null,this.fv=R.getInstance().getFilteringVariables()}getOperator(){return this.operator||""}setOperator(t){return this.operator=null!==t?t:"",this}isExecuted(){return this.executed}setExecuted(t){return this.executed=!!t,this}getCheckResult(){return this.checkResult}setCheckResult(t){return this.checkResult=!!t,this}getOwnItemCount(){return this.ownItemCount}setOwnItemCount(t){return this.ownItemCount=t,this}getTotalCmdCount(){return this.totalCmdCount}setTotalCmdCount(t){return this.totalCmdCount=t,this}getItems(){return this.items}addItem(t){return null!==t&&this.items.push(t),this}getLogger(){return this.logger}setLogger(t){return this.logger=t,this}toElement(){const t=$(`<div class="${this.fv.clsConditionSummary}" data-${this.fv.dataType}="${this.getOperator()}" />`).append(this.createExecutionSummary()).append(T.getInstance().createDetailSummary(this.fv,this.getLogger()));return this.getItems().forEach((e=>t.append(e.toElement()))),t}createExecutionSummary(){const t=T.getInstance(),e=t.createExecutionSummary(this.fv,this.getLogger(),this.isExecuted());return t.addCheckResultToExecutionSummary(this.fv,e,this.getCheckResult()),e}static fromObject(t){if(null===(t||null)||"condition"!==t.type)return null;const e=t.condition||null;if(null===e)return null;const n=e.details||null;if(null===n)return null;const s=(new I).setOperator(e.operator).setExecuted(n.executed||!1).setCheckResult(n.checkResult||!1).setOwnItemCount(n.ownItemCount||0).setTotalCmdCount(n.totalCmdCount||0).setLogger(f.fromObject(n));let i=null;for(const e of t.items||[])i=e.type||null,"condition"===i?s.addItem(I.fromObject(e)):"command"===i&&s.addItem(E.fromObject(e));return s}}class b extends v{static fromObject(t){if(null===(t||null))return null;const e=(new b).setLogger(S.fromObject(t.details||null));return v.prepareCmdExplainer(t,e)}}class w{constructor(){this.actions=[],this.fv=R.getInstance().getFilteringVariables()}getTitle(){return this.title}setTitle(t){return this.title=null===t?"":t,this}isEnabled(){return this.enabled}isDisabled(){return!this.isEnabled()}setEnabled(t){return this.enabled=t,this}getIfEvent(){return this.ifEvent}setIfEvent(t){return this.ifEvent=t||null,this}getThenEvent(){return this.thenEvent}setThenEvent(t){return this.thenEvent=t||null,this}getConditionExplainer(){return this.conditionExplainer}setConditionExplainer(t){return this.conditionExplainer=t||null,this}getActionCmdExplainers(){return this.actions}addActionCmdExplainer(t){return null!==(t||null)&&this.actions.push(t),this}toElement(){const t=this.createBody(this.fv.clsFilterIfSummary,this.getIfEvent()),e=this.createBody(this.fv.clsFilterThenSummary,this.getThenEvent()),n=this.getConditionExplainer();return null!==n&&t.append(n.toElement()),this.getActionCmdExplainers().forEach((t=>e.append(t.toElement()))),$(`<div class="${this.fv.clsFilterSummaryContainer} ${this.fv.clsFilterExplanationContainer}" />`).append(t).append(e)}createBody(t,e){return $(`<div class="${this.fv.clsFilterSummary} ${t}" />`).append(this.createHeader(e))}createHeader(t){return $(`<div class="${this.fv.clsFilterHeaderSummary}" />`).append($(`<span class="${this.fv.clsFilteringEvents}-summary">${t}</span>`))}static fromObject(t){if("filter"!==(t.type||null))return null;const e=(new w).setTitle(t.title).setEnabled(t.enabled).setIfEvent(t.ifEvent).setThenEvent(t.thenEvent).setConditionExplainer(I.fromObject(t.if));for(const n of t.then||[])e.addActionCmdExplainer(b.fromObject(n));return e}}var O=__webpack_require__(938);class y{constructor(){this.name="",this.enabled=!1,this.filterExplainers=[],this.fv=R.getInstance().getFilteringVariables()}getName(){return this.name}setName(t){return this.name=null===t?"":t,this}isEnabled(){return this.enabled}setEnabled(t){return this.enabled=t,this}addFilterExplainer(t){null!==t&&this.filterExplainers.push(t)}getFilterExplainers(){return this.filterExplainers}hasFilterExplainers(){return this.getFilterExplainers().length>0}toElement(){const t=$(`<div class="${this.fv.clsFilters}" />`),e=$(`<div class="${this.fv.clsFilterSettingSummaryContainer}" />`);return t.append(e),this.isEnabled()||(t.addClass(this.fv.clsFilterSettingDisabled),e.append($(`<div class="alert alert-danger">${window.wpcc.filter_setting_disabled_notification}</div>`))),this.getFilterExplainers().forEach((e=>t.append(this.createFilterContainer(e)))),t}createFilterContainer(t){const e=$(`<div class="${this.fv.clsFilterContainer} ${this.fv.clsFilterCollapsed} ${this.fv.clsCommandSummariesExpanded}" />`),n=$(`<div class="${this.fv.clsFilterOptions}" />`);t.isDisabled()&&(e.addClass(this.fv.clsFilterDisabled),n.append(`<div><i class="${this.fv.clsFilterDisabledPrefix} fas fa-exclamation-triangle" \n                    title="${window.wpcc.filter_disabled_explanation}"> ${window.wpcc.disabled}</i></div>`)),n.append($(`<span class="${this.fv.clsFilterTitle}">${t.getTitle()}</span>`));const s=$(`<div class="${this.fv.clsFilterOperations}" />`).append(n).append($(`<div class="${this.fv.clsActionContainer} ${this.fv.clsFilterActions}" />`).append(O.W.createFontAwesomeButtonHtml(this.fv.clsToggleCommandSummaries+" "+this.fv.clsSummaryButton,window.wpcc.toggle_expand_all,"expand-alt")));return e.append(s).append(t.toElement()),e}static fromObject(t){if("filterSetting"!==(t.type||""))return null;const e=(new y).setName(t.name||null).setEnabled(t.enabled||!1);for(const n of t.filters||[])e.addFilterExplainer(w.fromObject(n));return e}}var A=__webpack_require__(401);class R{constructor(){this.fv=null}static getInstance(){return e.u.getInstance().get("FilterExplainingService",(()=>new R))}getFilteringVariables(){return null===this.fv&&(this.fv=new A.D),this.fv}createFilterSettingExplainers(t){if(!Array.isArray(t))return[];const e=[];let n;for(const s of t)n=y.fromObject(s),null!==n&&n.hasFilterExplainers()&&e.push(n);return e}}class N{constructor(){this.initialized=!1,this.fv=new A.D}static getInstance(){return e.u.getInstance().get("FilterExplainingEventHandler",(()=>new N))}init(){this.initialized||(this.initialized=!0,$(document).on("click",this.fv.selectorCommandDefinitionSummary,(t=>this.handle(t,(t=>O.W.toggleCommandSummarySettings(this.fv,t))))).on("click",this.fv.selectorFilterConditionExecSummary,(t=>this.handle(t,(t=>this.toggleConditionBlockDetails(t))))).on("click",this.fv.selectorToggleCmdSummariesBtn,(t=>this.handle(t,(t=>this.toggleAllSummaryDetails(t))))))}handle(t,e){t.preventDefault(),e($(t.target))}toggleConditionBlockDetails(t){if(null===t||!t.length)return;const e=t.closest(`.${this.fv.clsConditionSummary}`).find(`> .${this.fv.clsCommandSettingsSummary}`).first();if(!e.length)return;const n="hidden";e.hasClass(n)?e.removeClass(n):e.addClass(n)}toggleAllSummaryDetails(t){if(null===t||!t.length)return;const e=t.closest(`.${this.fv.clsFilterContainer}`);if(!e.length)return;const n=e.hasClass(this.fv.clsCommandSummariesExpanded),s="hidden";let i;e.find(`.${this.fv.clsCommandSettingsSummary}`).each(((t,e)=>{i=$(e),n?i.addClass(s):i.removeClass(s)})),n?e.removeClass(this.fv.clsCommandSummariesExpanded):e.addClass(this.fv.clsCommandSummariesExpanded)}}class P{constructor(){this.$testerForm=null,this.$resultsContainer=null,this.$testHistory=null,this.selectorInputSiteId="#site_id",this.selectorInputTestType="#test_type",this.selectorInputTestUrlPart="#test_url_part",this.selectorToggle=".toggle",this.classToggleable="toggleable",this.selectorButtonTestThis="button.test-this",this.idSelectCategoryUrl="category-url",this.idContainerSelectCategoryUrl="category-url-container",this.idUrlInputGroup="url-input-group",this.toggleCache={},this.isTestHistoryHidden=!1,this.$testerForm=$("#tester-form"),this.$resultsContainer=$("#test-results"),this.$testHistory=$("#test-history"),this.$testerForm.on("submit",(t=>this.onSubmitTesterForm(t))),this.$testHistory.on("click",".wcc-remove",(t=>this.onRemoveTestHistoryItem(t))),this.$testHistory.on("click",".delete-all",(t=>this.onRemoveAllTestHistoryItems(t))),this.$testHistory.on("click","h2",(()=>this.toggleTestHistory())),this.$testHistory.on("click",".wcc-test",(t=>this.onClickTestButtonInTestHistory(t))),this.$resultsContainer.on("click",".go-to-top",(t=>this.onClickGoToTop(t))),this.$resultsContainer.on("click","#go-to-details",(t=>this.onClickGoToDetails(t))),this.$resultsContainer.on("click",this.selectorButtonTestThis,(t=>this.onClickTestThis(t))),$(document).on("click",this.selectorToggle,(t=>this.toggleToggleable(t))),this.toggleRelatedCategoryUrls(),$(document).on("change",this.selectorInputTestType,(()=>this.toggleRelatedCategoryUrls())),$(document).on("change",this.selectorInputSiteId,(()=>this.toggleRelatedCategoryUrls()))}toggleRelatedCategoryUrls(){let t=this.getSelectedTestType();if(this.removeCategoryUrlSelectElement(),t==p.POST)return;let e=this.getCategoryURLSelectElement();null!==e&&$("#"+this.idUrlInputGroup).append(e)}removeCategoryUrlSelectElement(){$("#"+this.idContainerSelectCategoryUrl).remove()}getCategoryURLSelectElement(){let t=this.getSelectedSiteId(),e=$(this.selectorInputSiteId).find('option[value="'+t+'"]')||null;if(null===e||!e.length)return null;let n=e.data("category-urls")||null;if(null===n||!n.length)return null;let s=$("<select/>").attr("id",this.idSelectCategoryUrl);return s.append($("<option value=''>"+window.wpcc.select_category_url+"</option>")),n.map((t=>{s.append($("<option/>").val(t).html(t))})),$("<div/>").attr("id",this.idContainerSelectCategoryUrl).append($("<span>"+window.wpcc.or+"</span>")).append(s)}getSelectedCategoryUrl(){let t=this.getCategoryUrlSelect();if(null===t||!t.length)return null;let e=t.find("option:selected").val()||null;return null!==e&&e.length?e:null}getCategoryUrlSelect(){return $("#"+this.idSelectCategoryUrl)||null}toggleToggleable(t){t.preventDefault();let e=$(t.target).next()||null;if(null===e||!e.length||!e.hasClass(this.classToggleable))return;let n=e.attr("id")||null;null!==n&&n.length&&(e.hasClass("hidden")?(e.removeClass("hidden"),this.toggleCache[n]=!0):(e.addClass("hidden"),this.toggleCache[n]=!1))}restoreToggleableStates(){let t,e;for(let n in this.toggleCache)this.toggleCache.hasOwnProperty(n)&&(t=$("#"+n)||null,null!==t&&t.length&&(e=this.toggleCache[n],e?t.removeClass("hidden"):t.addClass("hidden")))}onClickTestThis(t){t.preventDefault();let e=$(t.target).closest(this.selectorButtonTestThis);this.$testerForm.find(this.selectorInputTestType).val(e.data("type")).trigger("change"),this.setTestUrlInputValue(e.data("url")),this.$testerForm.trigger("submit")}onClickTestButtonInTestHistory(t){t.preventDefault();let e=$(t.target),n=this.getTestHistoryData(e);if(null===n||!n.exists)return;let s=n.siteId||null,i=n.testKey||null,r=n.testUrl||null;null!==s&&null!==i&&null!==r&&(this.$testerForm.find(this.selectorInputSiteId).val(s).trigger("change"),this.$testerForm.find(this.selectorInputTestType).val(i).trigger("change"),this.setTestUrlInputValue(r),this.$testerForm.trigger("submit"))}onClickGoToDetails(t){t.preventDefault(),$("html, body").animate({scrollTop:$("#details").offset().top-40},"slow")}onClickGoToTop(t){t.preventDefault(),$("html, body").animate({scrollTop:0},"slow")}onRemoveAllTestHistoryItems(t){t.preventDefault(),window.confirm(window.wpcc.delete_all_test_history)&&(this.setHistoryLoading(!0),$.post(window.ajaxurl,{wcc_nonce:$("#wcc_nonce").val(),action:window.pageActionKey,data:{cmd:"delete_all_test_history"}}).done((t=>{let e=$(t.view).find(".inside").first();this.$testHistory.find(".inside").html(e.html())})).fail((t=>{console.log(t),this.$resultsContainer.html(window.wpcc.an_error_occurred+": "+t.responseText)})).always((()=>{this.setHistoryLoading(!1)})))}onRemoveTestHistoryItem(t){t.preventDefault();let e=$(t.target),n=this.getTestHistoryData(e);null!==n&&(this.setHistoryLoading(!0),$.post(window.ajaxurl,{wcc_nonce:$("#wcc_nonce").val(),action:window.pageActionKey,data:{cmd:"delete_history_item",item:n}}).done((t=>{let e=$(t.view).find(".inside").first();this.$testHistory.find(".inside").html(e.html())})).fail((t=>{console.log(t),this.$resultsContainer.html(window.wpcc.an_error_occurred+": "+t.responseText)})).always((()=>{this.setHistoryLoading(!1)})))}onSubmitTesterForm(t){t.preventDefault();let e=$(t.target),n=this.getSelectedSiteId(),s=this.getSelectedTestType(),i=this.getSelectedCategoryUrl(),r=(null!==i?i:e.find(this.selectorInputTestUrlPart).val())||null;null!==r&&r.length&&(this.$resultsContainer.html(""),this.$resultsContainer.hasClass("hidden")&&this.$resultsContainer.removeClass("hidden"),this.$resultsContainer.addClass("loading"),$.post(window.ajaxurl,{wcc_nonce:$("#wcc_nonce").val(),action:window.pageActionKey,data:{site_id:n,test_type:s,test_url_part:r}}).done((t=>{this.$resultsContainer.html(t.view.replace(/\[\u0000/g,"[\\").replace(/\u0000/g,":"));const e=this.createFilterSettingExplanations(t.filterSettingExplanations);null!==e&&(this.$resultsContainer.find("#details .detail-table tr.section-title-container").last().before(e),N.getInstance().init()),this.restoreToggleableStates();let n=$(t.viewTestHistory).find(".inside").first();this.$testHistory.find(".inside").html(n.html()),this.$testHistory.find(".inside").animate({scrollTop:0},"slow"),flashBackground(this.$testHistory.find(".test-history-item:first-child")),c.u.initAll()})).fail((t=>{console.log(t),this.$resultsContainer.html(window.wpcc.an_error_occurred+": "+t.responseText)})).always((()=>{this.$resultsContainer.removeClass("loading"),$(document).trigger(jQuery.Event(g.t.siteTesterTestFinished))})))}getSelectedTestType(){return $(this.selectorInputTestType+" option:selected").val()}getSelectedSiteId(){return $(this.selectorInputSiteId+" option:selected").val()}getTestHistoryData(t){let e=t.closest(".test-history-item").data("test");return null===e||"undefined"===e||void 0===e?null:e}toggleTestHistory(){this.isTestHistoryHidden?this.showTestHistory():this.hideTestHistory()}hideTestHistory(){let t=this.$testHistory.find(".inside").first(),e=this.$testHistory.find("h2 .toggle").first();t.hasClass("hidden")||(t.addClass("hidden"),e.removeClass("dashicons-arrow-up").addClass("dashicons-arrow-down")),this.isTestHistoryHidden=!0}showTestHistory(){let t=this.$testHistory.find(".inside").first(),e=this.$testHistory.find("h2 .toggle").first();t.hasClass("hidden")&&(t.removeClass("hidden"),e.removeClass("dashicons-arrow-down").addClass("dashicons-arrow-up")),this.isTestHistoryHidden=!1}setHistoryLoading(t){let e=this.$testHistory.find("> h2");t?e.addClass("loading"):e.removeClass("loading")}setTestUrlInputValue(t){let e=this.$testerForm.find(this.selectorInputTestUrlPart),n=!1,s=this.getCategoryUrlSelect();if(null!==s&&s.length){let e=s.find("option[value='"+t+"']")||null;null!==e&&e.length?(s.val(t),n=!0):s.val("")}e.val(n?"":t)}createFilterSettingExplanations(t){const e=R.getInstance().createFilterSettingExplainers(t||null);if(!e.length)return null;let n,s=$();for(n of(s=s.add($(`<tr class="section-title-container">\n                <td colspan="2">\n                    <div class="section-title">\n                        ${window.wpcc.filter_setting_explanations}\n                    </div>\n                </td>\n            </tr>`)),e))s=s.add($("<tr />").append(`<td class="detail-name"><span class="detail-name">${n.getName()}</span></td>`).append($('<td class="detail-value" />').append(n.toElement())));return s}}var L=__webpack_require__(877),x=__webpack_require__(685);class D{constructor(){this.selectorSettingsWrapper=".woocommerce-settings-wrapper",this.selectorTabContentWrapper=this.selectorSettingsWrapper+" > .tab-content-wrapper",this.$settingsContainer=$(this.selectorSettingsWrapper),this.$tabContainer=$(this.selectorSettingsWrapper+" > .tab-wrapper"),this.$contentContainer=$(this.selectorTabContentWrapper),this.selectorSelectProductType="#_wc_product_type",this.selectorCheckboxVirtual="#_wc_virtual",this.selectorCheckboxDownloadable="#_wc_downloadable",this.selectorOptionsContainer="#woocommerce-options-container"}static getInstance(){return null===this.INSTANCE&&(this.INSTANCE=new D),this.INSTANCE}}D.INSTANCE=null;class k{constructor(){let t=x.$.getInstance();t.$containerMetaBox.on("change","input[type=checkbox][data-dependants]",(t=>this.handleCheckboxDependants($(t.target)))),t.$containerMetaBox.on("change","select",(t=>this.handleSelectDependants($(t.target)))),this.handleElementDependantsInContainer(t.$containerMetaBox)}static getInstance(){return null===this.instance&&(this.instance=new k),this.instance}handleElementDependantsInContainer(t){t.find("input[type=checkbox][data-dependants]").each(((t,e)=>{let n=$(e);this.isParentTableRowVisible(n)&&this.handleCheckboxDependants($(e))})),t.find("select option[data-dependants]").parents("select").each(((t,e)=>{let n=$(e);this.isParentTableRowVisible(n)&&this.handleSelectDependants(n)}))}handleCheckboxDependants(t){let e=t.is(":checked");this.handleDependants(t,e)}handleSelectDependants(t){let e=t.data("prev")||null,n=t.val(),s=t.find('option[value="'+n+'"]').first(),i=null!==e&&e.length?t.find('option[value="'+e+'"]').first():null;null!==i?this.handleDependants(i,!1):t.find("option").each(((t,e)=>this.handleDependants($(e),!1))),this.handleDependants(s,!0),t.data("prev",n)}handleDependants(t,e){let n,s,i,r,o=t.data("dependants")||null;if(null!==o&&o)for(r=0;r<o.length;r++)s=this.startsWith(o[r],"!"),i=o[r],s&&(i=i.substring(1)),n=$(i),e?s?n.addClass("hidden"):n.removeClass("hidden"):s?n.removeClass("hidden"):n.addClass("hidden")}startsWith(t,e){return 0===t.lastIndexOf(e,0)}isParentTableRowVisible(t){return!1===t.closest("tr").hasClass("hidden")}}k.instance=null;class B{constructor(){B.isWooCommerceSettingsAvailable()&&(this.wcsv=D.getInstance(),this.handleURLHash(),this.wcsv.$settingsContainer.on("click",".tab-wrapper li > a",(t=>this.onClickTab(t))),$(document).on("change",this.wcsv.selectorSelectProductType,(t=>this.onChangeProductTypeSelect(t))),$(this.wcsv.selectorSelectProductType).trigger("change"))}static getInstance(){return null===this.INSTANCE&&(this.INSTANCE=new B),this.INSTANCE}onChangeProductTypeSelect(t){let e=$(t.target);if("external"==e.val()){let t=[$(this.wcsv.selectorCheckboxVirtual)||null,$(this.wcsv.selectorCheckboxDownloadable)||null];for(let e of t)null!==e&&e.length&&(e[0].checked=!1,e.trigger("change"))}k.getInstance().handleSelectDependants(e),k.getInstance().handleElementDependantsInContainer($(this.wcsv.$contentContainer))}static isWooCommerceSettingsAvailable(){return $(D.getInstance().selectorOptionsContainer).length>0}onClickTab(t){t.preventDefault();let e=$(t.target).closest("a");this.activateTab(e.data("tab"))}activateTab(t){let e=this.wcsv.$tabContainer.find('[data-tab="'+t+'"]');if(!e.length)return;this.wcsv.$contentContainer.find(".tab-content").addClass("hidden"),this.wcsv.$tabContainer.find("li").removeClass("active");let n=e.data("tab");$(n).removeClass("hidden"),e.closest("li").addClass("active");let s=window.location.hash.split("|");s[1]=n,history.replaceState(void 0,void 0,s.join("|"))}handleURLHash(){let t=window.location.hash||null;if(null===t||0!==t.indexOf("#_"))return;let e=t.split("|");if(e.length<2)return;let n=e[1];this.activateTab(n)}}B.INSTANCE=null;var M=__webpack_require__(687);class F{constructor(){}static getInstance(){return null===this.instance&&(this.instance=new F),this.instance}initForSelector(t){if(!$(t).length)return;let e=new window.Clipboard(t);e.on("success",(t=>{r.c.flashTooltip($(t.trigger),window.wpcc.copied),t.clearSelection()})),e.on("error",(t=>{let e=-1!=navigator.platform.indexOf("Mac")?"-C":"Ctrl + C";r.c.flashTooltip($(t.trigger),window.wpcc.press_to_copy.format(e))}))}}F.instance=null;class U{constructor(){this.inputNameCustomShortCodes="_post_custom_content_shortcode_selectors",this.customShortCodeButtonContainerSelector=".custom-short-code-container",this.updateCustomShortCodeButtonContainers();let t=this.getCustomShortCodeInputContainer();null!==t&&t.on("change",'input[name$="[short_code]"]',(()=>this.updateCustomShortCodeButtonContainers()))}static getInstance(){return null===this.instance&&(this.instance=new U),this.instance}updateCustomShortCodeButtonContainers(){let t=$(this.customShortCodeButtonContainerSelector)||null;if(null===t||!t.length)return;const e=this.getCustomShortCodeButtons()||null,n=null!==e&&e.length;let s;t.each(((t,i)=>{s=$(i),s.html(""),n&&s.append(e.clone())}));let i=this.customShortCodeButtonContainerSelector+" button";c.u.initForSelector(i),F.getInstance().initForSelector(i)}getCustomShortCodeButtons(){let t=this.getCustomShortCodeInputContainer();if(null===t)return null;let e,n=[];t.find('input[name*="[short_code]"]').each(((t,s)=>{e=$(s).val()||null,null!==e&&e.length&&n.push(e)}));let s,i,r=$("<div/>");for(let t of n)s="["+t+"]",i=$("<button/>").addClass("button").attr("type","button").attr("data-shortcode-name",t).attr("data-clipboard-text",s).attr(c.u.TOOLTIP_ATTRIBUTE_NAME,c.u.TOOLTIP_ATTRIBUTE_VALUE).attr("data-placement","top").attr("title",window.wpcc.custom_short_code+": "+t).html(s),r.append(i);return r}getCustomShortCodeInputContainer(){let t=$('input[name^="'+this.inputNameCustomShortCodes+'"]').first()||null;if(null===t||!t.length)return null;let e=t.closest(".inputs")||null;return null!==e&&e.length?e:null}}U.instance=null;var H=__webpack_require__(280),G=__webpack_require__(103),V=__webpack_require__(766),W=__webpack_require__(45);class j{constructor(){this.psv=x.$.getInstance(),this.notifier=a.d.getInstance(),this.testDataPreparer=W.a.getInstance(),this.psv.$containerMetaBox.on("click",this.psv.selectorTestButton,(t=>this.onClickTest(t))),$(document).on("click",".hide-test-results",(t=>this.onClickHideTestResults(t))),$(document).on("click",this.psv.selectorButtonSeeUnmodifiedTestResults,(t=>this.onClickSeeUnmodifiedResults(t))),$(document).on("click",this.psv.selectorInvalidateCacheButton,(t=>this.onClickInvalidateTestUrlCache(t))),$(document).on("click",this.psv.selectorInvalidateAllCachesButton,(t=>this.onClickInvalidateAllTestUrlCaches(t)))}static getInstance(){return null===this.instance&&(this.instance=new j),this.instance}onClickSeeUnmodifiedResults(t){let e=$(t.target).parent().find("ul").first();e.hasClass("hidden")?e.removeClass("hidden"):e.addClass("hidden")}onClickHideTestResults(t){t.preventDefault(),this.hideTestResults($(t.target))}hideTestResults(t){if(null===t||!t.length)return;let e=t.closest(".test-results");$(document).trigger(jQuery.Event(g.t.testResultsBeforeHidden,{container:e})),e.addClass("hidden"),$(document).trigger(jQuery.Event(g.t.testResultsHidden,{container:e})),e.find(".content").html("")}onClickTest(t){t.preventDefault();let e=$(t.target),n=this.testDataPreparer.prepareTestData(e)||null;if(null==n)return a.d.getInstance().notifyRegular(e,window.wpcc.test_data_not_retrieved),void console.error("Test data could not be retrieved.");let s=e.closest("td").find(".test-results"),i=s.find(".content");s.removeClass("hidden").addClass("loading"),i.html(""),e.addClass("loading"),$.post(window.ajaxurl,{wcc_nonce:this.psv.$wccNonce.val(),action:window.pageActionKey,data:n}).done((t=>{if(null==t||!t||null==t.view)return void i.html(window.wpcc.an_error_occurred);let n=$("<div>"+t.view+"</div>").find("ul").data("results");if(null!=n&&"undefined"!==n&&e.data("results",n),i.html(t.view),e.hasClass("wcc-category-map")){let e=$(this.psv.selectorCategoryMap).find(".inputs");for(let n=0;n<t.data.length;n++){let s=t.data[n];s.match("^javascript")||L.G.getInstance().addNewInputGroup(e).find("input").val(s)}}$(document).trigger(jQuery.Event(g.t.testResultsLoaded))})).fail((t=>{i.html(window.wpcc.an_error_occurred+" <br />"+t.responseText),console.log(t)})).always((()=>{s.removeClass("loading"),e.removeClass("loading")}))}onClickInvalidateTestUrlCache(t){t.preventDefault();let e=$(t.target),n=e.data("url")||null;if(null===n||!n.length)return void this.notifier.notify(e,window.wpcc.url_cannot_be_retrieved);let s=e.closest(".test-results");s.hasClass("loading")||(s.addClass("loading"),$.post(window.ajaxurl,{wcc_nonce:this.psv.$wccNonce.val(),action:window.pageActionKey,data:{cmd:"invalidate_url_response_cache",url:n}}).done((t=>{let n="1"==t,s=n?window.wpcc.cache_invalidated:window.wpcc.cache_could_not_be_invalidated;this.notifier.notifyRegular(e,s,n?l.k.SUCCESS:l.k.ERROR)})).fail((t=>{console.log(t),this.notifier.notify(e,window.wpcc.cache_could_not_be_invalidated)})).always((()=>{s.removeClass("loading")})))}onClickInvalidateAllTestUrlCaches(t){t.preventDefault();let e=$(t.target),n=e.closest(".test-results");n.hasClass("loading")||(n.addClass("loading"),$.post(window.ajaxurl,{wcc_nonce:this.psv.$wccNonce.val(),action:window.pageActionKey,data:{cmd:"invalidate_all_url_response_caches"}}).done((t=>{let n="1"==t,s=n?window.wpcc.all_cache_invalidated:window.wpcc.all_cache_could_not_be_invalidated;this.notifier.notifyRegular(e,s,n?l.k.SUCCESS:l.k.ERROR)})).fail((t=>{console.log(t),this.notifier.notify(e,window.wpcc.all_cache_could_not_be_invalidated)})).always((()=>{n.removeClass("loading")})))}}j.instance=null;class K{constructor(){this.initialized=!1,this.suitable=!1,this.clsDocsLinkSet="docs-link-set",this.queryParams=null}static getInstance(){return null===this.instance&&(this.instance=new K),this.instance}init(){if(this.initialized||!this.getDocsSiteUrl())return;this.initialized=!0;const t=this.getLabelIndexUrl();null!==t&&(this.transSeeInDocs=window.wpcc.see_docs_for_this_setting,$.getJSON(t,(t=>{this.labelIndex=t,this.suitable=!0})).fail((()=>{console.info("Documentation label index file could not be retrieved.")})))}addDocsLinkForSettingKey(t){if(!this.suitable)return;const e=$('label[for="'+t+'"]:not(.'+this.clsDocsLinkSet+")");if(1!==e.length)return;const n=e.parent().find(".info-text");if(1!==n.length)return;const s=this.labelIndex[t.substring(1)]||"";if(s.length){const t=this.createDocsSiteUrl(s);n.html(n.html()+'<span class="see-in-docs"><a href="'+t+'" target="_blank">'+this.transSeeInDocs+"</a></span>")}e.addClass(this.clsDocsLinkSet)}addDocsLinkForAllSettingKeys(){this.suitable&&$('td > label[for^="_"]:not(.'+this.clsDocsLinkSet+")").each(((t,e)=>{this.addDocsLinkForSettingKey($(e).attr("for"))}))}createDocsSiteUrl(t){let e=this.getUrlParams();const n=-1!==t.indexOf("#")?t.replace("#",e+"#"):t+e;return this.getDocsSiteUrl()+"/"+n}getLabelIndexUrl(){return void 0===this.labelIndexUrl&&(this.labelIndexUrl=this.getVar("docs_label_index_url")),this.labelIndexUrl}getDocsSiteUrl(){return void 0===this.docsSiteUrl&&(this.docsSiteUrl=this.getVar("docs_site_url")),this.docsSiteUrl}getVar(t){const e=this.getVars();return null===e?null:e.hasOwnProperty(t)?e[t]:null}getVars(){return this.isVarsExist()?window.wpcc.vars:null}isVarsExist(){return void 0===this.varsExist&&(this.varsExist=void 0!==window.wpcc&&void 0!==window.wpcc.vars),this.varsExist}getUrlParams(){if(null!==this.queryParams)return this.queryParams;let t={};const e=$('input[name="_main_page_url"]');e.length&&e.val()&&(t.site=e.val());const n=$.param(t);return this.queryParams=n.length?"?"+n:"",this.queryParams}}K.instance=null;var Y,z=__webpack_require__(709);!function(t){t[t.ENTER=0]="ENTER",t[t.ESCAPE=1]="ESCAPE",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"}(Y||(Y={}));class q{constructor(t){this.event=t||null}getKey(){if(null===this.event)return;const t=q.getKeyMap();return t.has(this.event.key)?t.get(this.event.key):null}static getKeyMap(){return null===this.keyMap&&(this.keyMap=(new Map).set("Enter",Y.ENTER).set("Escape",Y.ESCAPE).set("ArrowLeft",Y.LEFT).set("ArrowRight",Y.RIGHT)),this.keyMap}}q.keyMap=null;var X=__webpack_require__(136);class Q{constructor(){this.psv=x.$.getInstance(),this.notifier=a.d.getInstance(),this.inputGroupHandler=L.G.getInstance(),this.tabHandler=G.I.getInstance(),this.initSelectOptions(),c.u.initAll(),M.S.getInstance().initNavigations(),U.getInstance(),j.getInstance(),k.getInstance(),K.getInstance().init(),X.Z.init(),this.psv.$containerMetaBox.on("click",this.psv.selectorLoadTranslationLanguages,(t=>this.onLoadRefreshClearTranslationLanguages(t))),this.psv.$containerMetaBox.on("click",this.psv.selectorClearTranslationLanguages,(t=>this.onLoadRefreshClearTranslationLanguages(t))),this.psv.$containerMetaBox.on("click",".info-button",(t=>this.onClickInfoButton(t))),this.psv.$containerMetaBox.on("click",".toggle-info-texts",(t=>this.onClickToggleInfoTexts(t))),"function"==typeof window.Clipboard&&this.initCopyToClipboard(),this.psv.$containerMetaBox.on("click",".input-button-container > button",(t=>t.preventDefault())),$(document).on("click",this.psv.selectorLoadGeneralSettingsButton,(t=>this.handleLoadClearGeneralSettings(t))),$(document).on("click",this.psv.selectorClearGeneralSettingsButton,(t=>this.handleLoadClearGeneralSettings(t))),V.I.getInstance(),$(document).on("focus",'textarea[readonly="readonly"]',(t=>this.onFocusReadonlyTextArea(t))),this.psv.$form.on("submit",(t=>this.onSubmitForm(t))),$(document).on("change",this.psv.selectorCategoryMap+" select",(t=>this.onChangeCategory(t))),$(document).on("click",this.psv.selectorQuickSaveButton,(t=>this.quickSave(t))),this.psv.$containerMetaBox.on("keydown","input, select",(t=>{new q(t).getKey()===Y.ENTER&&this.quickSave(t)})),this.inputGroupHandler.registerModifier((t=>{t.hasClass("category-map")&&this.setCategoryTaxonomyNameForSelect(t.find("select"))})),B.getInstance()}static getInstance(){return this.instance||(this.instance=new Q),this.instance}onChangeCategory(t){let e=$(t.target);this.setCategoryTaxonomyNameForSelect(e)}setCategoryTaxonomyNameForSelect(t){let e=t.find(":selected")||null;if(null===e||!e.length)return;let n=e.data("taxonomy")||null;t.closest(".input-container").find("input.category-taxonomy").val(n)}quickSave(t){let e=$("#_post_import_settings")||null;if(null!==e&&e.length){let t=e.val()||null;if(null!==t&&t.length)return void this.psv.$form.find('input[type="submit"]').trigger("click")}let n=$(this.psv.selectorQuickSaveButton);if(!(n.length>0))return;if(n=n.first(),t.preventDefault(),n.hasClass("loading"))return;let s=n.data("post-id")||null;if(null===s||!s)return void this.notifier.notifyRegular(n,window.wpcc.post_id_not_found,l.k.ERROR,H.E.LEFT);if(!this.beforeFormSubmit(t))return void $(document).find("html, body").stop().animate({scrollTop:20},500,"swing");let i=this.getFormValuesSerialized();if(null===i||!i.length)return void this.notifier.notifyRegular(n,window.wpcc.settings_not_retrieved,l.k.ERROR,H.E.LEFT);let r="flip",o="shake",a="bounce infinite loading";n.removeClass(r).removeClass(o).addClass(a),$.post(window.ajaxurl,{wcc_nonce:this.psv.$wccNonce.val(),action:window.pageActionKey,data:{cmd:"saveSiteSettings",postId:s,settings:i}}).done((t=>{let e=t.success,s=t.message;if(e){n.removeClass(a).addClass(r),this.notifier.notifyRegular(n,window.wpcc.settings_saved,l.k.SUCCESS,H.E.LEFT);let e=t.settingsForExport||null;if(null!==e&&e.length){let t=$(this.psv.selectorExportSettingsTextArea)||null;null!==t&&t.val(e)}$(document).trigger(jQuery.Event(g.t.siteSettingsQuickSaved))}else this.notifier.notifyRegular(n,s,l.k.ERROR,H.E.LEFT)})).fail((()=>{n.removeClass(a).addClass(o),this.notifier.notifyRegular(n,window.wpcc.an_error_occurred,l.k.ERROR,H.E.LEFT)})).always((()=>{n.removeClass(a)}))}onSubmitForm(t){this.beforeFormSubmit(t)&&z.T.getInstance().detachAllInputNames()}beforeFormSubmit(t){let e=this.validateForm(t);void 0!==window.optionsBox&&window.optionsBox.close();let n=$(this.psv.selectorInputURLHash);return n.length&&n.val(window.location.hash+"|"+document.documentElement.scrollTop),z.T.getInstance().updateFilterValueInputs(),e}validateForm(t){let e=$(this.psv.selectorInputImport);if(e.length&&e.val().length>0)return void this.tabHandler.removeErrorsFromAllTabs();this.psv.$errorAlert.addClass("hidden"),this.tabHandler.removeErrorsFromAllTabs();let n,s=!1,i=[];if(this.validateCategoryMap(i)&&(s=!0),this.validateMainUrl(i)&&(s=!0),this.validatePasswords(i)&&(s=!0),!s)return!0;setTimeout((()=>{for(let t in i)i.hasOwnProperty(t)&&this.tabHandler.setTabError(i[t],!0)}),1),this.psv.$errorAlert.removeClass("hidden").find("ol").remove();const r=[],o=$("<ol />");for(const t of i)n=this.tabHandler.getElementPath(t),null!==n&&-1===r.indexOf(n)&&(o.append(`<li>${n}</li>`),r.push(n));return this.psv.$errorAlert.append(o),t.preventDefault(),!1}validatePasswords(t){const e=$(this.psv.selectorInputContainerPasswords);if(!e.length)return!1;let n=$("#_wpcc_change_password");if(null==n||!n[0].checked)return!1;let s=!1;e.each(((t,e)=>{$(e).closest(".input-group").removeClass(this.psv.clsHasError)}));let i=null,r=null,o=null;return e.find("input[type=password]").each(((e,n)=>{let a=$(n);null==i?i=!0:null==r?r=a.val():null==o&&(o=a.val(),r!=o&&(a.closest(".input-group").addClass(this.psv.clsHasError),r=o=null,s=!0,t.push(a)))})),s}validateMainUrl(t){const e=$("#_main_page_url");if(!e.length)return!1;let n=!1;return e.closest(".input-group").removeClass(this.psv.clsHasError),e.val().length||(n=!0,e.closest(".input-group").addClass(this.psv.clsHasError),t.push(e)),n}validateCategoryMap(t){const e=$(this.psv.selectorCategoryMap);if(!e.length)return!1;let n=!1,s=[],i=!1;return e.find(".input-group").each(((t,e)=>{$(e).removeClass(this.psv.clsHasError)})),e.find("input[type=text]").each(((t,e)=>{let n=$(e);-1==s.indexOf(n.val())?s.push(n.val()):(n.closest(".input-group").addClass(this.psv.clsHasError),i||(i=!0)),n.val().length||(n.closest(".input-group").addClass(this.psv.clsHasError),i||(i=!0))})),i&&(n=!0,t.push(e)),n}getFormValuesSerialized(){let t=("function"==typeof window.tinymce?window.tinymce:window.tinyMCE)||null;if(null!==t){let e,n,s,i,r;$("textarea.wp-editor-area").each(((o,a)=>{e=$(a),n=e.closest(".wp-editor-wrap"),n.hasClass("html-active")||(s=e.attr("name"),r=t.get(s)||null,null!==r&&(i=r.getContent(),e.val(i)))}))}this.beforeFormSerialization();const e=this.psv.$form.serialize()||null;return this.afterFormSerialization(),e}beforeFormSerialization(){z.T.getInstance().detachAllInputNames()}afterFormSerialization(){z.T.getInstance().reattachAllInputNames()}onFocusReadonlyTextArea(t){let e=$(t.target);e.trigger("select"),e.on("mouseup",(function(){return e.off("mouseup"),!1}))}handleLoadClearGeneralSettings(t){t.preventDefault();let e=$(t.target),n=e.attr("id");if(e.hasClass("loading"))return;e.addClass("loading");const s="loadGeneralSettings",i="#"+n==this.psv.selectorClearGeneralSettingsButton?"clearGeneralSettings":s;$.post(window.ajaxurl,{wcc_nonce:this.psv.$wccNonce.val(),action:window.pageActionKey,data:{cmd:i}}).done((t=>{let e=t.view;$(this.psv.selectorTabGeneralSettings).html(e).find("[type=checkbox]").trigger("change"),V.I.getInstance().initSortablesInContainer(this.psv.selectorTabGeneralSettings),k.getInstance().handleElementDependantsInContainer($(this.psv.selectorTabGeneralSettings)),i===s&&$(document).trigger(jQuery.Event(g.t.generalSettingsLoaded))})).fail((t=>{console.log(t)})).always((()=>{e.removeClass("loading")}))}initCopyToClipboard(){F.getInstance().initForSelector(".input-button-container > button")}onClickToggleInfoTexts(t){t.preventDefault(),this.psv.infoTextsHidden&&K.getInstance().addDocsLinkForAllSettingKeys(),this.psv.$containerMetaBox.find(".info-text").each(((t,e)=>{this.psv.infoTextsHidden?$(e).removeClass("hidden"):$(e).addClass("hidden")})),this.psv.infoTextsHidden=!this.psv.infoTextsHidden}onClickInfoButton(t){t.preventDefault();let e=$(t.target).closest(".info-button");const n=e.parent().find(".info-text").first();if(n.hasClass("hidden")){const t=e.parent().find("label").first();t.length&&K.getInstance().addDocsLinkForSettingKey(t.attr("for")),n.removeClass("hidden")}else n.addClass("hidden")}onLoadRefreshClearTranslationLanguages(t){t.preventDefault();let e=$(t.target),n=e.data("wcc"),s=n.serviceType,i=n.requestType,r={};r.serviceType=s,r.requestType=i,r.isOption=$(".wcc-general-settings").length?1:0,W.a.getInstance().addTranslationOptions(null,r,!0),e.addClass("loading"),$.post(window.ajaxurl,{wcc_nonce:this.psv.$wccNonce.val(),action:window.pageActionKey,data:r}).done((t=>{if(null==t||!t||null==t.view||null!=t.errors&&t.errors.length){if(this.notifier.notify(e,window.wpcc.an_error_occurred),console.log(t),null!=t&&null!=t.view){let n=e.closest("td").find(".test-results");n.find(".content").html(t.view),n.removeClass("hidden")}return}let n=$(t.view.from),s=$(t.view.to),i=n.find("select").first().attr("name"),r=s.find("select").first().attr("name");$("label[for='"+i+"']").closest("tr").find("td:nth-child(2)").html(t.view.from),$("label[for='"+r+"']").closest("tr").find("td:nth-child(2)").html(t.view.to),this.flashBackground($("#"+i)),this.flashBackground($("#"+r))})).fail((t=>{this.notifier.notify(e,window.wpcc.an_error_occurred+": "+t.responseText),console.log(t)})).always((()=>{e.removeClass("loading")}))}initSelectOptions(){"function"==typeof $.fn.select2&&$("select[multiple]").select2({theme:"classic",width:"100%"})}flashBackground(t){t.stop().css("background-color","#b8ea84").animate({backgroundColor:"#FFFFFF"},1e3)}}function J(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)t[s]=n[s]}return t}Q.instance=null;const Z=function t(e,n){function s(t,s,i){if("undefined"!=typeof document){"number"==typeof(i=J({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var o in i)i[o]&&(r+="; "+o,!0!==i[o]&&(r+="="+i[o].split(";")[0]));return document.cookie=t+"="+e.write(s,t)+r}}return Object.create({set:s,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],s={},i=0;i<n.length;i++){var r=n[i].split("="),o=r.slice(1).join("=");try{var a=decodeURIComponent(r[0]);if(s[a]=e.read(o,a),t===a)break}catch(t){}}return t?s[t]:s}},remove:function(t,e){s(t,"",J({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,J({},this.attributes,e))},withConverter:function(e){return t(J({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class tt{constructor(t,e,n,s){this.tourId=t,this.stepId=e,this.redirectUrl=n,this.pageType=s}getTourId(){return this.tourId}getStepId(){return this.stepId}getRedirectUrl(){return this.redirectUrl}getPageType(){return this.pageType}toJson(){return{tourId:this.getTourId(),stepId:this.getStepId(),redirectUrl:this.getRedirectUrl(),pageType:this.getPageType()}}static fromJson(t){return new tt(t.tourId||null,t.stepId||null,t.redirectUrl||null,t.pageType||null)}}class et{constructor(t,e,n,s){this.pageType=t,this.guideId=e,this.stepIndex=n,this.urlParams=s||new Map}addUrlParam(t,e){return this.urlParams.set(t,e),this}getPageType(){return this.pageType}getGuideId(){return this.guideId}getStepIndex(){return this.stepIndex}getUrlParams(){return this.urlParams}toJson(){return{pageType:this.pageType,guideId:this.guideId,stepIndex:this.stepIndex,urlParams:[...this.urlParams.entries()]}}static fromJson(t){return new et(t.pageType,t.guideId,parseInt(t.stepIndex),new Map(t.urlParams))}}class nt{static getPageType(){if($("#wpc-crawler-settings").length)return d.SITE_SETTINGS;const t=window.location.href;if(null===this.slugPageTypeMap&&(this.slugPageTypeMap=new Map([["dashboard",d.DASHBOARD],["general-settings",d.GENERAL_SETTINGS],["site-tester",d.SITE_TESTER],["tools",d.TOOLS],["feature-request",d.FEATURE_REQUEST]])),null!==t.indexOf("wcc_sites")){for(let[e,n]of this.slugPageTypeMap.entries())if(-1!==t.indexOf(`page=wp-content-crawler-${e}`))return n;if(-1!==t.indexOf("/edit.php?post_type=wcc_sites"))return d.SITE_LISTING;if(-1!==t.indexOf("/post-new.php?post_type=wcc_sites"))return d.SITE_SETTINGS}return null}static getPageTypeName(t){return null===(t||null)?"":void 0!==window.wpcc.page_names[t]?window.wpcc.page_names[t]:t.toString()}static getPageTypeUrl(t){return null===this.pageTypeUrlMap&&(this.pageTypeUrlMap=new Map([[d.ADD_NEW_SITE,"/wp-admin/post-new.php?post_type=wcc_sites"],[d.SITE_LISTING,"/wp-admin/edit.php?post_type=wcc_sites"],[d.DASHBOARD,"/wp-admin/edit.php?post_type=wcc_sites&page=wp-content-crawler-dashboard"],[d.SITE_TESTER,"/wp-admin/edit.php?post_type=wcc_sites&page=wp-content-crawler-site-tester"],[d.TOOLS,"/wp-admin/edit.php?post_type=wcc_sites&page=wp-content-crawler-tools"],[d.GENERAL_SETTINGS,"/wp-admin/edit.php?post_type=wcc_sites&page=wp-content-crawler-general-settings"]])),this.pageTypeUrlMap.has(t)?this.pageTypeUrlMap.get(t):null}static getPageTypeMenuLinkSelector(t){const e=this.getPageTypeUrl(t);if(null===e)return null;let n;n=t===d.ADD_NEW_SITE?/[^\/]+$/:-1!==e.indexOf("page=")?/page=[^\s&]+/:/\?.*$/;const s=n.exec(e);return s[0]?`#menu-posts-wcc_sites [href*="${s[0]}"]`:null}}nt.pageTypeUrlMap=null,nt.slugPageTypeMap=null;var st=__webpack_require__(564),it=__webpack_require__.n(st);class rt{static isSame(t,e,n=!1){if("string"==typeof t&&(t=this.parseUrl(t)),"string"==typeof e&&(e=this.parseUrl(e)),t.pathname!==e.pathname)return!1;if(n&&t.hash!==e.hash)return!1;const s=t.query,i=e.query;if(Object.getOwnPropertyNames(s).length!==Object.getOwnPropertyNames(i).length)return!1;for(let t in s)if(s.hasOwnProperty(t)&&s[t]!==i[t])return!1;return!0}static parseUrl(t){return new(it())(t,!0)}}class ot{constructor(){}static getInstance(){return e.u.getInstance().get("CookieService",(()=>new ot))}setAutoShown(t){this.setCookie(this.getAutoShownCookieNameFor(t),"1")}isAutoShown(t){return"1"===(Z.get(this.getAutoShownCookieNameFor(t))||null)}getAutoShownCookieNameFor(t){return ot.AUTO_SHOWN_NAME_PREFIX+t.toString()}setRedirectBackCookie(t){this.setCookie(this.getRedirectBackCookieNameFor(t.getTourId(),t.getStepId()),t.toJson())}removeRedirectBackCookie(t,e){return Z.remove(this.getRedirectBackCookieNameFor(t,e)),this}getRedirectBackCookieFor(t,e){const n=Z.get(this.getRedirectBackCookieNameFor(t,e))||null;return null!==n&&n.length?tt.fromJson(JSON.parse(n)):null}getRedirectBackCookieNameFor(t,e){return ot.REDIRECT_BACK_NAME_PREFIX+t+e}setAutoStartCookie(t){this.setCookie(this.getAutoStartCookieNameFor(t.getPageType()),t.toJson())}removeAutoStartCookie(t){return Z.remove(this.getAutoStartCookieNameFor(t)),this}removeAutoStartCookieForCurrentPage(){return this.removeAutoStartCookie(nt.getPageType()),this}getAutoStartCookieForCurrentPage(){const t=nt.getPageType(),e=this.getAutoStartCookieNameFor(t),n=Z.get(e)||null;if(null===n||!n.length)return null;const s=et.fromJson(JSON.parse(n));if(0===s.getUrlParams().size)return s;const i=rt.parseUrl(window.location.href).query;for(let[t,e]of s.getUrlParams().entries())if(!i.hasOwnProperty(t)||i[t]!==e)return null;return s}getAutoStartCookieNameFor(t){return ot.AUTO_START_NAME_PREFIX+t}removeTourCookies(t){const e=Z.get(),n=[this.getRedirectBackCookieNameFor(t,""),this.getAutoStartCookieNameFor("")];for(let t in e)n.forEach((e=>{0===t.indexOf(e)&&Z.remove(t)}))}setCookie(t,e){const n="object"==typeof e?JSON.stringify(e):e;Z.set(t,n,{expires:7300})}}ot.REDIRECT_BACK_NAME_PREFIX="wpcc_rb_",ot.AUTO_START_NAME_PREFIX="wpcc_auto_start_",ot.AUTO_SHOWN_NAME_PREFIX="wpcc_auto_shown_";var at,lt,ct,ut,ht,dt,pt,gt=__webpack_require__(657);class _t{constructor(t){this.tourId=null,this.stepId=null,this.targetPage=t,this.currentUrlHref=window.location.href}execute(){const t=nt.getPageType(),e=this.getTargetPage(),n=e.getPageUrlPath();if(!n){if(e.getPageType()===t){const t=rt.parseUrl(this.currentUrlHref);e.setPageUrlPath(this.currentUrlHref.substring(this.currentUrlHref.indexOf(t.pathname)))}return}const s=rt.parseUrl(n),i=rt.parseUrl(this.currentUrlHref);if(rt.isSame(s,i))return;if(e.getPageType()===t&&t!==d.SITE_SETTINGS&&t!==d.SITE_LISTING)return;const r=this.getPrevStep();if(r){const t=r.getRedirectCommand().getTargetPage();ot.getInstance().setRedirectBackCookie(new tt(this.tourId,r.getStepId(),t.getPageUrlPath(),t.getPageType()))}e.getPageType()&&ot.getInstance().setAutoStartCookie(new et(e.getPageType(),this.tourId,parseInt(this.stepId))),window.location.href=s.toString(),this.callReject(`Current URL is not the one required for '${this.tourId}#${this.stepId}'. I am going to redirect to ${s.toString()}...`)}setPromiseCallbacks(t,e){this.resolve=t,this.reject=e}setStepInfo(t,e){this.tourId=t,this.stepId=e}getTargetPage(){return this.targetPage}getPrevStep(){const t=parseInt(this.stepId);if(0===t)return null;const e=On.getInstance().getGuideWithId(this.tourId);if(!e)return null;const n=this.getTargetPage().getPageType(),s=e.getTourBuilder().getSteps();let i,r;for(let e=t-1;e>=0;e--)if(i=s[e]||null,null!==i&&(r=i.getRedirectCommand()||null,null!==r&&null!==r.getTargetPage().getPageType()&&r.getTargetPage().getPageType()!==n))return i;return null}callReject(t){return null!==(this.reject||null)&&this.reject(t),this}}class ft{constructor(t="",e,n=null){this.stepBuilders=[],this.tourName="",this.tourDescription=null,this.targetPage=null,this.tour=null,this.environmentChanged=!1,this.tourName=t,this.tourId=e,this.tourDescription=n}addStep(...t){let e=this.stepBuilders.length-1;return t.forEach((t=>{t.setStepIndex(++e).setTourBuilder(this),null!==this.targetPage&&t.addBeforeShowCommand(new _t(this.targetPage)),this.stepBuilders.push(t)})),this}setPage(t){return this.targetPage=t,this}build(t=!1){if(!t&&null!==this.tour)return this.tour;this.tour=new gt.Z.Tour({tourName:this.tourName,defaultStepOptions:{classes:"wpcc-guide",scrollTo:{behavior:"smooth",block:"center"},cancelIcon:{enabled:!0},modalOverlayOpeningPadding:12},keyboardNavigation:!1,useModalOverlay:$(window).width()>782}),this.tour.on("start",(()=>this.onTourStart())),this.tour.on("complete",(()=>this.onTourComplete())),this.tour.on("cancel",(()=>this.onTourCanceled())),this.tour.on("hide",(()=>this.onTourEnd())),this.tour.on("show",(t=>this.onShowStep(t)));let e,n,s=this.getStepCount();for(let t=0;t<s;t++)e=this.stepBuilders[t],t+1===s&&e.setLast(),0===t&&e.setFirst(),e.setTour(this.tour),n=this.tour.addStep(e.build()),e.setStep(n);return this.tour}onTourStart(){this.prepareEnvironment()}onTourEnd(){ot.getInstance().removeTourCookies(this.tourId),this.revertEnvironmentToOriginal()}onTourComplete(){ot.getInstance().removeTourCookies(this.tourId),this.revertEnvironmentToOriginal()}onTourCanceled(){ot.getInstance().removeTourCookies(this.tourId),this.revertEnvironmentToOriginal()}onShowStep(t){this.prepareEnvironment()}prepareEnvironment(){this.environmentChanged||(this.environmentChanged=!0,G.I.getInstance().disableFixing(!0))}revertEnvironmentToOriginal(){this.environmentChanged&&(this.environmentChanged=!1,G.I.getInstance().disableFixing(!1))}getTourId(){return this.tourId}getTourName(){return this.tourName}getTourDescription(){return this.tourDescription}getTour(){return this.build()}getSteps(){return this.stepBuilders}getStepCount(){return this.stepBuilders.length}getSummaryAsHtml(){const t=`<ul class="step-list">${this.stepBuilders.map((t=>`<li class="step-item">${t.getSummaryAsHtml()}</li>`)).join("")}</ul>`,e=this.getTourDescription()?`<div class="tour-desc">${this.getTourDescription()}</div>`:"";return`\n            <div class="tour-summary" data-id="${this.getTourId()}">\n                <div class="tour-header">\n                    <div class="start-tour" title="${window.wpcc.start_guide}">\n                        <div class="start-button">\n                            <span class="dashicons dashicons-controls-play"></span>\n                        </div>\n                    </div>\n                    <div class="tour-info">\n                        <div class="tour-title">${this.getTourName()}</div>\n                        ${e}\n                    </div>\n                    <span class="dashicons dashicons-arrow-up-alt2"></span>\n                </div>\n                <div class="tour-steps">\n                    ${t}\n                </div>\n            </div>\n        `.trim()}}class mt{constructor(t,e,n){this.pageType=null,this.pageTitle=t,this.setPageUrlPath(e),this.pageType=n||null}getPageTitle(){return this.pageTitle}getPageUrlPath(){return this.pageUrlPath}setPageUrlPath(t){return this.pageUrlPath=t?0!==t.indexOf("/")?`/${t}`:t:null,this}getPageType(){return this.pageType}toJson(){return{pageTitle:this.getPageTitle(),pageUrlPath:this.getPageUrlPath(),pageType:this.getPageType()}}static fromPageType(t){const e=nt.getPageTypeUrl(t),n=nt.getPageTypeName(t);return new mt(n,e,t)}static fromJson(t){return new mt(t.pageTitle||null,t.urlPath||null,t.pageType||null)}}class St{constructor(){this.tourBuilder=null}getName(){return this.getGuideInfo().name||window.wpcc.no_name}getDescription(){return this.getGuideInfo().desc||null}getTourBuilder(){return null===this.tourBuilder&&(this.tourBuilder=new ft(this.getName(),this.getId(),this.getDescription()).setPage(mt.fromPageType(this.getStartPageType())),this.prepareTourBuilder(this.tourBuilder)),this.tourBuilder}getSummaryAsHtml(){return this.getTourBuilder().getSummaryAsHtml()}start(t=0){const e=this.getTourBuilder(),n=e.getStepCount()-1;n<0?console.warn("This guide does not have any steps."):(t>n&&(console.warn(`Index ${t} is greater than the maximum available index ${n}. Guide will start at index 0.`),t=0),e.getTour().show(t))}getGuideInfo(){return window.wpcc.guide_info[this.getId()]||{}}}!function(t){t.DUMMY_GUIDE="dummy-tour",t.SAVING_POSTS_AUTOMATICALLY="saving-posts-automatically",t.UPDATING_POSTS_AUTOMATICALLY="updating-posts-automatically",t.TESTING_SITE_SETTINGS="testing-site-settings",t.TRANSLATING_POSTS_AUTOMATICALLY="translating-posts-automatically",t.USING_COOKIES="using-cookies",t.USING_CUSTOM_GENERAL_SETTINGS="using-custom-general-settings",t.ADDING_CATEGORY_URLS_AUTOMATICALLY="adding-category-urls-automatically",t.SHOWING_IFRAMES_IN_POST_CONTENT="showing-iframes-in-post-content",t.REMOVING_LINKS_IN_POST_CONTENT="removing-links-in-post-content",t.CREATING_POST_CATEGORIES_AUTOMATICALLY="creating-post-categories-automatically",t.SAVING_IMAGES_IN_POST_CONTENT="saving-images-in-post-content",t.SHOWING_LAZY_LOADED_IMAGES="saving-lazy-loaded-images",t.REMOVING_UNNECESSARY_ELEMENTS_FROM_POST="removing-unnecessary-elements-from-post",t.MANUALLY_SAVING_POSTS="manually-saving-posts",t.MANUALLY_UPDATING_POSTS="manually-updating-posts",t.SAVING_WOOCOMMERCE_PRODUCTS="saving-woocommerce-products",t.SAVING_FEATURED_IMAGES="saving-featured-images",t.TRANSLATING_WITH_YANDEX_TRANSLATE="translating-with-yandex-translate",t.TRANSLATING_WITH_GOOGLE_CLOUD_TRANSLATION="translating-with-google-cloud-translation",t.TRANSLATING_WITH_MICROSOFT_TRANSLATOR_TEXT="translating-with-microsoft-translator-text",t.TRANSLATING_WITH_AMAZON_TRANSLATE="translating-with-amazon-translate",t.DISPLAY_GUIDES="display-guides"}(at||(at={}));class Tt{constructor(){this.tabKey=null}execute(){if(null===this.tabKey)return void console.warn(`Tab key must be set for ${Tt.name}. Since tab key is null, no tab will be activated.`);let t=G.I.getInstance();t.isTabActive(this.tabKey)||t.activateTabWithKey(this.tabKey)}setMainTabKey(t){return this.tabKey=t.getMainTabKey(),this}}!function(t){t.UNIQUE="unique",t.SIMILAR="similar",t.SIMILAR_SPECIFIC="similar_specific",t.CONTAINS="contains"}(lt||(lt={}));class vt{constructor(t=2,e=[]){this.minClassNameLength=2,this.rcssescape=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,this.minClassNameLength=t,this.unwantedClasses=e}getElementClasses(t){let e=t.prop("classList")||null;if(null===e||!e.length)return[];let n=[];return e.forEach(((t,e,s)=>{-1!==this.unwantedClasses.indexOf(t)||t.length<this.minClassNameLength||n.push(t)})),n}removeUnwantedClassesFromSelector(t){for(let e of this.unwantedClasses)t=t.replace(r.c.getMatchAllRegEx(`.${e}`),"").replace(r.c.getMatchAllRegEx(`[class="${e}"]`),"").replace(r.c.getMatchAllRegEx(`[class='${e}']`),"").replace(r.c.getMatchAllRegEx(`[class=${e}]`),"").replace(r.c.getMatchAllRegEx(e),"");return t}escapeClassNames(t){return t.map((t=>this.escapeSelector(t)))}escapeSelector(t){return(t+"").replace(this.rcssescape,this.fcssescape)}getPowerSet(t){return this.bwPowerSet(t)}segment(t){let e,n=t.split(" ").map((t=>t.trim())),s=[],i=null;for(let t=0,r=n.length;t<r;t++)e=n[t],-1===e.indexOf("[")||-1!==e.indexOf("]")?-1!==e.indexOf("[")||-1===e.indexOf("]")||null===i?null===i&&s.push(e):(s.push(n.slice(i,t+1).join(" ")),i=null):i=t;return s}getUnwantedClasses(){return this.unwantedClasses}fcssescape(t,e){return e?"\0"===t?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}bwPowerSet(t){const e=[],n=2**t.length;for(let s=0;s<n;s+=1){const n=[];for(let e=0;e<t.length;e+=1)s&1<<e&&n.push(t[e]);e.push(n)}return e}}class Ct{constructor(){this.postId=null,this.$inputDevToolsState=$("input[name=_dev_tools_state]").first(),this.$currentDevToolsButton=null,this.lightboxTitleSelector=".lightbox-title",this.devToolsButtonSelector=".wcc-dev-tools",this.devToolsContentContainerSelector=".dev-tools-content-container",this.devToolsContentClass="dev-tools-content",this.devToolsContentSelector=`.${this.devToolsContentClass}`,this.lightboxSelector=".featherlight",this.lightboxContainerSelector=".featherlight-content",this.lightboxDevToolsContentSelector=this.lightboxContainerSelector+" "+this.devToolsContentSelector,this.toolbarSelector=this.lightboxDevToolsContentSelector+" .toolbar",this.iframeSelector=this.lightboxDevToolsContentSelector+" iframe.source",this.$wccNonce=$("#wcc_nonce"),this.hoverClass="wpcc-element-hovered",this.elementSelectedClass="wpcc-element-selected",this.hoverStyleSelector="#iframe-style",this.urlCache={},this.$lightboxInstance=null,this.addressBarSelector=this.toolbarSelector+" .address-bar",this.backButtonSelector=this.addressBarSelector+" .back",this.forwardButtonSelector=this.addressBarSelector+" .forward",this.refreshButtonSelector=this.addressBarSelector+" .refresh",this.goButtonSelector=this.addressBarSelector+" .go",this.urlInputSelector=this.addressBarSelector+" input",this.urlInputId="_dt_toolbar_url",this.cssSelectorToolsContainerSelector=this.lightboxContainerSelector+" .css-selector-tools",this.cssInputSelector=this.lightboxContainerSelector+" .css-selector-input input",this.cssInputId="_dt_toolbar_css_selector",this.cssTestSelector=this.lightboxContainerSelector+" .css-selector-test",this.cssClearHighlightsSelector=this.lightboxContainerSelector+" .css-selector-clear-highlights",this.cssRemoveElementsSelector=this.lightboxContainerSelector+" .css-selector-remove-elements",this.cssShowAlternativesSelector=this.lightboxContainerSelector+" .css-selector-show-alternatives",this.cssUseButtonSelector=this.lightboxContainerSelector+" .css-selector-use",this.toolbarTestResultsContainerSelector=this.lightboxContainerSelector+" .test-results",this.toolbarTestResultsContentContainerSelector=this.toolbarTestResultsContainerSelector+" .content",this.iframeStatusSelector=this.lightboxContainerSelector+" .iframe-status",this.sidebarSelector=this.lightboxContainerSelector+" .sidebar",this.sidebarCloseSelector=this.sidebarSelector+" .sidebar-close",this.sidebarOpenSelector=".sidebar-open",this.sidebarOpenedClass="opened",this.sidebarSectionClass="sidebar-section",this.sidebarSectionContentClass="section-content",this.sidebarSectionHistoryClass="history",this.sidebarSectionUsedSelectorsClass="used-selectors",this.sidebarSectionAlternativeSelectorsClass="alternative-selectors",this.sidebarSectionSelector=this.sidebarSelector+" ."+this.sidebarSectionClass,this.sidebarSectionTitleContainerSelector=this.sidebarSectionSelector+" .section-title",this.sidebarSectionTitleSelector=this.sidebarSectionTitleContainerSelector+" > span",this.sidebarSectionContentSelector=this.sidebarSectionSelector+" ."+this.sidebarSectionContentClass,this.btnClearHistorySelector=this.lightboxSelector+" .clear-history",this.toggleExpandClass="toggleExpand",this.sidebarSectionToggleExpandSelector=this.sidebarSelector+" ."+this.toggleExpandClass,this.sidebarSectionExpandedClass="expanded",this.settingsMetaBoxSelector=".wcc-settings-meta-box",this.classCssSelector="selector",this.classUrl="url",this.classOptionsToolbar="options",this.optionsToolbarSelector=this.lightboxSelector+" ."+this.classOptionsToolbar,this.optHoverSelectSelector=this.optionsToolbarSelector+" .toggle-hover-select",this.optTargetHTMLTagClass="target-html-tag",this.optTargetHTMLTagSelector=this.optionsToolbarSelector+" ."+this.optTargetHTMLTagClass,this.optSelectorFinderBehaviorSelector=this.optionsToolbarSelector+' select[name="selection_behavior"]',this.optUseTestButtonBehaviorSelector=this.optionsToolbarSelector+" .test-button-behavior",this.optApplyManipulationOptionsSelector=this.optionsToolbarSelector+" .apply-manipulation-options",this.optUseImmediatelySelector=this.optionsToolbarSelector+" .use-immediately",this.optRemoveScriptsSelector=this.optionsToolbarSelector+" .remove-scripts",this.optRemoveStylesSelector=this.optionsToolbarSelector+" .remove-styles",this.selectedElementsContainerSelector=this.optionsToolbarSelector+" .selected-elements",this.buttonClearSelectedElementsSelector=this.selectedElementsContainerSelector+" .clear-selections",this.$lastHighlighted=null,this.multipleSpaceRegex=new RegExp("\\s{2,}","g"),this.regexClassNameStartingWithDash=new RegExp("\\.(-[^\\s.#\\[]+)","g"),this.bracketClassNameRegex=new RegExp('\\[class="([^"]+)"\\]',"g"),this.lastUnfinishedSourceCodeXHR=null,this.isAborted=!1}static getInstance(){return e.u.getInstance().get("DevToolsVariables",(()=>new Ct))}}class Et{constructor(t,e,n){this._selector=t,this._count=e.length,this._$elements=e,this._$parent=n}get selector(){return this._selector}set selector(t){this._selector=t}get count(){return this._count}set count(t){this._count=t}get $elements(){return this._$elements}set $elements(t){this._$elements=t}get $parent(){return this._$parent}set $parent(t){this._$parent=t}get globalCount(){return this._globalCount}set globalCount(t){this._globalCount=t}}class It{constructor(t,e,n,s,i){this.commonMatchPart="[^:[\\.]+",this.regexClasses=new RegExp("\\.("+this.commonMatchPart+")","g"),this.regexPseudos=new RegExp("(:+"+this.commonMatchPart+")","g"),this.regexAttributes=new RegExp("(\\["+this.commonMatchPart+"\\])","g"),this.regexTag=/^[a-zA-Z]+/,this.signs=[">","+","~"],this.service=t,this.$document=e,this.originalSelector=n,this.addAllCommonClasses=s,this.targetElements=i}optimize(t=!1){return this.optimizedSelector=this.originalSelector,this.makeGenericSelectorSpecific(),this.simplifySelector(),t&&this.addNthChildPseudoSelectors(),this.optimizedSelector}addNthChildPseudoSelectors(){let t,e,n,s,i,r,o,a,l,c,u=this.service.segment(this.optimizedSelector),h=u.length,d=u.map(((t,e)=>-1!==$.inArray(t,this.signs)?null:e)).filter((t=>null!==t)).reverse();for(let p=0,g=d.length;p<g;p++)if(e=d[p],t=u[e],s=p!=g-1?d[p+1]:null,n=null!==s?u[s]:null,!t.startsWith("#")&&(a=-1,o=0===p?this.$document.find(this.optimizedSelector).parent(n):o.parent(n),o.find("> "+t).each(((e,n)=>{if(r=$(n),r.is(this.targetElements[0][0])||$.contains(r[0],this.targetElements[0][0]))return 1===r.parent().find("> "+t).length||(a=r.index()+1),!1})),-1!==a)){i=null!==s?u.slice(0,s+1).join(" "):"",i.length&&(i+=" > "),i+=t+":nth-child("+a+")",e!==h-1&&(i+=" "+u.slice(e+1).join(" ")),l=this.$document.find(i),c=!0;for(let t of this.targetElements)if(!l.is(t[0])){c=!1;break}if(!(!c||l.length<this.targetElements.length||l.length<2)){this.optimizedSelector=i;break}}}simplifySelector(){let t,e,n,s=this.service.segment(this.optimizedSelector),i=this.$document.find(this.optimizedSelector),r=[];for(let o=s.length-1;o>0;o--)if(t=s[o],r.push(t),-1===$.inArray(t,this.signs)&&(e=r.slice().reverse().join(" "),n=this.$document.find(e),n.length==i.length&&n.is(i))){this.optimizedSelector=e;break}}makeGenericSelectorSpecific(){let t,e,n,s,i=this.service.segment(this.optimizedSelector),r=this.$document.find(this.optimizedSelector),o=i.length,a=o,l=[];do{if(a--,t=i[a],a===o-1)e=r;else{if(-1!==$.inArray(t,this.signs)){l.push(t);continue}e=e.parent(t)}if(1===e.length&&(n=e.first().attr("id")||null,null!==n&&n.length)){l.push("#"+n);break}let c=null;if(this.addAllCommonClasses&&(c=this.findCommonClasses(e)),null===c){l.push(t);continue}let u=this.regexTag.exec(t)||null;if(null===u||!u.length)return console.error('Segment "'+t+'" does not start with tag name.'),this.optimizedSelector;let h=u[0],d=this.matchAndGetCapturingGroup(t,this.regexClasses,1),p=this.matchAndGetCapturingGroup(t,this.regexPseudos,1),g=this.matchAndGetCapturingGroup(t,this.regexAttributes,1);s=h+"."+[...new Set(c.concat(null!==d?d:[]))].join("."),null!==p&&(s+=p.join("")),null!==g&&(s+=g.join("")),l.push(s)}while(a>0);this.optimizedSelector=l.reverse().join(" ")}findCommonClasses(t){let e,n=[],s=!1;if(t.each(((t,i)=>{s||(e=this.service.getElementClasses($(i)),e.length?n.push(e):s=!0)})),s||!n.length)return null;let i,r,o,a,l,c,u,h=n.length,d=[];for(n.sort(((t,e)=>t.length-e.length)),i=n[0],l=i.length,a=0;a<l;a++){for(c=i[a],u=!0,o=1;o<h;o++)if(r=n[o],-1===r.indexOf(c)){u=!1;break}u&&d.push(c)}return d.length>0?d:null}matchAndGetCapturingGroup(t,e,n){let s=this.matchMultiple(e,t);return void 0!==s[n]?s[n]:null}matchMultiple(t,e){let n,s,i=[[]],r=t.exec(e);for(;null!=r;){for(s=r.length,n=1;n<s;n++)void 0===i[n]&&(i[n]=[]),i[n].push(r[n]);r=t.exec(e)}return i}}class bt{constructor(t,e=[]){this._cssSelector=t,this._alternatives=e}get cssSelector(){return this._cssSelector}set cssSelector(t){this._cssSelector=t}get alternatives(){return this._alternatives}set alternatives(t){this._alternatives=t}}!function(t){t.OPTIMAL_SELECT="optimal_select"}(ct||(ct={}));class wt extends class{constructor(){this.ignoredTags=null,this.ignoredAttributes=null}findCssSelector(t){if(null===t)throw"Target element must not be null.";let e=this.onFindCssSelector(t);return null!==e&&(e=e.replace(/(?:\.\\A|\\A)+/g,"").replace(/\s+/g," ")),e}createIgnoredTags(){return["html","body"]}createIgnoredAttributes(){return["src","alt","target","href","title","width","height","method","dir","border","cellspacing"]}isTagInvalid(t){return-1!==$.inArray(t,this.getIgnoredTags())}isAttributeInvalid(t,e){return null===e&&(e=""),-1!==$.inArray(t,this.getIgnoredAttributes())||-1!==t.indexOf("/")||-1!==e.indexOf("/")||-1!==t.indexOf("\\")||-1!==e.indexOf("\\")||/data-*/.test(t)||/aria-*/.test(t)||"tabindex"===t||!e.length&&"class"===t}isClassNameInvalid(t){return-1!==t.indexOf("!")}getIgnoredTags(){return null===this.ignoredTags&&(this.ignoredTags=this.createIgnoredTags()||[]),this.ignoredTags}getIgnoredAttributes(){return null===this.ignoredAttributes&&(this.ignoredAttributes=this.createIgnoredAttributes()||[]),this.ignoredAttributes}}{constructor(){super(...arguments),this.options=null}onFindCssSelector(t){if(void 0===window.OptimalSelect)return console.error("window.OptimalSelect is undefined."),null;let e=this.find(t);if(e.startsWith("strong")){let n=$(t).closest("strong").parent();e=this.find(n[0])+" "+e}return e}find(t){return window.OptimalSelect.select(t,this.getOptimalSelectOptions())}getOptimalSelectOptions(){return null!==this.options||(this.options={priority:["id","class","tag"],ignore:{tag:t=>this.isTagInvalid(t),class:t=>this.isClassNameInvalid(t),attribute:(t,e,n)=>this.isAttributeInvalid(t,e)||n(t,e)}}),this.options}}class Ot{constructor(){this.registry=new Map,this.registry.set(ct.OPTIMAL_SELECT,new wt)}static getInstance(){return e.u.getInstance().get("UniqueCssFinderRegistry",(()=>new Ot))}getUniqueCssFinder(t){return this.registry.has(t)?this.registry.get(t):null}}class yt{constructor(t){this.similarSelectorCache=new Map,this.service=t}findSelectorForContainingElement(t){if(!t.length)return null;if(1===t.length)return this.findUniqueSelector(t[0].parent());let e,n,s,i=[],r=t.length,o=0;for(n=0;n<r;n++)e=t[n].parents(),i.push($(e.get().reverse())),(0===o||o>e.length)&&(o=e.length);let a,l=null,c=null,u=!1;for(a=o-1;a>0;a--){for(c=i[0].get(a),u=!0,s=1;s<r;s++)if(i[s].get(a)!==c){u=!1;break}if(u){l=c;break}}if(null===l)return null;let h=$(l);return this.findUniqueSelector(h)}findUniqueSelector(t){let e=[];for(let n of this.service.getUnwantedClasses())t.hasClass(n)&&(t.removeClass(n),e.push(n));const n=Ot.getInstance().getUniqueCssFinder(ct.OPTIMAL_SELECT).findCssSelector(t[0]);return e.forEach((e=>t.addClass(e))),new bt(this.service.removeUnwantedClassesFromSelector(n))}findBestSimilarSelectorForElements(t,e=!1){let n=this.findSimilarElementSelectorsForElements(t);if(!n.length)return null;let s=t[0].closest("html"),i=n.map((t=>(t.globalCount=s.find(t.selector).length,t))).sort(((t,e)=>t.globalCount-e.globalCount)).filter((t=>t.globalCount>1));if(!i.length)return null;let r=i[0].globalCount,o=null;if(i=i.filter((t=>t.globalCount===r)),1===i.length)o=i[0].selector;else{let t=i.map((t=>t.selector)).sort(((t,e)=>t.length-e.length));for(let e of t)if(e.indexOf(".")>-1){o=e;break}null===o&&(o=t[0])}let a=new It(this.service,s,o,-1===o.indexOf("."),t).optimize(e),l=i.length>1?i.slice(0,100):[];return new bt(a,l)}findSimilarElementSelectorsForElements(t){if(null===(t=t||null)||!t.length)return[];let e=[];this.invalidateSimilarSelectorCache();for(let n of t)e.push(this.findSimilarElementSelector(n));if(t.length<2)return e[0];let n=e.reduce(((t,e)=>t.filter((t=>e.includes(t)))));if(!n.length)return[];let s,i,r=[];for(let e of n){s=e.$elements,i=!0;for(let e of t)if(!s.has(e.get(0))){i=!1;break}i&&r.push(e)}return r}findSimilarElementSelector(t){let e,n,s,i,r,o,a,l=t,c=[],u="",h="",d="",p=null,g=0;for(;l.length>0;){if(null!==p&&l.length==p.length&&l.is(p)){console.error("An infinite loop has been prevented and CSS selector finding process has been stopped."),console.log("Main element",t,"Current target element",l);break}if(e=l.prop("tagName")||null,null===e)break;if(e=e.toLowerCase(),"body"===e||"html"===e)break;if("tbody"===e){l=l.closest("table");continue}if(n=l.parent(),!n.length)break;let _=e;if(s=this.service.escapeClassNames(this.service.getElementClasses(l).sort(((t,e)=>t.length-e.length))),s.length&&(_+="."+s.join(".")),i="table"!==e,a=i?" > ":" ",h=u,u=u.length?_+a+u:_,d=d.length?e+a+d:e,r=this.getSimilarSelector(n,d),r){this.addSimilarSelector(c,r);let t=[];if(g<16&&s.length>1){let i=this.service.getPowerSet(s.slice(0,5));for(let s of i){if(!s.length)continue;let i=e+"."+s.join("."),r=h.length?i+a+h:i,o=this.getSimilarSelector(n,r);o&&t.push(o)}}if(o=this.getSimilarSelector(n,u),o&&this.addSimilarSelector(c,o),t.length)if(1===t.length)this.addSimilarSelector(c,t[0]);else{t.sort(((t,e)=>t.count-e.count));let e=t[0].count;o=t.filter((t=>t.count===e)).sort(((t,e)=>t.selector.length-e.selector.length))[0],u=o.selector,this.addSimilarSelector(c,t)}}p=l,l=n,g++}return c}addSimilarSelector(t,e){Array.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)}getSimilarSelector(t,e){let n=null;if(this.similarSelectorCache.has(e))n=this.similarSelectorCache.get(e);else{let s=t.find(e);s.length>0&&(n=new Et(e,s,t))}return this.similarSelectorCache.set(e,n),n}invalidateSimilarSelectorCache(){this.similarSelectorCache=new Map}}class At{constructor(){this.targetHTMLTagSelector=null}static getInstance(){return e.u.getInstance().get("OptionsToolbar",(()=>new At))}onChangeTargetHTMLTagInput(t){let e=$(this.getDtv().optTargetHTMLTagSelector).val();null!=e&&e.length?this.targetHTMLTagSelector=$.trim(e.split(" ")[0]):this.targetHTMLTagSelector=null}onClickToggleHoverSelect(t){this.activateHoverSelect(!this.isHoverSelectActive())}isHoverSelectActive(){return $(this.getDtv().optHoverSelectSelector).first().hasClass("active")}activateHoverSelect(t=!0){const e=$(this.getDtv().optHoverSelectSelector).first(),n="active";t?e.hasClass(n)||e.addClass(n):e.hasClass(n)&&e.removeClass(n),this.getIframeHandler().activateHoverSelect(t),this.getDevTools().saveState()}isApplyManipulationOptions(){return $(this.getDtv().optApplyManipulationOptionsSelector)[0].checked}isUseImmediately(){return $(this.getDtv().optUseImmediatelySelector)[0].checked}isRemoveScripts(){return $(this.getDtv().optRemoveScriptsSelector)[0].checked}isRemoveStyles(){return $(this.getDtv().optRemoveStylesSelector)[0].checked}getSelectorBehavior(){let t=$(this.getDtv().optSelectorFinderBehaviorSelector).val()||null;return null!==t&&t.length?t:lt.UNIQUE}updateSelectedElementsInfo(t){let e="";t>0&&(e="<span>"+(1===t?window.wpcc.x_element_selected:window.wpcc.x_elements_selected).format(t)+'</span><a role="button" class="clear-selections">'+window.wpcc.clear+"</a>"),$(this.getDtv().selectedElementsContainerSelector).html(e)}getDevTools(){return Lt.getInstance()}getIframeHandler(){return Pt.getInstance()}getDtv(){return Ct.getInstance()}}class Rt{static getInstance(){return e.u.getInstance().get("CSSSelectorToolbar",(()=>new Rt))}constructor(){}updateInput(t){let e=this.getCssSelectorInput();e.val(t),this.getDevTools().flashBackground(e)}onClickTest(t){let e=$(t.target),n=this.getCssSelectorInput().val();if(null==n||!n.length)return;let s=$(this.getDtv().optUseTestButtonBehaviorSelector).first().val(),i="php"!=s;if("js"!=s){let t=e.data("wcc"),s=this.getIframeHandler().getIframeContents();this.getIframeHandler().clearHighlights(),t.content=s.find("html").html(),t.selector=n,t.url=this.getIframeHandler().getCurrentUrl(),t.formItemName=this.getDtv().cssInputId,t.serializedValues=$("<input/>").attr("name",this.getDtv().cssInputId+"[0][selector]").val(n).serialize(),this.getTestDataPreparer().addSettingsToAjaxData(t);let i=$(this.getDtv().toolbarTestResultsContainerSelector).first(),r=$(this.getDtv().toolbarTestResultsContentContainerSelector).first();i.removeClass("hidden").addClass("loading"),r.html(""),$.post(window.ajaxurl,{wcc_nonce:this.getDtv().$wccNonce.val(),action:window.pageActionKey,data:t}).done((t=>{r.html(t.view)})).fail((t=>{r.html(window.wpcc.an_error_occurred+" <br />"+t.responseText),console.log(t)})).always((()=>{i.removeClass("loading"),this.getIframeHandler().setIframeHeight()}))}i&&(this.getIframeHandler().clearHighlights(),this.getIframeHandler().highlight(n,!0))}onClearHighlights(t){this.getIframeHandler().clearHighlights()}onRemoveElements(t){let e=this.getCssSelectorInput().val();null!=e&&e.length&&this.getIframeHandler().getIframeContents().find(e).remove()}onShowAlternatives(t,e){let n=this.getCssSelectorInput().val()||null;if(null!==n&&null!==n.toString()&&n.length){if($(this.getDtv().sidebarSelector+" ."+this.getDtv().sidebarSectionAlternativeSelectorsClass).data("currentselector")!=n){let t=this.getDevTools().getAlternativeSelectors(n);this.setAlternativeSelectors(n,t)}(null==e||e)&&this.getSidebarHandler().onOpenSidebar(t)}}setAlternativeSelectors(t,e){let n=$(this.getDtv().sidebarSelector+" ."+this.getDtv().sidebarSectionAlternativeSelectorsClass);this.getSidebarHandler().updateAlternativeSelectors(e),n.data("currentselector",t)}getCssSelectorInput(){return $(this.getDtv().cssInputSelector)}onClickUseCssSelector(){this.useSelector()}useSelector(){if(null==this.getDtv().$currentDevToolsButton||null==this.getDtv().$currentDevToolsButton)return;let t=this.getCssSelectorInput().val();if(null==t||!t.length)return;let e=this.getDtv().$currentDevToolsButton.closest(".input-group").find("input.css-selector");e.val(t),this.getDevTools().closeLightbox(),this.getDevTools().flashBackground(e)}getTestDataPreparer(){return W.a.getInstance()}getDevTools(){return Lt.getInstance()}getSidebarHandler(){return Nt.getInstance()}getIframeHandler(){return Pt.getInstance()}getDtv(){return Ct.getInstance()}}class Nt{constructor(){this.preventHoverEvent=!1}static getInstance(){return e.u.getInstance().get("SidebarHandler",(()=>new Nt))}loadSidebar(){this.onUpdateAllUsedSelectors()}updateAlternativeSelectors(t){let e,n,s="",i=this.getIframeHandler().getIframeContents(),r=[];t=Array.from(new Set(t));for(let o in t)t.hasOwnProperty(o)&&(n=i.find(t[o]).length,n<1||(e={selector:t[o],count:n},r.push(e),s+=this.getCssSelectorListItemHtml(e)));return this.updateSectionContent("<ul data-alternatives='"+JSON.stringify(r)+"'>"+s+"</ul>",this.getDtv().sidebarSectionAlternativeSelectorsClass),r}onUpdateAllUsedSelectors(){let t,e,n,s=[],i=[];$(this.getDtv().settingsMetaBoxSelector).find("input.css-selector").each(((r,o)=>{t=$(o),e=t.attr("name"),-1!==e.indexOf("selector")&&(n=t.val(),null!=n&&n.length&&(i.hasOwnProperty(n)?i[n]+=1:(s.push(n),i[n]=1)))}));let r,o=[],a="";for(let t in s)s.hasOwnProperty(t)&&(n=s[t],r={count:i[n],selector:n},o.push(r),a+=this.getCssSelectorListItemHtml(r));this.updateSectionContent("<ul>"+a+"</ul>",this.getDtv().sidebarSectionUsedSelectorsClass)}updateSectionContent(t,e){let n=this.getSectionElement(e),s=n.find("."+this.getDtv().sidebarSectionContentClass).first();this.getDevTools().flashBackground(n),s.html(t)}getSectionElement(t){return $(this.getDtv().sidebarSelector+" ."+t)}getCssSelectorListItemHtml(t){let e=t.count?"<i class='count'>("+t.count+")</i>":"";return"<li><span class='selector' data-selector='"+JSON.stringify(t)+"'>"+t.selector+e+"</span></li>"}onClickCssSelector(t){let e=$(t.target),n=this.getCssSelectorData(e);n&&(this.getCssSelectorToolbar().updateInput(n.selector),$(this.getDtv().cssTestSelector).trigger("click"),$(this.getDtv().sidebarCloseSelector).trigger("click"),this.preventHoverEvent=!0)}onClickHistoryUrl(t){let e=$(t.target),n=e.text();if(null==n||!n.length)return;let s=e.closest("ul").find("li").index(e.closest("li"));null!=s&&s>-1&&this.getAddressBar().travelInTime(s)}onHoverCssSelector(t){if(this.preventHoverEvent)return void(this.preventHoverEvent=!1);let e=$(t.target),n=this.getCssSelectorData(e);n&&(this.getIframeHandler().clearHighlights(),this.getIframeHandler().highlight(n.selector,!0))}getCssSelectorData(t){let e=t.data("selector");return null!=e&&e.hasOwnProperty("selector")?e:null}onCloseSidebar(t){this.getSidebar().removeClass(this.getDtv().sidebarOpenedClass),$(this.getDtv().sidebarOpenSelector).removeClass("hidden")}onOpenSidebar(t){this.getSidebar().addClass(this.getDtv().sidebarOpenedClass),$(this.getDtv().sidebarOpenSelector).addClass("hidden")}onToggleExpand(t){let e=$(t.target),n=(e.hasClass(this.getDtv().sidebarSectionExpandedClass),e.closest(this.getDtv().sidebarSectionSelector));e.closest(this.getDtv().sidebarSectionContentSelector),n.toggleClass(this.getDtv().sidebarSectionExpandedClass),e.toggleClass(this.getDtv().sidebarSectionExpandedClass).toggleClass("dashicons-arrow-down").toggleClass("dashicons-arrow-up")}getSidebar(){return $(this.getDtv().sidebarSelector)}handleKeyPress(t){const e=new q(t).getKey();e==Y.LEFT&&this.onOpenSidebar(t),e==Y.RIGHT&&this.onCloseSidebar(t)}getAddressBar(){return $t.getInstance()}getCssSelectorToolbar(){return Rt.getInstance()}getDevTools(){return Lt.getInstance()}getDtv(){return Ct.getInstance()}getIframeHandler(){return Pt.getInstance()}}class Pt{constructor(){this.hoverSelectActive=!0,this.currentUrl=null,this.selectedElements=[],this.multiSelectActive=!1,this.cssSelectorFinder=null,this.cssSelectorFinder=new yt(new vt(2,[this.getDtv().hoverClass,this.getDtv().elementSelectedClass])),$(document).on("change",this.getDtv().optSelectorFinderBehaviorSelector,(()=>this.initMultiSelect()))}static getInstance(){return e.u.getInstance().get("IFrameHandler",(()=>new Pt))}initMultiSelect(){let t=$(this.getDtv().optSelectorFinderBehaviorSelector).first().val();this.activateMultiSelect(t!==lt.UNIQUE),this.clearSelectedElements()}updateStatus(t){let e=$(this.getDtv().iframeStatusSelector).first();e.html(t||""),t&&t.length?e.removeClass("hidden"):e.addClass("hidden"),this.getDevTools().flashBackground(e)}highlight(t,e){let n=this.getIframeContents();n.find("."+this.getDtv().hoverClass).removeClass(this.getDtv().hoverClass);let s=0;try{let i=n.find(t);if(i.addClass(this.getDtv().hoverClass),null!=e&&e&&i.length>0){let t=this.getOptionsToolbar().isHoverSelectActive();this.activateHoverSelect(!1),n.find("body").stop().animate({scrollTop:i.first().offset().top-$(window).height()/4},500,"swing",(()=>{t&&setTimeout((()=>{this.activateHoverSelect(!0)}),100)}))}s=i.length,this.getDtv().$lastHighlighted=i.last()}catch(t){s=0}return this.updateStatus(window.wpcc.found+": "+s),s}clearHighlights(){this.getIframeContents().find("."+this.getDtv().hoverClass).removeClass(this.getDtv().hoverClass),this.updateStatus(null),this.getDtv().$lastHighlighted=null}listenToCursor(){this.getIframe().on("load",(()=>{this.onIframeReady()}))}onIframeReady(){let t=this.getIframeContents();t.find(this.getDtv().hoverStyleSelector).length||t.find("head").append($(this.getDtv().hoverStyleSelector)[0].outerHTML),this.getDtv().$lastHighlighted=null,t.find("*").off("click").off("mouseenter mouseleave").on("click",(t=>this.elementClickCallback(t))).on("mouseenter mouseleave",(t=>this.elementHoverCallback(t)))}elementHoverCallback(t){if(!this.hoverSelectActive)return void(null!=this.getDtv().$lastHighlighted&&(this.getDtv().$lastHighlighted.off("click"),this.getDtv().$lastHighlighted=null));this.getDtv().$lastHighlighted&&this.getDtv().$lastHighlighted.removeClass(this.getDtv().hoverClass).off("click");let e=$(t.target);if(null!=this.getOptionsToolbar().targetHTMLTagSelector&&e.prop("tagName").toLowerCase()!=this.getOptionsToolbar().targetHTMLTagSelector){let t=e.find(this.getOptionsToolbar().targetHTMLTagSelector).first(),n=e.closest(this.getOptionsToolbar().targetHTMLTagSelector),s=e.parents().length;if(t.length&&n.length)e=t.parents().length-s<s-n.parents().length?t:n;else if(t.length)e=t;else{if(!n.length)return;e=n}}e.addClass(this.getDtv().hoverClass),this.getDtv().$lastHighlighted=e}elementClickCallback(t){if(t.preventDefault(),t.stopPropagation(),null!=this.getDtv().$lastHighlighted)return t.target!=this.getDtv().$lastHighlighted[0]&&(t.target=this.getDtv().$lastHighlighted[0]),this.getDtv().$lastHighlighted=null,void this.iframeClickCallback(t);if(!this.getOptionsToolbar().isHoverSelectActive()){let e=$(t.target);this.getAddressBar().go(e.closest("a").attr("href"))}}iframeClickCallback(t){t.preventDefault(),t.stopPropagation();let e=$(t.target)||null;if(null===e||!e.length)return;if(this.clearHighlights(),this.isMultiSelectActive()){let t=this.getSelectedElementIndex(e);-1===t?(this.selectedElements.push(e),e.addClass(this.getDtv().elementSelectedClass)):(this.selectedElements.splice(t,1),e.removeClass(this.getDtv().elementSelectedClass)),this.getOptionsToolbar().updateSelectedElementsInfo(this.selectedElements.length)}let n=new Map([[lt.UNIQUE,()=>this.cssSelectorFinder.findUniqueSelector(e)],[lt.SIMILAR,()=>this.cssSelectorFinder.findBestSimilarSelectorForElements(this.selectedElements)],[lt.SIMILAR_SPECIFIC,()=>this.cssSelectorFinder.findBestSimilarSelectorForElements(this.selectedElements,!0)],[lt.CONTAINS,()=>this.cssSelectorFinder.findSelectorForContainingElement(this.selectedElements)]]),s=this.getOptionsToolbar().getSelectorBehavior(),i=n.has(s)?n.get(s)():null;null===i&&(i=this.cssSelectorFinder.findUniqueSelector(e));let o=i.cssSelector;o=o.replace(this.getDtv().multipleSpaceRegex," ").replace(/\\:/g,":").replace(r.c.getMatchAllRegEx("nth-child(1)"),"first-child").replace(r.c.getMatchAllRegEx(`.${this.getDtv().hoverClass}`),""),o=this.getDevTools().unbracketClassNames(o);let a=o.split(" ");a=$.map(a,(function(t,e){return/^\.\\/g.test(t)||-1!==t.indexOf("!")?null:t})),o=a.join(" "),this.getCssSelectorToolbar().updateInput(o),i.alternatives.length?this.getCssSelectorToolbar().setAlternativeSelectors(o,i.alternatives.map((t=>t.selector))):this.getCssSelectorToolbar().onShowAlternatives(t,!1);let l=this.getDevTools().getBestAlternativeSelector();return null!==l&&this.getCssSelectorToolbar().updateInput(l),$(document).trigger(jQuery.Event(g.t.devToolsSelectorFound,{selector:null!==l?l:o})),$(this.getDtv().cssInputSelector).trigger("keyup"),this.getOptionsToolbar().isUseImmediately()&&$(this.getDtv().cssUseButtonSelector).trigger("click"),this.getDtv().$lastHighlighted=e,o}listenToKeyboard(){let t=this;t.getIframe().on("load",(()=>{let e=t.getIframe()[0].contentWindow.document;$(e).on("keydown",(t=>this.getSidebarHandler().handleKeyPress(t)))}))}initCssSelectors(){this.getIframe().on("load",(()=>{let t=this.getCssSelectorToolbar().getCssSelectorInput().val(),e=0;if(null!=t&&t.length)e=this.highlight(t,!0);else{let t=this.getDtv().$currentDevToolsButton.data("wcc");if(null==t)return;let n=t.targetCssSelectors;if(null==n||!n.length)return;for(let t in n){if(!n.hasOwnProperty(t))continue;let s=n[t];if(e=this.highlight(s,!0),e>0)return this.getCssSelectorToolbar().updateInput(s),void a.d.getInstance().notifyRegular(this.getCssSelectorToolbar().getCssSelectorInput(),window.wpcc.css_selector_found,l.k.SUCCESS,H.E.BOTTOM)}}}))}getIframe(){return $(this.getDtv().iframeSelector)}getIframeContents(){return this.getIframe().contents()}getCurrentUrl(){return this.currentUrl}loadUrl(t){const e=$(this.getDtv().urlInputSelector);if(e.hasClass("loading"))return void console.warn("A URL is already being loaded. I cannot load another URL until the other one is loaded.");if(this.clearSelectedElements(),null==t||!t||!t.length||0!==t.indexOf("http"))return;console.log("Load URL: "+t),this.currentUrl=t,this.getAddressBar().setAddressBarUrl(t),this.getAddressBar().enableButton($(this.getDtv().refreshButtonSelector)),this.getAddressBar().historyUpdated(),0==this.getAddressBar().currentHistoryIndex?this.getAddressBar().disableButton($(this.getDtv().backButtonSelector)):this.getAddressBar().history.length>1&&this.getAddressBar().enableButton($(this.getDtv().backButtonSelector)),e.addClass("loading");let n=$(this.getDtv().devToolsButtonSelector).data("wcc")||{};try{n=JSON.parse(JSON.stringify(n))}catch(t){n={}}this.getDevTools().getSourceCode(t,n,(e=>{if(null!=e&&null!=e.html&&e.html.length&&e.html[0].length)this.setIframeContent(e.html[0],t);else if(console.log("Request succeeded. Getting source code was not successful. Response:"),console.log(e),null!=e&&void 0!==e.infoView&&null!==e.infoView&&"undefined"!==e.infoView){let n=e.infoStyle||null,s="";s=null!==n?'<html><head><style type="text/css">'+n+"</style></head><body>"+e.infoView+"</body></html>":e.infoView,this.setIframeContent(s,t)}}),(function(t){"abort"!=t.statusText&&(console.log("Request failed. Getting source code was not successful. Response:"),console.log(t))}),(function(){e.removeClass("loading")}))}setIframeContent(t,e){let n=$(this.getDtv().iframeSelector).first(),s=n[0],i=s.contentDocument||s.contentWindow.document,r=n.data("currenturl");if(null==r||r!=e){i.open();try{i.write(t)}catch(t){console.warn("Iframe content could not be set.",t.toString())}i.close(),this.setIframeHeight(),n.data("currenturl",e),this.listenToCursor(),this.listenToKeyboard(),this.initCssSelectors()}}setIframeHeight(){let t=$(this.getDtv().toolbarSelector).first().innerHeight();$(this.getDtv().iframeSelector).first().css("height","calc(100% - "+t+"px)")}activateMultiSelect(t){this.multiSelectActive=t,t||this.clearSelectedElements()}getSelectedElementIndex(t){for(let e=0;e<this.selectedElements.length;e++)if(this.selectedElements[e].is(t))return e;return-1}clearSelectedElements(){for(let t of this.selectedElements)t.removeClass(this.getDtv().elementSelectedClass);this.selectedElements=[],this.getOptionsToolbar().updateSelectedElementsInfo(0),this.clearHighlights()}isMultiSelectActive(){return this.multiSelectActive}activateHoverSelect(t){this.hoverSelectActive=t}getAddressBar(){return $t.getInstance()}getCssSelectorToolbar(){return Rt.getInstance()}getDevTools(){return Lt.getInstance()}getDtv(){return Ct.getInstance()}getOptionsToolbar(){return At.getInstance()}getSidebarHandler(){return Nt.getInstance()}}class $t{constructor(){this.history=[],this.currentHistoryIndex=null}static getInstance(){return e.u.getInstance().get("AddressBar",(()=>new $t))}onClickBack(t){this.handleBackAndForward(!0)}onClickForward(t){this.handleBackAndForward(!1)}handleBackAndForward(t){let e=t?-1:1;if(!this.history.length)return;let n=null;if(null!==this.currentHistoryIndex){if(void 0===this.history[this.currentHistoryIndex+e])return void this.disableButton($(t?this.getDtv().backButtonSelector:this.getDtv().forwardButtonSelector));n=this.history[this.currentHistoryIndex+e],this.currentHistoryIndex+=e}else this.history.length>1&&t&&(n=this.history[this.history.length+2*e],this.currentHistoryIndex=this.history.length+2*e);n&&(this.enableButton($(t?this.getDtv().forwardButtonSelector:this.getDtv().backButtonSelector)),this.getIframeHandler().loadUrl(n),null==this.history[this.currentHistoryIndex+e]&&this.disableButton($(t?this.getDtv().backButtonSelector:this.getDtv().forwardButtonSelector)))}onClickRefresh(t){this.refresh()}refresh(){if(!this.history.length)return;let t=this.getIframeHandler().getCurrentUrl();$(this.getDtv().urlInputSelector).val(t),this.getDevTools().invalidateUrlCache(t),this.getIframeHandler().loadUrl(t)}onClickGo(t){let e=$(this.getDtv().urlInputSelector).val();null!=e&&null!==e.toString()&&e.length&&(null!==this.currentHistoryIndex&&this.currentHistoryIndex>0&&(this.history=this.history.splice(0,this.currentHistoryIndex-1)),this.go(e.toString()))}go(t){if(null!=t&&t.length){if(console.log("Go: "+t),0==t.indexOf("/")){let e=this.getIframeHandler().getIframeContents().find("base");if(!e.length||null==e.attr("href")||!e.attr("href").length)return;t=e.attr("href")+t}0===t.indexOf("http")&&(this.history.length&&this.history[this.history.length-1]==t||this.history.push(t),this.getIframeHandler().loadUrl(t),this.historyUpdated())}}travelInTime(t){null==t||t<0||null==this.history[t]||(t=Math.round(t),this.getIframeHandler().loadUrl(this.history[t]),void 0!==this.history[t-1]?this.enableButton($(this.getDtv().backButtonSelector)):this.disableButton($(this.getDtv().backButtonSelector)),void 0!==this.history[t+1]?this.enableButton($(this.getDtv().forwardButtonSelector)):this.disableButton($(this.getDtv().forwardButtonSelector)),this.currentHistoryIndex=t,this.historyUpdated())}onClickClearHistory(t){this.clearHistory()}clearHistory(){this.history=[],this.currentHistoryIndex=null,this.disableButton($(this.getDtv().backButtonSelector)),this.disableButton($(this.getDtv().forwardButtonSelector)),this.disableButton($(this.getDtv().refreshButtonSelector)),this.historyUpdated()}historyUpdated(){let t="",e=null==this.currentHistoryIndex?this.history.length-1:this.currentHistoryIndex;for(let n in this.history)this.history.hasOwnProperty(n)&&(t+="<li"+(Number(n)==e?' class="active" ':"")+'><span class="url">'+this.history[n]+"</span></li>");this.getSidebarHandler().updateSectionContent("<ul>"+t+"</ul>",this.getDtv().sidebarSectionHistoryClass),this.getDevTools().saveState()}setAddressBarUrl(t){$(this.getDtv().urlInputSelector).val(t)}disableButton(t){t.addClass("disabled")}enableButton(t){t.removeClass("disabled")}getDevTools(){return Lt.getInstance()}getSidebarHandler(){return Nt.getInstance()}getIframeHandler(){return Pt.getInstance()}getDtv(){return Ct.getInstance()}}class Lt{constructor(){this.saveTimeout=null,this.scrollPos=null,this.cssSelectorService=new vt}static getInstance(){return e.u.getInstance().get("DEVTools",(()=>new Lt))}showLightboxWithContent(t,e){let n=$(this.getDtv().devToolsContentSelector);$.featherlight(n,{persist:"shared",afterOpen:()=>{this.onLightBoxAfterOpen(t,e)},beforeClose:()=>(this.onLightBoxBeforeClose(),!1),beforeOpen:()=>{if(this.getDtv().$lightboxInstance)return this.getDtv().$lightboxInstance.css("display","block"),this.onLightBoxAfterOpen(null,null),!1}})}isAvailable(){return"function"==typeof $.featherlight}isOpen(){if(!this.isAvailable())return!1;let t=$.featherlight.current()||null;return null!==t&&t.$content.hasClass(this.getDtv().devToolsContentClass)&&t.$instance.is(":visible")}onLightBoxBeforeClose(){this.makeSureScrollEnabled(),this.getDtv().$lightboxInstance||(this.getDtv().$lightboxInstance=$(this.getDtv().lightboxSelector),this.getDtv().$lightboxInstance.addClass("instance")),this.getDtv().$lightboxInstance.css("display","none"),$(document).trigger(jQuery.Event(g.t.devToolsClosed)),$("textarea, input, button, select").attr("tabindex",0),$(window).scrollTop(this.scrollPos)}onLightBoxAfterOpen(t,e){this.makeSureScrollEnabled(),this.scrollPos=$(window).scrollTop(),this.getDtv().$lightboxInstance||this.restoreState();let n=$(this.getDtv().lightboxSelector),s=n.find(this.getDtv().devToolsContentSelector+" > "+this.getDtv().lightboxTitleSelector);s.length&&!n.find("> "+this.getDtv().lightboxTitleSelector).length&&n.append(s),this.updateTitle(this.getDtv().$currentDevToolsButton.closest("tr").find("label").first().html());let i=this.getDtv().$currentDevToolsButton.closest(".input-group").find("input.css-selector").first(),r="";i.length&&null!=i.val()&&(r=i.val()),$(this.getDtv().cssInputSelector).first().val(r).trigger("change");let o=this.getDtv().$currentDevToolsButton.data("wcc");if(null!=o){$(this.getDtv().optTargetHTMLTagSelector).first().val(null!=o.targetTag?o.targetTag:"").trigger("change");let t=o.selectorFinderBehavior||lt.UNIQUE;null!==t&&t.length&&$(this.getDtv().optSelectorFinderBehaviorSelector).first().val(t).trigger("change")}let a=$(this.getDtv().urlInputSelector).val();null!=t||null!=a&&a.length?null!=t?this.getIframeHandler().setIframeContent(t,e):this.getIframeHandler().initCssSelectors():(this.getAddressBar().setAddressBarUrl(e),this.getAddressBar().go(e)),this.getSidebarHandler().loadSidebar(),this.getDtv().$lightboxInstance||($(this.getDtv().toolbarSelector).resize((()=>this.getIframeHandler().setIframeHeight())),$(this.getDtv().optionsToolbarSelector).find(":input").on("change",(t=>{$(t.target).hasClass(this.getDtv().optTargetHTMLTagClass)||this.saveState()}))),$(document).trigger(g.t.devToolsOpened)}getSourceCode(t,e,n,s,i){if(this.getDtv().urlCache.hasOwnProperty(t)&&null!==this.getDtv().urlCache[t])return n(this.getDtv().urlCache[t]),void i();this.getDtv().lastUnfinishedSourceCodeXHR&&(this.getDtv().isAborted=!0,this.getDtv().lastUnfinishedSourceCodeXHR.abort()),e.url=t,e.removeScripts=this.getOptionsToolbar().isRemoveScripts()?1:0,e.removeStyles=this.getOptionsToolbar().isRemoveStyles()?1:0,e.applyManipulationOptions=this.getOptionsToolbar().isApplyManipulationOptions()?1:0,e.cookies=$("input[name^=_cookies]").serialize(),this.getTestDataPreparer().addSettingsToAjaxData(e),this.getDtv().lastUnfinishedSourceCodeXHR=$.post(window.ajaxurl,{wcc_nonce:this.getDtv().$wccNonce.val(),action:window.pageActionKey,data:e}).done((e=>{this.getDtv().isAborted?this.getDtv().isAborted=!1:(this.getDtv().urlCache[t]=e,n(e))})).fail(s).always((()=>{this.getDtv().lastUnfinishedSourceCodeXHR=null,i()}))}getAlternativeSelectors(t){if(null==t||!t||!t.length)return;t=t.replace(this.getDtv().multipleSpaceRegex," ");let e=this.cssSelectorService.segment(t),n=this.getIframeHandler().getIframeContents(),s=n.find(t),i=["body","html"],r=[];e=$.map(e,(function(t,n){return 0===t.indexOf("#")&&n<e.length-1&&r.push(t),-1!==$.inArray(t,i)?null:t}));let o,a,l=e.length,c=e[l-1],u=s.length?s.first().prop("tagName").toLowerCase():null,h=null,d=[];null==u||/^\w/.test(c)||(h=u+c,d.push(h)),d.push(c),$.map(r,(function(t,e){d.push(t+" "+(h||c))}));let p,g,_,f="",m=/:nth-child[^)]+\)/g,S=/nth-child[^)]+\)/g,T=new RegExp("nth-child\\([0-9]+\\)(?:[^\\s]+|)","g"),v=/:first-child/,C=/:last-child/,E=new RegExp('\\[id="[^"]+"\\]|#[^$\\s.]+',"g");for(a=l-2;a>=0;a--)if(e.hasOwnProperty(a)){if(o=e[a],f=o+" "+f,">"==o){if(a--,a<0)break;o=e[a],f=o+" "+f}p=f+" "+c,g=h?f+" "+h:null,d.push(p),g&&d.push(g)}return d=$.map(d,(t=>(_=this.matchRegExWithIndex(T,t),_?($.map(_,(function(e){let s=parseInt(e[1])+parseInt(e[0].length),i=t,r=t.substring(0,s),o=n.find(r).first();o.length&&o.is(":last-child")&&(i=t.substring(0,e[1])+e[0].replace(S,"last-child")+t.substring(s),d.push(i))})),void 0!==t&&"undefined"!==t&&null!==t&&t.length?t.replace(this.getDtv().multipleSpaceRegex," "):null):t))),$.map(d,(function(t){let e=t.split(" ");if(e.length>1){let t=e[e.length-1];-1===t.indexOf("#")&&-1===t.indexOf("id=")||(t=t.replace(E,""),t.length||null==u||(t=u),e.pop(),e.push(t),d.push(e.join(" ")))}})),$.map(d,(function(t){d.push(t.replace(m,"")),d.push(t.replace(v,"")),d.push(t.replace(C,"")),d.push(t.replace(m,"").replace(v,"").replace(C,""))})),d=this.unique(d).map((t=>t.replace(/\s+/g," "))).sort(((t,e)=>t.length-e.length)),d}getBestAlternativeSelector(){let t=this.getSidebarHandler().getSectionElement(this.getDtv().sidebarSectionAlternativeSelectorsClass).find("ul").first().data("alternatives"),e=null;return null==t||$.map(t,(function(t){if(1==t.count)if(null==e)e=t.selector;else if((-1!==t.selector.indexOf("#")||-1!==t.selector.indexOf("id="))&&-1===e.indexOf("#")&&-1===e.indexOf("id="))return t.selector})),e}matchRegExWithIndex(t,e){let n=[],s=0;if(void 0===e||"undefined"===e||null===e||!e.length)return n;let i=e.match(t);return i?($.map(i,(function(t){s=e.indexOf(t,s),n.push([t,s])})),n):null}invalidateUrlCache(t){this.getDtv().urlCache[t]=null,this.getIframeHandler().getIframe().data("currenturl","")}invalidateAllUrlCaches(){this.getDtv().urlCache={}}flashBackground(t){t.stop().css("background-color","#b8ea84").animate({backgroundColor:"#FFFFFF"},1e3)}closeLightbox(){$.featherlight.current().close()}updateTitle(t){$(this.getDtv().lightboxTitleSelector).html(t||"")}saveState(){null!=this.saveTimeout&&clearTimeout(this.saveTimeout),this.saveTimeout=setTimeout((()=>{let t,e,n=$(this.getDtv().optionsToolbarSelector).find(":input"),s={options:{},history:this.getAddressBar().history,isHoverSelectActive:this.getOptionsToolbar().isHoverSelectActive()?1:0};n.each(((n,i)=>{t=$(i),t.hasClass(this.getDtv().optTargetHTMLTagClass)||(e="checkbox"==t.attr("type")?t[0].checked?1:0:t.val(),s.options[t.attr("name")]=e)})),this.getDtv().$inputDevToolsState.val()!=JSON.stringify(s)&&$.post(window.ajaxurl,{wcc_nonce:this.getDtv().$wccNonce.val(),action:window.pageActionKey,data:{cmd:"saveDevToolsState",postId:this.getDtv().postId,state:s}}).done((t=>{this.getDtv().$inputDevToolsState.val(JSON.stringify(s))})).fail((t=>{}))}),1500)}restoreState(){let t,e,n,s=this.getDtv().$inputDevToolsState.val()||null;if(null!=s&&s&&s.length){try{t=JSON.parse(s)}catch(t){return void console.error("State could not be parsed. State Value: ",s)}1==t.isHoverSelectActive?$(this.getDtv().optHoverSelectSelector).removeClass("active").trigger("click"):$(this.getDtv().optHoverSelectSelector).addClass("active").trigger("click"),this.getAddressBar().history=t.history||[],this.getAddressBar().historyUpdated();for(let s in t.options)t.options.hasOwnProperty(s)&&(n=t.options[s],e=$("[name="+s+"]"),"checkbox"==e.attr("type")?e.prop("checked",1==n):e.val(n))}}removeImproperClassNames(t){return t.replace(this.getDtv().regexClassNameStartingWithDash,"")}unbracketClassNames(t){return t.replace(new RegExp('\\[class="([^"]+)"\\]',"g"),((t,e)=>"."+e.trim().replace(/\s/g,".")))}unique(t){let e=[];return $.each(t,(function(t,n){-1==$.inArray(n,e)&&e.push(n)})),e}makeSureScrollEnabled(){$(document.documentElement).removeClass("with-featherlight")}getTestDataPreparer(){return W.a.getInstance()}getAddressBar(){return $t.getInstance()}getDtv(){return Ct.getInstance()}getIframeHandler(){return Pt.getInstance()}getOptionsToolbar(){return At.getInstance()}getSidebarHandler(){return Nt.getInstance()}}class xt{execute(){const t=Lt.getInstance();t.isAvailable()&&t.isOpen()&&t.closeLightbox()}}class Dt{constructor(){this.optionsBoxButtonSelector=".wcc-options-box",this.optionsBoxMainContainerId="options-box-container",this.optionsBoxMainContainerClass="options-box-container",this.optionsBoxMainContainerSelector="."+this.optionsBoxMainContainerClass,this.optionsBoxSelector=this.optionsBoxMainContainerSelector+" > .options-box",this.optionsBoxSubContainerSelector=this.optionsBoxSelector+" > .box-container",this.noScrollClass="no-scroll",this.titleSelector=this.optionsBoxSelector+" > .box-title",this.inputDetailsSelector=this.optionsBoxSelector+" > .input-details",this.tabContainerSelector=this.optionsBoxSelector+" .nav-tab-wrapper",this.tabHandleSelector=this.tabContainerSelector+" .nav-tab",this.tabContentsSelector=this.optionsBoxSelector+" .tab-content > .tab",this.selectorTestButton=".wcc-test",this.inputName="_options_box",this.selectorExportTextarea="#_options_box_export_settings",this.selectorImportTextarea="#_options_box_import_settings",this.selectorImportSettingsButton=".options-box-import",this.selectorTestDataPresenterContainer="#test-data-presenter",this.classTestDataPresenterHeader="header",this.selectorTestDataPresenterHeader=this.selectorTestDataPresenterContainer+" ."+this.classTestDataPresenterHeader,this.classInvalidateTestData="invalidate",this.selectorInvalidateTestData=this.selectorTestDataPresenterContainer+"."+this.classInvalidateTestData,this.selectorTestDataContainer=this.selectorTestDataPresenterContainer+" .data",this.$wccNonce=$("#wcc_nonce")}static getInstance(){return e.u.getInstance().get("OptionsBoxVariables",(()=>new Dt))}}!function(t){t[t.CALCULATIONS=0]="CALCULATIONS",t[t.FIND_REPLACE=1]="FIND_REPLACE",t[t.GENERAL=2]="GENERAL",t[t.IMPORT_EXPORT=3]="IMPORT_EXPORT",t[t.NOTES=4]="NOTES",t[t.TEMPLATES=5]="TEMPLATES",t[t.FILE_FIND_REPLACE=6]="FILE_FIND_REPLACE",t[t.FILE_OPERATIONS=7]="FILE_OPERATIONS",t[t.FILE_TEMPLATES=8]="FILE_TEMPLATES"}(ut||(ut={}));class kt{constructor(t,e,n){this._stateKey=t,this._tabId=e,this._color=n}get stateKey(){return this._stateKey}get tabId(){return this._tabId}get color(){return this._color}setSelectValue(t,e,n){this._setInputValue(t,e,n,(t=>{t.val(t.find("option").first().val())}),((t,e)=>{t.val(e)}))}setInputValue(t,e,n){this._setInputValue(t,e,n,(t=>{t.val("")}),((t,e)=>{t.val(e)}))}setCheckboxValue(t,e,n){this._setInputValue(t,e,n,(t=>{t.prop("checked",!1)}),((t,e)=>{t.prop("checked",!0)}))}_setInputValue(t,e,n,s,i){let r=this.getSettingInputWithPartialName(t,e);if(null===r)return;let o=n[e]||null;null===o?s(r):i(r,o)}getSettingInputWithPartialName(t,e){let n=t.find('[name$="['+e+']"]');return n.length?n:null}clearInputsInContainer(t){t.find(".wcc-remove").each(((t,e)=>{L.G.getInstance().remove($(e),!1)}))}addInputGroupToContainer(t){return L.G.getInstance().addNew(t.find(".wcc-add-new"))}getFirstInputGroupInContainer(t){return t.find(".inputs > .input-group:first-child")}getVariables(){return Dt.getInstance()}getTabContainer(){return $("#"+this.tabId)}getSettingsContainer(){return this.getTabContainer().find(".wcc-settings").first()}getInputValuesAsObject(){return(this.getTabContainer().find(":input").serializeObjectNoNull()||{})[this.getVariables().inputName]||{}}restoreMultipleInputValues(t,e,n,s){let i=t.find('[name^="'+this.getVariables().inputName+"["+n+']"]').closest("td")||null;if(null===i||!i.length)return;this.clearInputsInContainer(i);let r=e[n]||null;if(null===r||!r.length)return;let o,a,l=!0,c=r.length;for(let t=0;t<c;t++)o=r[t]||null,null!==o&&(l?(a=this.getFirstInputGroupInContainer(i),l=!1):a=this.addInputGroupToContainer(i),s(a,o))}filterMultipleInputState(t,e,n){return t[e]=(t[e]||[]).filter((t=>n(t))),t}}class Bt extends kt{constructor(){super("calculations","tab-options-box-calculations","#FFFF00"),this.keyDecimalSeparatorAfter="decimal_separator_after",this.keyUseThousandsSeparator="use_thousands_separator",this.keyRemoveIfNotNumeric="remove_if_not_numeric",this.keyPrecision="precision",this.keyFormulas="formulas"}restoreState(t,e){let n=this.getSettingsContainer();this.setSelectValue(n,this.keyDecimalSeparatorAfter,t),this.setInputValue(n,this.keyPrecision,t),this.setCheckboxValue(n,this.keyUseThousandsSeparator,t),this.setCheckboxValue(n,this.keyRemoveIfNotNumeric,t),this.restoreMultipleInputValues(n,t,this.keyFormulas,((t,e)=>{t.find('input[name$="[formula]"]').first().val(e.formula||"")}))}saveState(){let t=this.getInputValuesAsObject();return t[this.keyFormulas]=t[this.keyFormulas].filter((t=>(t.formula||[]).length)),t}getConfiguredOptionCount(t){let e=0;return e+=(t[this.keyFormulas]||[]).length,t.hasOwnProperty(this.keyRemoveIfNotNumeric)&&(e+=1),e}}class Mt extends kt{restoreState(t,e){let n=this.getSettingsContainer();this.restoreMultipleInputValues(n,t,this.getKeyFindReplaces(),((t,e)=>this.setInputGroupValues(t,e.find,e.replace,e.hasOwnProperty("regex"))))}saveState(){let t=this.getInputValuesAsObject();return t=this.filterMultipleInputState(t,this.getKeyFindReplaces(),(t=>t.find.length||t.replace.length)),t}getConfiguredOptionCount(t){return(t[this.getKeyFindReplaces()]||[]).length}setInputGroupValues(t,e,n,s){t.find('input[name$="[regex]"]').prop("checked",s),t.find('input[name$="[find]"]').val(e),t.find('input[name$="[replace]"]').val(n)}}class Ft extends Mt{constructor(){super("findReplace","tab-options-box-find-replace","#FF0000")}getKeyFindReplaces(){return"find_replace"}}class Ut extends kt{constructor(){super("general","tab-options-box-general","#FF7F00"),this.keyTreatAsJson="treat_as_json"}restoreState(t,e){let n=this.getSettingsContainer();this.setCheckboxValue(n,this.keyTreatAsJson,t)}saveState(){return this.getInputValuesAsObject()}getConfiguredOptionCount(t){let e=0;return t.hasOwnProperty(this.keyTreatAsJson)&&(e+=1),e}}class Ht extends kt{constructor(){super("importExport","tab-options-box-import-export","#2196f3"),$(document).on(g.t.optionsBoxTabActivated,((t,e)=>{e===this.tabId&&this.updateExportTextArea()})),$(this.getVariables().optionsBoxSelector).on("click",this.getVariables().selectorImportSettingsButton,(t=>{this.importSettings(),this.updateExportTextArea(),flashBackground($(this.getVariables().selectorImportTextarea))}))}restoreState(t,e){}saveState(){return{}}getConfiguredOptionCount(t){return 0}importSettings(){let t=$(this.getVariables().selectorImportTextarea),e=t.val().toString();null!=e&&"undefined"!==e&&e.length&&(qt.getInstance().getOptionsBoxInput().val(e),qt.getInstance().restoreState(),t.val(""))}updateExportTextArea(){qt.getInstance().saveState();let t=qt.getInstance().getOptionsBoxInput().val();$(this.getVariables().selectorExportTextarea).val(t)}}class Gt extends kt{constructor(){super("notes","tab-options-box-notes","#0000FF"),this.keyNote="note"}restoreState(t,e){this.setNoteValue(t[this.keyNote]||"")}saveState(){let t=this.getInputValuesAsObject();return t[this.keyNote]=t[this.keyNote]||"",t}getConfiguredOptionCount(t){let e=0;return(t[this.keyNote]||[]).length&&(e+=1),e}setNoteValue(t){let e=this.getTabContainer().find('textarea[name$="[note]"]').first()||null;null!==e&&e.length&&e.val(t)}}class Vt extends kt{constructor(){super("templates","tab-options-box-templates","#00FF00"),this.keyRemoveIfEmpty="remove_if_empty",this.keyTemplates="templates"}restoreState(t,e){let n=this.getSettingsContainer();this.setCheckboxValue(n,this.keyRemoveIfEmpty,t),this.restoreMultipleInputValues(n,t,this.keyTemplates,((t,e)=>this.setInputGroupValues(t,e))),this.applySettings(e)}saveState(){let t=this.getInputValuesAsObject();return t=this.filterMultipleInputState(t,this.keyTemplates,(t=>(t.template||[]).length)),t}getConfiguredOptionCount(t){let e=0;return e+=(t[this.keyTemplates]||[]).length,t.hasOwnProperty(this.keyRemoveIfEmpty)&&(e+=1),e}setInputGroupValues(t,e){t.find('textarea[name$="[template]"]').val(e.template)}applySettings(t){const e=this.getShortCodeButtons(),n=(t||[]).allowedShortCodes||null;if(null===n)e.removeClass("hidden");else{e.addClass("hidden");const t=n.map((t=>'[data-shortcode-name="'+t+'"]')).join(", ");this.getTabContainer().find(t).removeClass("hidden")}}getShortCodeButtons(){return this.getTabContainer().find(".short-code-container button")}}class Wt extends Mt{constructor(){super("fileFindReplace","tab-options-box-file-find-replace","#FF0000")}getKeyFindReplaces(){return"file_find_replace"}}class jt extends kt{constructor(){super("fileOperations","tab-options-box-file-operations","#fffd00"),this.keyMove="move",this.keyCopy="copy"}restoreState(t,e){let n=this.getSettingsContainer(),s=(t,e)=>{t.find("input").first().val(e.path||"")};this.restoreMultipleInputValues(n,t,this.keyCopy,s),this.restoreMultipleInputValues(n,t,this.keyMove,s)}saveState(){let t=this.getInputValuesAsObject(),e=t=>(t.path||[]).length;return t=this.filterMultipleInputState(t,this.keyCopy,e),t=this.filterMultipleInputState(t,this.keyMove,e),t}getConfiguredOptionCount(t){let e=0;return e+=(t[this.keyCopy]||[]).length,e+=(t[this.keyMove]||[]).length,e}}class Kt extends kt{constructor(){super("fileTemplates","tab-options-box-file-templates","#00ff1c"),this.keyName="templates_file_name",this.keyTitle="templates_media_title",this.keyDescription="templates_media_description",this.keyCaption="templates_media_caption",this.keyAlt="templates_media_alt_text",this.selectorAllTemplates="tr.file-template"}restoreState(t,e){let n=this.getSettingsContainer();for(let e of this.getAllKeys())this.restoreMultipleInputValues(n,t,e,((t,e)=>{t.find('textarea[name$="[template]"]').val(e.template)}));this.applySettings(e)}saveState(){let t=this.getInputValuesAsObject();for(let e of this.getAllKeys())t=this.filterMultipleInputState(t,e,(t=>(t.template||[]).length));return t}getConfiguredOptionCount(t){return this.getAllKeys().reduce(((e,n)=>e+(t[n]||[]).length),0)}applySettings(t){const e=(t||[]).allowedTemplateTypes||null;let n=this.getTabContainer();if(null!==e&&e.length){n.find(this.selectorAllTemplates).addClass("hidden");for(let t of e)n.find("tr#"+t).removeClass("hidden")}else n.find(this.selectorAllTemplates).removeClass("hidden")}getAllKeys(){return null===Kt.allKeys&&(Kt.allKeys=[this.keyName,this.keyTitle,this.keyDescription,this.keyCaption,this.keyAlt]),Kt.allKeys}}Kt.allKeys=null;class Yt{constructor(){this.tabInstances={},this.registry=new Map,this.registerTab(Bt,ut.CALCULATIONS).registerTab(Ft,ut.FIND_REPLACE).registerTab(Ut,ut.GENERAL).registerTab(Ht,ut.IMPORT_EXPORT).registerTab(Gt,ut.NOTES).registerTab(Vt,ut.TEMPLATES).registerTab(Wt,ut.FILE_FIND_REPLACE).registerTab(jt,ut.FILE_OPERATIONS).registerTab(Kt,ut.FILE_TEMPLATES)}static getInstance(){return null===this.instance&&(this.instance=new Yt),this.instance}registerTab(t,e){return this.registry.has(e)||this.registry.set(e,t),this}getTabInstance(t){if(!this.tabInstances.hasOwnProperty(t)){let e;this.registry.has(t)&&(e=new(this.registry.get(t))),this.tabInstances[t]=e}return this.tabInstances[t]}}Yt.instance=null,function(t){t.DEF="default",t.FILE="file"}(ht||(ht={}));class zt{constructor(){this.keyBox="box",this.keyTabs="tabs",this.keyType="type"}static getInstance(){return null===this.instance&&(this.instance=new zt),this.instance}prepare(t){this.config=t,this.prepareType()}get type(){return this._type}getTabSettings(t){return this.objectGet(this.config,this.keyTabs+"."+t)}prepareType(){let t=this.objectGet(this.config,this.keyBox+"."+this.keyType);this._type=Object.values(ht).includes(t)?t:ht.DEF}objectGet(t,e){return e.split(".").reduce(((t,e)=>{if(null!==t)return t.hasOwnProperty(e)?t[e]:null}),t)||null}}zt.instance=null;class qt{constructor(){this.$currentButton=null,this.$latestTestButtonClickEvent=null,this.contentRetrievalInProgress=!1,this.tabHandlers=[],this.allTabHandlers=[],this.allTabHandlerNames=[],this.config=null,this.scrollPos=null,this.prevBoxType=null,this.boxTypeTabNames=(new Map).set(ht.DEF,[ut.FIND_REPLACE,ut.GENERAL,ut.CALCULATIONS,ut.TEMPLATES,ut.NOTES,ut.IMPORT_EXPORT]).set(ht.FILE,[ut.FILE_FIND_REPLACE,ut.FILE_OPERATIONS,ut.FILE_TEMPLATES,ut.NOTES,ut.IMPORT_EXPORT]),this.testDataPreparer=W.a.getInstance(),this.obv=Dt.getInstance(),this.isAvailable()&&this.init()}static getInstance(){return e.u.getInstance().get("OptionsBox",(()=>new qt))}init(){h.getInstance(),$(document).on("mouseup",this.obv.optionsBoxMainContainerSelector,(t=>this.onClickOutside(t))),$(document).on("keyup",(t=>{new q(t).getKey()===Y.ESCAPE&&this.close()})),$(document).on("click",this.obv.optionsBoxButtonSelector,(t=>this.showBox(t))),$(document).on("click",this.obv.tabHandleSelector,(t=>this.onClickTab(t))),$(this.obv.optionsBoxMainContainerSelector).on("click",this.obv.selectorTestButton,(t=>this.onClickTestButton(t))),$(this.obv.selectorTestDataPresenterContainer).on("click","."+this.obv.classInvalidateTestData,(t=>this.onClickInvalidateTestData(t))),$(this.obv.selectorTestDataPresenterContainer).on("click","."+this.obv.classTestDataPresenterHeader,(t=>this.onClickTestDataPresenterHeader(t))),this.config=zt.getInstance(),this.initAllTabHandlers(),this.initAllOptionsBoxButtonTooltips()}onClickOutside(t){$(t.target).hasClass(this.obv.optionsBoxMainContainerClass)&&this.close()}close(){let t=$(this.obv.optionsBoxMainContainerSelector);t.length&&(t.hasClass("hidden")||(t.addClass("hidden"),this.saveState(),flashBackground(this.$currentButton),window.$lastClickedOptionsBoxButton=null,window.optionsBox=void 0,$(document).trigger(g.t.optionsBoxClosed),$(window).scrollTop(this.scrollPos)))}showBox(t){this.scrollPos=$(window).scrollTop(),window.optionsBox=this,this.setTitle(this.getTargetOptionLabel(t)),this.setTargetInputDetails(this.getTargetInputContainer(t)),this.$currentButton=$(t.target).closest(this.obv.optionsBoxButtonSelector),zt.getInstance().prepare(this.$currentButton.data("settings")),this.config=zt.getInstance(),this.prepareTheBoxAccordingToType(),this.restoreState(),window.$lastClickedOptionsBoxButton=this.$currentButton,this.triggerTabActivatedEventForCurrentTab(),$(this.obv.optionsBoxMainContainerSelector).removeClass("hidden"),$(document).trigger(g.t.optionsBoxOpened)}prepareTheBoxAccordingToType(){if(this.config.type===this.prevBoxType)return;this.prevBoxType=this.config.type,this.tabHandlers=this.boxTypeTabNames.get(this.config.type).map((t=>Yt.getInstance().getTabInstance(t))),$(this.obv.tabContainerSelector+" .nav-tab").addClass("hidden"),$(this.obv.tabContentsSelector).addClass("hidden"),this.tabHandlers.length&&$("#"+this.tabHandlers[0].tabId).removeClass("hidden");let t=[];for(let e of this.tabHandlers)t.push(e.tabId);if(t.length){let e=t.map((t=>this.obv.tabContainerSelector+' [data-tab="#'+t+'"]')).join(", ");$(e).removeClass("hidden"),this.activateTab("#"+t[0])}}initAllTabHandlers(){let t,e,n,s=[];this.boxTypeTabNames.forEach(((t,e)=>{t.map((t=>{s.indexOf(t)>-1||s.push(t)}))})),this.allTabHandlers=s.map((t=>Yt.getInstance().getTabInstance(t)));let i=this.getBoxContainer(),r=[];for(let s=0;s<this.allTabHandlers.length;s++)t=this.allTabHandlers[s],e=t.tabId,n=i.find('[data-tab="#'+e+'"]').text(),r.push(n);this.allTabHandlerNames=r}getTargetOptionLabel(t){return $(t.target).closest("tr").find("td:first-child label").text()}getTargetInputContainer(t){return $(t.target).closest(".input-group").find(".input-container").first()}setTitle(t){$(this.obv.titleSelector).text(t)}setTargetInputDetails(t){let e,n,s,i=[];t.find(':input:not([type="hidden"])').each(((t,r)=>{e=$(r),n=e.attr("type"),s="checkbox"===n?'<span class="dashicons dashicons-'+(e[0].checked?"yes":"no")+'"></span>':e.val()||null,null!==s&&s.length&&i.push(s)}));let r=i.reduce(((t,e)=>t+'<div class="val"><span>'+(e.length>72?e.substring(0,69)+"...":e)+"</span></div>"),"");$(this.obv.inputDetailsSelector).html(r)}restoreState(){this.$latestTestButtonClickEvent=null,this.contentRetrievalInProgress=!1,this.fillTestDataPresenter(this.getMainTestButtonResults()),this.getBoxContainer().find(".test-results > .hide-test-results:first-child").each(((t,e)=>j.getInstance().hideTestResults($(e))));let t=this.getOptionsBoxInput().val().toString()||null;null!==t&&t.length||(t="{}");let e={};try{e=JSON.parse(t),this.restoreTabStates(e)}catch(e){console.error("State could not be parsed.",t)}}restoreTabStates(t){let e;for(let n=0;n<this.tabHandlers.length;n++)e=this.tabHandlers[n],e.restoreState(t[e.stateKey]||{},this.config.getTabSettings(e.stateKey)||{})}saveState(){let t,e={};for(let n=0;n<this.tabHandlers.length;n++)t=this.tabHandlers[n],e[t.stateKey]=t.saveState()||{};return e.box={type:this.config.type},this.setCurrentOptionsBoxButtonSummary(e),this.getOptionsBoxInput().val(JSON.stringify(e)),e}activateTab(t){this.deactivateAllTabs(),this.getBoxContainer().find(t).removeClass("hidden"),this.getTabContainer().find('[data-tab="'+t+'"]').addClass("nav-tab-active"),this.currentActiveTabId=t.replace("#",""),this.triggerTabActivatedEventForCurrentTab()}deactivateAllTabs(){this.getBoxContainer().find(".tab").addClass("hidden"),this.getTabContainer().find("a").removeClass("nav-tab-active")}onClickTab(t){t.preventDefault(),this.activateTab($(t.target).closest(".nav-tab").data("tab"))}getTabContainer(){return $(this.obv.tabContainerSelector)}getBoxContainer(){return $(this.obv.optionsBoxMainContainerSelector)}getOptionsBoxInput(){return this.$currentButton.find("input[type=hidden]").first()}onClickTestButton(t){t.preventDefault(),this.$latestTestButtonClickEvent=t;let e=$(t.target).closest("button");e.addClass("loading"),null!==this.getDataToBeTested()?(this.saveState(),e.removeClass("loading")):t.stopPropagation()}getDataToBeTested(){let t=this.getMainTestButton(),e=this.getMainTestButtonResults();if(null!=e&&"undefined"!==e)return e;let n=this.testDataPreparer.prepareTestData(t);if(null===n)return a.d.getInstance().notifyRegular($(this.$latestTestButtonClickEvent.target),window.wpcc.test_data_not_retrieved),console.error("Test data could not be retrieved."),!1;if(this.contentRetrievalInProgress)return null;this.contentRetrievalInProgress=!0;let s=this.getDataPresenterHeader();return s.addClass("loading"),$.post(window.ajaxurl,{wcc_nonce:this.obv.$wccNonce.val(),action:window.pageActionKey,data:n}).done((e=>{if(void 0===e||!e||void 0===e.view)return a.d.getInstance().notifyRegular($(this.$latestTestButtonClickEvent.target),window.wpcc.content_retrieval_response_not_valid,l.k.ERROR),void console.error("Response of content retrieval process is not valid.");let n=$("<div>"+e.view+"</div>").find("ul").data("results");t.data("results",n),this.fillTestDataPresenter(n),$(this.$latestTestButtonClickEvent.target).trigger("click")})).fail((t=>{a.d.getInstance().notifyRegular($(this.$latestTestButtonClickEvent.target),window.wpcc.test_data_retrieval_failed,l.k.ERROR),console.error(t)})).always((()=>{this.contentRetrievalInProgress=!1,s.removeClass("loading")})),null}getMainTestButton(){return this.$currentButton.closest(".input-group").find(".wcc-test")}getMainTestButtonResults(){return this.getMainTestButton().data("results")}fillTestDataPresenter(t){let e=this.getTestDataPresenterContainer();e.data("results",t||[]);let n=e.find(".data").first();n.empty();let s=e.find(".number").first(),i=e.find(".invalidate").first();if(null==t)return s.text(0),void i.addClass("hidden");let o=$("<ul />");for(let e=0;e<t.length;e++)$("<li><code>"+r.c.escapeHtml(t[e])+"</code></li>").appendTo(o);o.appendTo(n),s.text(t.length),i.removeClass("hidden")}getTestDataPresenterContainer(){return $(this.obv.selectorTestDataPresenterContainer).first()}onClickInvalidateTestData(t){t.stopPropagation(),this.fillTestDataPresenter(null),this.getMainTestButton().data("results",null)}getDataPresenterHeader(){return $(this.obv.selectorTestDataPresenterHeader).first()}onClickTestDataPresenterHeader(t){let e=$(this.obv.selectorTestDataContainer).first();e.hasClass("hidden")?e.removeClass("hidden"):e.addClass("hidden")}setCurrentOptionsBoxButtonSummary(t){let e=this.getOptionsBoxButtonSummaryFromState(t);this.setOptionsBoxButtonSummary(this.$currentButton,e)}getOptionsBoxButtonSummaryFromState(t){let e,n,s,i,r,o;if($.isEmptyObject(t))return null;let a="",l=[];for(r=0;r<this.allTabHandlers.length;r++)e=this.allTabHandlers[r],s=this.allTabHandlerNames[r],n=e.stateKey,t.hasOwnProperty(n)&&(o=t[n],i=e.getConfiguredOptionCount(o),i>0&&(a+=window.wpccTooltipDisabled?s+": "+i+"\n":'<li><span class="name">'+s+'</span>: <span class="value">'+i+"</span></li>",l.push(e.color)));return a.length?(a=window.wpccTooltipDisabled?a.replace(/\n$/,""):"<ul class='options-box-summary'>"+a+"</ul>",{title:a,colors:l}):null}setOptionsBoxButtonSummary(t,e){if(null===(e=e||null))t.removeClass("has-config"),c.u.for(t).destroy().apply();else{t.addClass("has-config"),t.data(c.u.TOOLTIP_DATA_ATTR_NAME,c.u.TOOLTIP_ATTRIBUTE_VALUE),t.data("html","true"),t.attr("title",e.title),c.u.for(t).fixTitle().apply();let n=e.colors;1===n.length&&n.push(n[0]);let s=n.join(", ");t.find(".summary-colors").css("background-image","linear-gradient(to right, "+s+")")}}initAllOptionsBoxButtonTooltips(){$(this.obv.optionsBoxButtonSelector).each(((t,e)=>{let n=$(e),s=n.find("input[type=hidden]").first().val()||null;if(null!==s&&s.length)try{let t=JSON.parse(s),e=this.getOptionsBoxButtonSummaryFromState(t);this.setOptionsBoxButtonSummary(n,e)}catch(t){console.error("State could not be parsed.",s,n),a.d.getInstance().notifyRegular(n,window.wpcc.state_not_parsed,l.k.ERROR)}}))}triggerTabActivatedEventForCurrentTab(){null!==this.currentActiveTabId&&$(document).trigger(g.t.optionsBoxTabActivated,this.currentActiveTabId)}isOpen(){return null!==this.getCurrentOptionsBoxButton()}getCurrentOptionsBoxButton(){return window.$lastClickedOptionsBoxButton||null}isAvailable(){return $(`#${this.obv.optionsBoxMainContainerId}`).length>0}}class Xt{execute(){const t=qt.getInstance();t.isAvailable()&&t.isOpen()&&t.close()}}!function(t){t[t.BOTTOM_LEFT__TOP_LEFT=0]="BOTTOM_LEFT__TOP_LEFT",t[t.BOTTOM_LEFT__TOP_RIGHT=1]="BOTTOM_LEFT__TOP_RIGHT",t[t.MIDDLE_RIGHT__MIDDLE_LEFT=2]="MIDDLE_RIGHT__MIDDLE_LEFT",t[t.MIDDLE_LEFT__MIDDLE_RIGHT=3]="MIDDLE_LEFT__MIDDLE_RIGHT",t[t.TOP_RIGHT__BOTTOM_LEFT=4]="TOP_RIGHT__BOTTOM_LEFT",t[t.TOP_RIGHT__TOP_RIGHT=5]="TOP_RIGHT__TOP_RIGHT",t[t.TOP_RIGHT__TOP_LEFT=6]="TOP_RIGHT__TOP_LEFT",t[t.TOP_LEFT__TOP_RIGHT=7]="TOP_LEFT__TOP_RIGHT",t[t.TOP_LEFT__BOTTOM_RIGHT=8]="TOP_LEFT__BOTTOM_RIGHT",t[t.TOP_LEFT__BOTTOM_LEFT=9]="TOP_LEFT__BOTTOM_LEFT",t[t.TOP_MIDDLE__BOTTOM_MIDDLE=10]="TOP_MIDDLE__BOTTOM_MIDDLE",t[t.TOP_MIDDLE__TOP_MIDDLE=11]="TOP_MIDDLE__TOP_MIDDLE"}(dt||(dt={}));class Qt{constructor(){this.optionMap=new Map,this.optionMap.set(dt.BOTTOM_LEFT__TOP_LEFT,{attachment:"top left",targetAttachment:"bottom left",constraints:[],offset:"-20px 20px"}).set(dt.BOTTOM_LEFT__TOP_RIGHT,{attachment:"top right",targetAttachment:"bottom left",constraints:[],offset:"-20px -48px"}).set(dt.TOP_RIGHT__BOTTOM_LEFT,{attachment:"bottom left",targetAttachment:"top right",constraints:[],offset:"20px 0",targetOffset:"0 -48px"}).set(dt.MIDDLE_LEFT__MIDDLE_RIGHT,{attachment:"middle right",targetAttachment:"middle left",constraints:[],offset:"0 20px"}).set(dt.MIDDLE_RIGHT__MIDDLE_LEFT,{attachment:"middle left",targetAttachment:"middle right",constraints:[],offset:"0 -20px"}).set(dt.TOP_RIGHT__TOP_RIGHT,{attachment:"top right",targetAttachment:"top right",constraints:[],offset:"20px -20px"}).set(dt.TOP_LEFT__TOP_RIGHT,{attachment:"top right",targetAttachment:"top left",constraints:[],offset:"20px 20px"}).set(dt.TOP_LEFT__BOTTOM_RIGHT,{attachment:"bottom right",targetAttachment:"top left",constraints:[],offset:"-28px 20px"}).set(dt.TOP_LEFT__BOTTOM_LEFT,{attachment:"bottom left",targetAttachment:"top left",constraints:[],offset:"20px 0"}).set(dt.TOP_RIGHT__TOP_LEFT,{attachment:"top left",targetAttachment:"top right",constraints:[],offset:"20px -20px"}).set(dt.TOP_MIDDLE__BOTTOM_MIDDLE,{attachment:"bottom middle",targetAttachment:"top middle",constraints:[],offset:"20px 0"}).set(dt.TOP_MIDDLE__TOP_MIDDLE,{attachment:"top middle",targetAttachment:"top middle",constraints:[],offset:"20px 0"})}static getInstance(){return e.u.getInstance().get("TetherOptions",(()=>new Qt))}getOption(t){return this.optionMap.has(t)?this.optionMap.get(t):null}static get(t){return this.getInstance().getOption(t)}}class Jt{static isNeedMainTabKey(t){return void 0!==t.setMainTabKey}static isNeedOptionsBoxTabKey(t){return void 0!==t.setOptionsBoxTabKey}static isNeedStepBuilder(t){return void 0!==t.setBuilder}static isNeedStepInfo(t){return void 0!==t.setStepInfo}static isHasSettingKey(t){return void 0!==t.getSettingKey}static isNeedSettingKey(t){return void 0!==t.setSettingKey}static isHasMainTabKey(t){return void 0!==t.getMainTabKey}static isHasOptionsBoxTabKey(t){return void 0!==t.getOptionsBoxTabKey}static isHasOptionsBoxButton(t){return void 0!==t.getOptionsBoxButton}static isPromiseHandler(t){return void 0!==t.setPromiseCallbacks}static isValidatable(t){return void 0!==t.validate&&void 0!==t.addRule}}class Zt{constructor(){this.tourId=null,this.stepId=null,this.currentUrlPath=window.location.href}execute(){const t=Zt.getRedirectBackCookie(this.tourId,this.stepId);if(null===t)return;const e=t.getRedirectUrl();if(null===e)return this.removeRedirectBackCookie();if(rt.isSame(e,this.currentUrlPath))return this.removeRedirectBackCookie();const n=t.getPageType();n&&ot.getInstance().setAutoStartCookie(new et(n,this.tourId,parseInt(this.stepId))),this.removeRedirectBackCookie(),window.location.href=e,this.callReject(`Current URL is not the one required for '${this.tourId}#${this.stepId}'. I am going to redirect to ${e}...`)}setPromiseCallbacks(t,e){this.resolve=t,this.reject=e}setStepInfo(t,e){this.tourId=t,this.stepId=e}removeRedirectBackCookie(){ot.getInstance().removeRedirectBackCookie(this.tourId,this.stepId)}callReject(t){return null!==(this.reject||null)&&this.reject(t),this}static getRedirectBackCookie(t,e){return ot.getInstance().getRedirectBackCookieFor(t,e)}}class te{constructor(){this.builder=null,this.resolve=null,this.reject=null}execute(){if(null===this.builder)throw`Builder must be set for ${te.name}.`;const t=this.builder.isInDesiredState();!0!==t&&t!==this.builder&&(this.reject(`The requested step ${this.builder.getTourBuilder().getTourId()}#${this.builder.getStepIndex()} is not in the desired state. I am going to show the required step instead.`),this.builder.rejectBeforeShow(),this.builder.getTourBuilder().getTour().show(t.getStepIndex()))}setBuilder(t){return this.builder=t,this}setPromiseCallbacks(t,e){this.resolve=t,this.reject=e}}class ee{constructor(){this.tour=null,this.step=null,this.title="",this.content="",this.stepIndex=0,this.tourBuilder=null,this.first=!1,this.last=!1,this.builtOptions=null,this.advanceStrategy=null,this.tetherOption=null,this.eventsBound=!1,this.beforeShowCommands=[],this.desiredStateCheckerCommands=[],this.eventListeners=[],this.scrollEnabled=!0,this.skippable=!0,this.completable=!1,this.prevable=!0,this.nextable=!0,this.rejectedBeforeShow=!1,this.requiredSteps=[],this.requiredStepsPrepared=!1,this.addBeforeShowCommand(new te),this.addBeforeShowCommand(new Zt)}build(){if(null===this.tour)throw"The tour this step belongs to must be set by calling setTour()";return this.tour.on("cancel",(()=>this.unbindEvents())),this.builtOptions={id:this.getStepId(),classes:"wpcc-guide-step",buttons:this.getButtons(),text:this.getStepContent(),title:this.getPreparedTitle(),beforeShowPromise:()=>this.getBeforeShowPromise(this),scrollToHandler:()=>{},when:{show:()=>this.onShow(),hide:()=>this.onHide(),cancel:()=>this.onCancel()},attachTo:{element:this.getTargetElementSelector(),on:"bottom"}},this.builtOptions}applyTetherOptions(){if(null===this.tetherOption)return;const t=Qt.get(this.tetherOption);null!==t&&null!==this.getStep()&&(t.target=this.getTargetElement(),this.getStep().updateStepOptions({tetherOptions:t}))}executeBeforeShowCommands(t,e){for(let n of this.beforeShowCommands)if(this.injectDependencies(n,t,e).execute(),this.rejectedBeforeShow)break}executeDesiredStateCheckerCommands(){for(let t of this.desiredStateCheckerCommands)if(!this.injectDependencies(t,null,null).execute())return!1;return!0}resetStep(){return this.getStep().updateStepOptions({text:this.getBuiltStepOptions().text}),this.unbindEvents(),this}injectDependencies(t,e,n){Jt.isNeedStepBuilder(t)&&t.setBuilder(this),Jt.isNeedStepInfo(t)&&t.setStepInfo(this.getTourBuilder().getTourId(),this.getStepId()),Jt.isPromiseHandler(t)&&null!==e&&null!==n&&t.setPromiseCallbacks(e,n);const s=this;return Jt.isNeedMainTabKey(t)&&Jt.isHasMainTabKey(s)&&t.setMainTabKey(s),Jt.isNeedOptionsBoxTabKey(t)&&Jt.isHasOptionsBoxTabKey(s)&&t.setOptionsBoxTabKey(s),Jt.isNeedSettingKey(t)&&Jt.isHasSettingKey(s)&&t.setSettingKey(s.getSettingKey()),t}onClickNext(){this.isValid()&&(this.resetStep(),this.tour.next())}onClickSkip(){this.resetStep(),this.tour.next()}onClickPrevious(){this.resetStep(),this.checkPrevStepAvailability()&&this.tour.back()}onClickComplete(){this.isValid()&&(this.resetStep(),this.tour.complete())}onShow(){if($(".shepherd-target-marker").remove(),this.bindEvents(),this.isStepVisible());else{console.error("Step's tooltip is not visible. Canceling the tour to make the page interactable...",this.getStep());try{this.getStep().getTour().cancel()}catch(t){console.log(t)}}}onBeforeShow(t,e,n){if(this.rejectedBeforeShow=!1,this.executeBeforeShowCommands(e,n),this.rejectedBeforeShow)return!0;if(this.applyTetherOptions(),this.isScrollEnabled()){const t=this.onScroll(e,n);if(null!==t)return t}return!1}onScroll(t,e){const n=this.getTargetScrollPos();return n?($("html, body").animate({scrollTop:n},"slow",(()=>{t()})),!0):null}onHide(){}onCancel(){this.resetStep()}bindEvents(){if(!this.eventsBound)return this.eventsBound=!0,this.bindAdvanceHandler(),this.bindEventListeners(),this}unbindEvents(){if(this.eventsBound)return this.eventsBound=!1,this.unbindAdvanceHandler(),this.unbindEventListeners(),this}bindAdvanceHandler(){return null!==this.getAdvanceStrategy()&&this.getAdvanceStrategy().setBuilder(this).bindAdvanceHandler(),this}unbindAdvanceHandler(){return null!==this.getAdvanceStrategy()&&this.getAdvanceStrategy().unbindAdvanceHandler(),this}bindEventListeners(){return this.eventListeners.forEach((t=>t.setBuilder(this).bindListener())),this}unbindEventListeners(){return this.eventListeners.forEach((t=>t.setBuilder(this).unbindListener())),this}setStepIndex(t){return this.stepIndex=t,this}getStepIndex(){return this.stepIndex}getStepId(){return`${this.stepIndex}`}setTitle(t){return this.title=t,this}getPreparedTitle(){return(this.title||"").length?this.title:this.getDefaultTitle()}setContent(t){return this.content=t,this}setDetailsFromCustomKey(t){const e=window.wpcc.custom_step_info[t]||{};return e.name&&this.setTitle(e.name),e.desc&&this.setContent(e.desc),this}isFirst(){return this.first}setFirst(){return this.first=!0,this}isLast(){return this.last}setLast(){return this.last=!0,this}getAdvanceStrategy(){return this.advanceStrategy}setAdvanceStrategy(t){return this.advanceStrategy=t,this}setTour(t){return this.tour=t,this}setTourBuilder(t){return this.tourBuilder=t,this}getTourBuilder(){return this.tourBuilder}setStep(t){return this.step=t,this}getStep(){return this.step}setSkippable(t){return this.skippable=t,this}setCompletable(t){return this.completable=t,this}setPrevable(t){return this.prevable=t,this}setNextable(t){return this.nextable=t,this}rejectBeforeShow(){return this.rejectedBeforeShow=!0,this}getRedirectCommand(){for(let t of this.beforeShowCommands)if(t instanceof _t)return t;return null}getSummaryAsHtml(){const t=this.getRedirectCommand(),e=t?t.getTargetPage():null;let n="",s="",i="";if(null!==e){const t=e.getPageUrlPath(),r=t?`target="_blank" href="${e.getPageUrlPath()}"`:'role="button"';s=e.getPageType()?`data-page-type="${e.getPageType()}"`:"",i=t?'data-redirectable="1"':"",n=`<span class="on-page"><a ${r}>${e.getPageTitle()}</a></span>`}const r=(this.title||"").length?`<span class="step-title">${this.title}:</span>`:"",o=(this.content||"").length?`<span class="step-desc">${this.content}</span>`:"",a=this.getTourBuilder()?`<span class="step-index">${this.getStepIndex()+1}/${this.getTourBuilder().getStepCount()}</span>`:"",l=o.length||r.length||n.length?`<div class="step-details">${n} ${r} ${o} ${a}</div>`:"";return`\n            <div class="step-summary" data-id="${this.getStepId()}">\n                <div class="start-step" title="${window.wpcc.start_from_this_step}" ${i} ${s}>\n                    <div class="start-button">\n                        <span class="dashicons dashicons-controls-play"></span>\n                    </div>\n                </div> \n                ${l}\n            </div>\n        `.trim()}getBuiltStepOptions(){return this.builtOptions}setTetherOption(t){return this.tetherOption=t,this}isValid(){return!0===this.isInDesiredState(!0)}addBeforeShowCommand(...t){return this.beforeShowCommands.push(...t),this}addDesiredStateCheckerCommand(...t){return this.desiredStateCheckerCommands.push(...t),this}addEventListener(...t){return this.eventListeners.push(...t),this}addRequiredStep(...t){return this.requiredSteps.push(...t),this.requiredStepsPrepared=!1,this}getRequiredSteps(){return this.requiredStepsPrepared||(this.requiredSteps.sort(((t,e)=>t.getStepIndex()<e.getStepIndex()?-1:1)),this.requiredStepsPrepared=!0),this.requiredSteps}isInDesiredState(t=!1){let e;for(let n of this.getRequiredSteps())if(e=n.isInDesiredState(t),!0!==e)return e;return!0===this.onIsInDesiredState(t)||this}onIsInDesiredState(t=!1){if(!this.executeDesiredStateCheckerCommands())return!1;if(Jt.isValidatable(this)){const e=this.validate();if(e.length)return t&&this.setErrors(e),!1}return!0}getTargetElement(){return $(this.getTargetElementSelector())}getDefaultTitle(){return""}enableScroll(t){return this.scrollEnabled=t,this}isScrollEnabled(){return this.scrollEnabled}getTargetScrollPos(){const t=this.getTargetElement();return null!==t&&t.length?Math.max(1,t.offset().top-$(window).height()/2):null}getStepContent(){let t=this.content;return null!==this.getTourBuilder()&&(t+=this.getProgressBar()),t}getProgressBar(){if(!this.getTourBuilder())return"";const t=this.getTourBuilder().getStepCount(),e=this.getStepIndex()+1;return`\n            <div class="pbar-container" title="${e}/${t}">\n                <div class="pbar">\n                  <div class="pbar-prog" style="width: ${Math.min(100,100*e/t)}%"></div>\n                </div>\n            </div>\n        `}isStepVisible(){if(null===this.getStep())return!1;const t=this.getStep().el||null;return t instanceof HTMLElement&&r.c.isElementInViewport($(t))}checkPrevStepAvailability(){if(this.getStepIndex()<1)return this.setErrors(window.wpcc.no_prev_step),!1;const t=this.getTourBuilder().getSteps()[this.getStepIndex()-1].getRedirectCommand().getTargetPage(),e=t.getPageType();if(e!==nt.getPageType()&&!t.getPageUrlPath()){const t=Zt.getRedirectBackCookie(this.getTourBuilder().getTourId(),(this.getStepIndex()-1).toString());if(!t||!t.getRedirectUrl())return this.setErrors(window.wpcc.prev_step_requires_x_page_type.replace("%s",nt.getPageTypeName(e))),!1}return!0}getButtons(){const t=[];return this.skippable&&t.push({text:window.wpcc.skip,action:()=>this.onClickSkip(),classes:"skip"}),(this.last||this.completable)&&t.push({text:window.wpcc.complete,action:()=>this.onClickComplete(),classes:"complete"}),!this.first&&this.prevable&&t.push({text:window.wpcc.previous,action:()=>this.onClickPrevious(),classes:"prev"}),!this.last&&this.nextable&&t.push({text:window.wpcc.next,action:()=>this.onClickNext(),classes:"next"}),t}setErrors(t){return"string"==typeof t&&(t=[t]),this.getStep().updateStepOptions({text:r.c.getErrorsAsHtml(t)+this.getBuiltStepOptions().text}),this.repositionTooltip(),this}repositionTooltip(){if(this.isStepVisible()){const t=this.getStep();t.tooltip&&t.tooltip.position&&t.tooltip.position instanceof Function&&setTimeout(t.tooltip.position)}return this}getBeforeShowPromise(t){return new Promise(((e,n)=>{t.onBeforeShow(t,e,n)||e()}))}}class ne{constructor(t){this.errorMessage=null,this.options=t,this.prepareOptions()}validate(){const t=this.handleValidation(),e=this.getErrorMessage();return t.length&&null!==e&&e.length&&t.unshift(e),t}setValue(t){return this.value=t,this}getValue(){return this.value}setErrorMessage(t){return this.errorMessage=t,this}getErrorMessage(){return this.errorMessage}getOptions(){return this.options}validationTranslation(t){return window.wpcc.validation[t]||""}}class se extends ne{prepareOptions(){const t=this.getOptions().split(",");1===t.length?(this.min=0,this.max=parseInt(t[0])):2===t.length&&(this.min=parseInt(t[0]),this.max=t[1].length?parseInt(t[1]):-1)}handleValidation(){const t=this.getValue();let e=t.length>=this.min;const n=-1!==this.max;return n&&(e=e&&t.length<=this.max),e?[]:n?[this.validationTranslation("value_len_between_min_x_max_y").replace("{0}",this.min.toString()).replace("{1}",this.max.toString())]:[this.validationTranslation("value_len_gt_or_eq_x").replace("%s",this.min.toString())]}}class ie extends ne{prepareOptions(){this.startsWith=this.getOptions()}handleValidation(){return 0===this.getValue().indexOf(this.startsWith)?[]:[this.validationTranslation("value_must_start_with").replace("%s",this.startsWith)]}}class re extends ne{prepareOptions(){this.regexStr=this.getOptions()}handleValidation(){return null!==this.getValue().match(this.regexStr)?[]:[this.validationTranslation("format_not_correct_x_regex").replace("%s",this.regexStr)]}}!function(t){t.TEXT_LENGTH="len",t.STARTS_WITH="starts_with",t.MATCH="match",t.CHECKED="checked",t.UNIQUE_CATEGORY_URLS="unique_cat_urls",t.URL="url",t.VALID_VAL="valid_val",t.INVALID_VAL="invalid_val",t.INT="int"}(pt||(pt={}));class oe extends ne{prepareOptions(){this.state=this.getOptions()||"true"}handleValidation(){return this.getValue()===this.state?[]:"true"===this.state?[this.validationTranslation("must_check_checkbox")]:[this.validationTranslation("must_uncheck_checkbox")]}}var ae=__webpack_require__(118);class le extends ne{constructor(){super(...arguments),this.hasErrors=!1}prepareOptions(){}handleValidation(){this.clearErrorIndicators();const t=this.getDefinedCategoryUrls();return t.forEach(((e,n)=>{t.indexOf(e)!==n&&this.setHasErrorWithIndex(n)})),this.hasErrors?[this.validationTranslation("remove_duplicate_urls")]:[]}getDefinedCategoryUrls(){const t=`[name^="${ae.n.CATEGORY_MAP}"][name$="[url]"]`,e=[];return $(t).each(((t,n)=>{e.push($(n).val().toString())})),e}setHasErrorWithIndex(t){this.hasErrors||(this.hasErrors=!0),$(`${this.getInputsContainerSelector()} .input-group:nth-child(${t+1})`).addClass("has-error")}clearErrorIndicators(){this.hasErrors=!1,$(`${this.getInputsContainerSelector()} .has-error`).removeClass("has-error")}getInputsContainerSelector(){return le.INPUTS_CONTAINER_SELECTOR}}le.INPUTS_CONTAINER_SELECTOR=`tr[aria-label="${ae.n.CATEGORY_MAP}"] .inputs`;class ce extends ne{prepareOptions(){}handleValidation(){const t=/https?:\/\/\S+\.\S+/g;return null!==this.getValue().match(t)?[]:[this.validationTranslation("enter_valid_url_x_regex").replace("%s",t.toString())]}}class ue extends ne{prepareOptions(){this.invalidValues=this.getOptions().split(",").map((t=>t.trim()))}handleValidation(){const t=this.getValue();return this.invalidValues.length&&this.invalidValues.includes(t)?[this.validationTranslation("value_not_valid")]:[]}}class he extends ne{prepareOptions(){this.validValues=this.getOptions().split(",").map((t=>t.trim()))}handleValidation(){const t=this.getValue();return!this.validValues.length||this.validValues.includes(t)?[]:[this.validationTranslation("value_not_valid_values_x").replace("%s",this.validValues.join(", "))]}}class de extends ne{prepareOptions(){}handleValidation(){return r.c.isInt(this.getValue())?[]:[this.validationTranslation("value_should_be_int")]}}class pe{constructor(){this.ruleMap=new Map,this.ruleMap.set(pt.TEXT_LENGTH,se).set(pt.STARTS_WITH,ie).set(pt.MATCH,re).set(pt.CHECKED,oe).set(pt.UNIQUE_CATEGORY_URLS,le).set(pt.URL,ce).set(pt.VALID_VAL,he).set(pt.INVALID_VAL,ue).set(pt.INT,de)}static getInstance(){return null===this.instance&&(this.instance=new pe),this.instance}validate(t,e){return e.map((e=>e.setValue(t).validate())).reduce(((t,e)=>(t.push(...e),t)))}getRuleInstancesWithFormItemRule(t){return this.getRuleInstances(t.getRule(),t.getErrorMessages())}getRuleInstances(t,e=null){let n,s,i,r,o;return null===e&&(e=new Map),t.split("|").map((t=>(n=t.split(/:(.+)/),n.length?(s=n[0],this.ruleMap.has(s)?(i=n.length>1?n[1]:"",r=this.ruleMap.get(s),o=new r(i),e.has(s)&&o.setErrorMessage(e.get(s)),o):(console.debug(`Rule ${s} does not exist`),null)):null))).filter((t=>null!==t))}}pe.instance=null;class ge{constructor(t=[]){this.rules=[],this.rulePreparer=null,this.rulesPrepared=!1,this.rules=t}addRule(...t){return this.rules.push(...t),this.rulesPrepared=!1,this}getRules(){return this.rules}setRulePreparer(t){return this.rulePreparer=t,this}validate(){this.maybePrepare();let t=[];return this.getRules().forEach((e=>{t.push(...this.validateSingleRule(e))})),[...new Set(t)]}maybePrepare(){return!this.rulesPrepared&&this.rulePreparer&&this.getRules().forEach((t=>this.rulePreparer(t))),this.rulesPrepared=!0,this}validateSingleRule(t){const e=pe.getInstance(),n=this.getInputValues(t.getCssSelector()),s=[];let i;return n.forEach((n=>{i=e.validate(n,e.getRuleInstancesWithFormItemRule(t)),s.push(...i)})),s}getInputValues(t){const e=[],n=$(t);return n.length||console.warn(`No element is found with selector: ${t}`),n.each(((t,n)=>{const s=this.getInputValue($(n));null!==s&&e.push(s)})),e}getInputValue(t){if(t.is(":input")||(t=t.find(":input").first()),!t.length)return null;if("input"===t[0].tagName.toLowerCase()){const e=t.attr("type");if(ge.inputValueFunctions.has(e))return ge.inputValueFunctions.get(e)(t)}return t.val()}}ge.inputValueFunctions=new Map([["checkbox",t=>t.is(":checked")?"true":"false"]]);class _e{constructor(){this.builder=null}execute(){this.builder&&this.builder.isMultipleSettingTargeted()&&this.builder.setTetherOption(dt.TOP_LEFT__BOTTOM_LEFT)}setBuilder(t){return t instanceof fe&&(this.builder=t),this}}class fe extends ee{constructor(t){super(),this.innerTargetSelector=null,this.groupIndex=null,this.innerKey=null,this.selector=null,this.targetSettingKey=t,this.validator=(new ge).setRulePreparer((t=>t.setSettingKey(this.targetSettingKey).setContainerSelector(this.getSettingContainerSelector()).setGroupIndex(this.groupIndex).setInnerKey(this.innerKey).setCssSelector(this.selector))),this.setTetherOption(dt.BOTTOM_LEFT__TOP_LEFT),this.addBeforeShowCommand(new _e)}targetInnerKey(t,e=0){return this.innerTargetSelector=`${this.getInputGroupSelector(e)} [name$="[${t}]"]`,this.groupIndex=e,this.innerKey=t,this}targetInnerItem(t,e=0){return this.innerTargetSelector=`${this.getInputGroupSelector(e)} ${t}`,this.groupIndex=e,this.selector=t,this}isMultipleSettingTargeted(){const t=`${this.getTargetElementSelector()} .actions .wcc-add-new`;return 0!==$(t).length}addRule(...t){return this.validator.addRule(...t),this}validate(){return this.validator.validate()}getTargetElementSelector(){let t=this.getSettingContainerSelector();return null!==this.innerTargetSelector&&(t+=` ${this.innerTargetSelector}`),t}getDefaultTitle(){return $(`label[for="${this.targetSettingKey}"]`).text()}getSettingContainerSelector(){return`tr[aria-label="${this.targetSettingKey}"]`}getInputGroupSelector(t=0){return null===t?"":`.input-group[data-key="${t}"]`}getSettingKey(){return this.targetSettingKey}}class me{static getTabKeyForSetting(t){if(!this.tabKeyMap.has(t)){const e=$(`tr[aria-label="${t}"]`).closest(".tab"),n=e.length&&e.attr("id")||null;null===n&&console.warn(`Tab key for setting ${t} cannot be found`),this.tabKeyMap.set(t,n)}return this.tabKeyMap.get(t)}}me.tabKeyMap=new Map;class Se extends fe{constructor(t){super(t),this.addBeforeShowCommand(new xt,new Xt,new Tt)}getMainTabKey(){return me.getTabKeyForSetting(this.getSettingKey())}}class Te{constructor(t,e=null,n=null){this.rule=null,this.settingKey=null,this.groupIndex=null,this.innerKey=null,this.containerSelector=null,this.cssSelector=null,this.errorMessages=new Map,this.rule=t,this.innerKey=e,this.groupIndex=n}getRule(){return this.rule}addErrorMessage(t,e){return this.errorMessages.set(t,e),this}getErrorMessages(){return this.errorMessages}getSettingKey(){return this.settingKey}setSettingKey(t){return this.settingKey=t,this}getGroupIndex(){return this.groupIndex}setGroupIndex(t){return this.groupIndex=t,this}getInnerKey(){return this.innerKey}setInnerKey(t){return this.innerKey=t,this}setContainerSelector(t){return this.containerSelector=t,this}getContainerSelector(t){return this.containerSelector}setCssSelector(t){return this.cssSelector=t,this}getCssSelector(){const t=null!==this.containerSelector?this.containerSelector+" ":"",e=null!==this.groupIndex?` .input-group[data-key="${this.groupIndex}"] `:"";let n;if(null!==this.cssSelector)n=this.cssSelector;else{const t=null!==this.innerKey&&this.innerKey.length?`[name$="[${this.innerKey}]"]`:"",e=t.length?"^":"",s=t.length?"[":"";n=(null!==this.settingKey&&this.settingKey.length?`[name${e}="${this.settingKey}${s}"]`:"")+t,n.length||(n=":input")}return t+e+n}static fromRuleMap(t,e=null,n=null){if(0===t.size)throw"The rule map is empty. You must provide the rules.";const s=[];for(let[e,n]of t.entries())s.push(n?`${e}:${n}`:e);return new Te(s.join("|"),e,n)}}class ve{constructor(){}getTranslation(t,e){return this.getTranslationObject(t)[e]||""}getTranslationObject(t){return window.wpcc[t]||{}}setWithInnerKeyInfo(t,e,n){const s=this.getInnerKeyInfo(e,n);return s.name&&t.setTitle(s.name),s.desc&&t.setContent(s.desc),this}getInnerKeyInfo(t,e){let n=this.getTranslationObject("isk_step_info")[`${t}-${e}`]||null;return n||(n=this.getTranslationObject("isk_step_def_info")[e]||null),n||{}}getSettingKeyTitle(t){return this.getTranslation("sk_step_titles",t)}getSettingKeyContent(t){return this.getTranslation("sk_step_contents",t)}}class Ce{constructor(){this.builder=null}bindAdvanceHandler(){null!==this.getBuilder()&&this.onBindAdvanceHandler()}unbindAdvanceHandler(){null!==this.getBuilder()&&this.onUnbindAdvanceHandler()}advance(t=null){if(null===this.getBuilder())return;const e=this.getBuilder().getStep();null!==e&&e.isOpen()&&this.onAdvance(t)}next(){null!==this.getBuilder()?this.getBuilder().onClickNext():console.log("Builder is null. Cannot go to the next step.")}getBuilder(){return this.builder}setBuilder(t){return this.builder=t,this}}class Ee extends Ce{constructor(t=!0){super(),this.shouldBeChecked=t}onBindAdvanceHandler(){$(document).on("change",this.getCheckboxSelector(),(t=>this.advance(t.target)))}onUnbindAdvanceHandler(){$(document).off("change",this.getCheckboxSelector(),(t=>this.advance(t.target)))}onAdvance(t){this.shouldBeChecked===$(t).is(":checked")&&this.next()}getCheckboxSelector(){return`input[type="checkbox"][name="${this.getBuilder().getSettingKey()}"]`}}var Ie,be,we=__webpack_require__(955);!function(t){t.BUTTON_DEV_TOOLS="button.wcc-dev-tools",t.BUTTON_TEST="button.wcc-test",t.BUTTON_ADD_CATEGORY_URLS="button.wcc-test.wcc-category-map",t.BUTTON_OPTIONS_BOX_IMPORT="button.options-box-import",t.BUTTON_OPTIONS_BOX="button.wcc-options-box",t.TEST_RESULTS_CONTAINER=".test-results",t.DEV_TOOLS_IFRAME="iframe.source",t.DEV_TOOLS_BTN_USE_SELECTOR=".css-selector-use",t.DEV_TOOLS_SELECTION_BEHAVIOR='[name="selection_behavior"]',t.TEST_TRANSLATION_OPTIONS_TEXTAREA="textarea"}(Ie||(Ie={}));class Oe extends Ce{constructor(t=!0){super(),this.eventType=(t?this.getLightboxOpenedEventType():this.getLightboxClosedEventType()).toString()}onBindAdvanceHandler(){$(document).on(this.eventType,(()=>this.advance()))}onUnbindAdvanceHandler(){$(document).off(this.eventType,(()=>this.advance()))}onAdvance(t){this.next()}}class ye extends Oe{getLightboxOpenedEventType(){return g.t.devToolsOpened}getLightboxClosedEventType(){return g.t.devToolsClosed}}class Ae extends Ce{constructor(t=null){super(),this.waitDuration=null,this.waitDuration=t}onBindAdvanceHandler(){$(document).on("click",this.getBuilder().getTargetElementSelector(),(t=>this.advance(t.target)))}onUnbindAdvanceHandler(){$(document).off("click",this.getBuilder().getTargetElementSelector(),(t=>this.advance(t.target)))}onAdvance(t){null===this.waitDuration?this.next():setTimeout((()=>this.next()),this.waitDuration)}}class Re extends Ce{constructor(t,e,n){super(),this.eventName=t,this.cssSelector=e,this.handler=n}onBindAdvanceHandler(){$(document).on(this.eventName,this.cssSelector,(t=>this.advance(t)))}onUnbindAdvanceHandler(){$(document).off(this.eventName,this.cssSelector,(t=>this.advance(t)))}onAdvance(t){this.handler&&this.handler(t,this.getBuilder())&&this.next()}}class Ne extends class{constructor(t){this.selector=t}execute(){return this.isValid()}getTargetElement(){const t=this.getSelector();if(null===t)return null;const e=$(t);return e.length?e.first():null}getSelector(){return this.selector}setSelector(t){this.selector=t}}{isValid(){const t=this.getTargetElement();return null!==t&&t.is(":visible")}}class Pe extends Ne{constructor(){super(null)}setSettingKey(t){t&&this.setSelector(`tr[aria-label="${t}"] .test-results`)}}class $e{bindListener(){this.onBindListener()}unbindListener(){this.onUnbindListener()}performAction(t){if(null===this.getBuilder())return;const e=this.getBuilder().getStep();null!==e&&e.isOpen()&&this.onPerformAction(t)}getBuilder(){return this.builder}setBuilder(t){return this.builder=t,this}}class Le extends $e{constructor(t,e=null){super(),this.eventName=t,this.cssSelector=e}onBindListener(){$(document).on(this.eventName,this.cssSelector,(t=>this.performAction(t)))}onUnbindListener(){$(document).off(this.eventName,this.cssSelector,(t=>this.performAction(t)))}onPerformAction(t){this.getBuilder().getTourBuilder().getTour().cancel()}}class xe extends ve{constructor(){super(),this.mainPreparers=new Map,this.innerSettingPreparers=new Map,this.generalInnerSettingPreparers=new Map,this.defineMainPreparers(),this.defineInnerSettingPreparers(),this.defineGeneralInnerSettingPreparers()}static getInstance(){return e.u.getInstance().get("SettingStepFactory",(()=>new xe))}defineMainPreparers(){this.mainPreparers.set(ae.n.MAIN_PAGE_URL,(t=>t.setSkippable(!1).addRule(new Te("url").addErrorMessage(pt.URL,r.c.trans("enter_valid_url"))))).set(ae.n.ACTIVE,(t=>t.setAdvanceStrategy(new Ee))).set(ae.n.ACTIVE_RECRAWLING,(t=>t.setAdvanceStrategy(new Ee))).set(ae.n.CATEGORY_MAP,(t=>t.setTetherOption(dt.TOP_MIDDLE__BOTTOM_MIDDLE))).set(ae.n.TEST_URL_CATEGORY,(t=>t.addRule(new Te("url").addErrorMessage(pt.URL,r.c.trans("enter_valid_url"))))).set(ae.n.TEST_URL_POST,(t=>t.addRule(new Te("url").addErrorMessage(pt.URL,r.c.trans("enter_valid_url"))))).set(ae.n.WPCC_TOOLS_POST_URLS,(t=>t.setTetherOption(dt.TOP_LEFT__BOTTOM_LEFT)))}defineInnerSettingPreparers(){this.getInnerSettingPreparerRegistry(ae.n.CATEGORY_MAP).set(we.i.URL,(t=>t.addRule(new Te("len:1,-1|unique_cat_urls",we.i.URL))))}defineGeneralInnerSettingPreparers(){this.generalInnerSettingPreparers.set(Ie.BUTTON_DEV_TOOLS,(t=>t.setAdvanceStrategy(new ye).addEventListener(new Le(g.t.optionsBoxOpened)))).set(Ie.BUTTON_TEST,(t=>t.setAdvanceStrategy(new Ae).addDesiredStateCheckerCommand(new Pe).setNextable(!1).setSkippable(!1))).set(Ie.BUTTON_ADD_CATEGORY_URLS,(t=>t.setAdvanceStrategy(new Re(g.t.testResultsLoaded,null,(()=>!0))).addDesiredStateCheckerCommand(new Pe).setNextable(!1).setSkippable(!1))).set(Ie.TEST_RESULTS_CONTAINER,(t=>t.setTetherOption(dt.TOP_MIDDLE__BOTTOM_MIDDLE).setAdvanceStrategy(new Re(g.t.testResultsBeforeHidden,null,(()=>!0)))))}get(t){const e=new Se(t).setContent(this.getSettingKeyContent(t)).setTitle(this.getSettingKeyTitle(t));return this.mainPreparers.has(t)&&this.mainPreparers.get(t)(e),e}getInner(t,e,n=0){const s=this.get(t);Object.values(we.i).includes(e)?s.targetInnerKey(e,n):s.targetInnerItem(e,n),this.generalInnerSettingPreparers.has(e)&&this.generalInnerSettingPreparers.get(e)(s);const i=this.getInnerSettingPreparerRegistry(t);return i.has(e)&&i.get(e)(s),this.setWithInnerKeyInfo(s,t,e),s}getInnerSettingPreparerRegistry(t){return this.getInnerRegistry(this.innerSettingPreparers,t)}getInnerRegistry(t,e){return t.has(e)||t.set(e,new Map),t.get(e)}}!function(t){t.BTN_ADD_NEW_SITE="btn_add_new_site",t.INPUT_SITE_TITLE="input_site_title",t.BTN_PUBLISH_UPDATE="btn_publish_update",t.BTN_SAVE_GENERAL_SETTINGS="btn_save_general_settings",t.BTN_QUICK_SAVE_SITE_SETTINGS="btn_quick_save_site_settings",t.BTN_LOAD_GENERAL_SETTINGS="btn_load_general_settings",t.TAB_CONTENT_GENERAL_SETTINGS="tab_content_general_settings",t.SECTION_WOOCOMMERCE="section_woocommerce",t.DASHBOARD_ACTIVE_SITES_SECTION="dashboard_active_sites_section",t.DASHBOARD_WHATS_HAPPENING_SECTION="dashboard_whats_happening_section",t.DASHBOARD_LAST_CRAWLED_POSTS_SECTION="dashboard_last_crawled_posts_section",t.DASHBOARD_REFRESH_INPUT="dashboard_refresh_input",t.TESTER_SELECT_SITE_NAME="tester_select_site_name",t.TESTER_SELECT_TEST_TYPE="tester_select_test_type",t.TESTER_CONTAINER_TEST_URL="tester_input_test_url",t.TESTER_BTN_TEST="tester_btn_test",t.TESTER_TEST_RESULTS_CONTAINER="tester_test_results_container",t.BTN_MANUAL_CRAWLING_TOOL_CRAWL_NOW="btn_manual_crawling_tool_crawl_now",t.MANUAL_CRAWLING_TOOL_RESULTS_CONTAINER="manual_crawling_tool_results_container",t.BTN_MANUAL_RECRAWLING_TOOL_RECRAWL="btn_manual_recrawling_tool_recrawl",t.MANUAL_RECRAWLING_TOOL_RESULTS_CONTAINER="manual_recrawling_tool_results_container",t.BUTTON_DISPLAY_GUIDES="button_display_guides"}(be||(be={}));class De extends ee{constructor(t){super(),this.targetElementSelector=t}getTargetElementSelector(){return this.targetElementSelector}}class ke extends $e{constructor(t,e,n){super(),this.eventName=t,this.cssSelector=e,this.action=n}onBindListener(){$(document).on(this.eventName,this.cssSelector,(t=>this.performAction(t)))}onUnbindListener(){$(document).off(this.eventName,this.cssSelector,(t=>this.performAction(t)))}onPerformAction(t){this.action(this.getBuilder(),t)}}class Be extends ke{constructor(t,e){super(t,e,(t=>this.handleAction(t)))}handleAction(t){if(t.isLast())return;const e=t.getTourBuilder();if(!e)return;const n=t.getStepIndex()+1,s=e.getSteps()[n]||null;if(!s)return;const i=s.getRedirectCommand(),r=i&&i.getTargetPage().getPageType()||nt.getPageType();ot.getInstance().setAutoStartCookie(new et(r,e.getTourId(),n))}}class Me extends Ne{constructor(){super("#test-results")}}class Fe extends ve{constructor(){super(),this.registry=new Map,this.registry.set(be.BTN_ADD_NEW_SITE,(()=>new De(".page-title-action").addEventListener(new Be("click",".page-title-action")))).set(be.INPUT_SITE_TITLE,(()=>new De('[name="post_title"]'))).set(be.BTN_PUBLISH_UPDATE,(()=>new De("#publish").addEventListener(new Be("click","#publish")).setTetherOption(dt.MIDDLE_LEFT__MIDDLE_RIGHT))).set(be.BTN_QUICK_SAVE_SITE_SETTINGS,(()=>new De(".quick-save-container .quick-save").setNextable(!1).setSkippable(!1).setTetherOption(dt.TOP_LEFT__BOTTOM_RIGHT).setAdvanceStrategy(new Re(g.t.siteSettingsQuickSaved,null,(()=>!0))))).set(be.BTN_LOAD_GENERAL_SETTINGS,(()=>new De("#btn-load-general-settings").setAdvanceStrategy(new Re(g.t.generalSettingsLoaded,null,(()=>!0))))).set(be.TAB_CONTENT_GENERAL_SETTINGS,(()=>new De("#tab-general-settings").setTetherOption(dt.TOP_MIDDLE__BOTTOM_MIDDLE))).set(be.SECTION_WOOCOMMERCE,(()=>new De(D.getInstance().selectorOptionsContainer).setTetherOption(dt.TOP_MIDDLE__BOTTOM_MIDDLE))).set(be.BTN_SAVE_GENERAL_SETTINGS,(()=>new De("#submit-top").setTetherOption(dt.MIDDLE_LEFT__MIDDLE_RIGHT).addEventListener(new Be("click","#submit-top")))).set(be.DASHBOARD_ACTIVE_SITES_SECTION,(()=>new De("#section-active-sites").setTetherOption(dt.TOP_MIDDLE__TOP_MIDDLE))).set(be.DASHBOARD_WHATS_HAPPENING_SECTION,(()=>new De("#section-whats-happening").setTetherOption(dt.TOP_RIGHT__TOP_LEFT))).set(be.DASHBOARD_LAST_CRAWLED_POSTS_SECTION,(()=>new De("#section-last-crawled-posts").setTetherOption(dt.TOP_LEFT__TOP_RIGHT))).set(be.DASHBOARD_REFRESH_INPUT,(()=>new De('input[name="refresh"]').setTetherOption(dt.BOTTOM_LEFT__TOP_LEFT).setAdvanceStrategy(new Re(g.t.dashboardRefreshCountdownStarted,null,(()=>!0))))).set(be.TESTER_SELECT_SITE_NAME,(()=>new De("#tester-form .input-group.site"))).set(be.TESTER_SELECT_TEST_TYPE,(()=>new De("#tester-form .input-group.test-type"))).set(be.TESTER_CONTAINER_TEST_URL,(()=>new De("#url-input-group"))).set(be.TESTER_BTN_TEST,(()=>new De('#tester-form button[type="submit"]').setAdvanceStrategy(new Re(g.t.siteTesterTestFinished,null,(()=>!0))).addDesiredStateCheckerCommand(new Me))).set(be.TESTER_TEST_RESULTS_CONTAINER,(()=>new De("#test-results").setTetherOption(dt.TOP_RIGHT__TOP_RIGHT))).set(be.BTN_MANUAL_CRAWLING_TOOL_CRAWL_NOW,(()=>new De("#tool-manual-crawl .crawl-now").setAdvanceStrategy(new Ae))).set(be.MANUAL_CRAWLING_TOOL_RESULTS_CONTAINER,(()=>new De("#container-url-queue-manual-crawl"))).set(be.BTN_MANUAL_RECRAWLING_TOOL_RECRAWL,(()=>new De("#tab-manual-recrawling button.recrawl").setAdvanceStrategy(new Re(g.t.toolTestResultsLoaded,null,(()=>!0))))).set(be.MANUAL_RECRAWLING_TOOL_RESULTS_CONTAINER,(()=>new De("#tab-manual-recrawling .test-results").setTetherOption(dt.TOP_LEFT__BOTTOM_LEFT).setAdvanceStrategy(new Re(g.t.testResultsBeforeHidden,null,(()=>!0))))).set(be.BUTTON_DISPLAY_GUIDES,(()=>new De("#wpcc-guides .btn-show-guides").setAdvanceStrategy(new Ae).setTetherOption(dt.TOP_LEFT__BOTTOM_RIGHT)))}static getInstance(){return e.u.getInstance().get("GeneralStepFactory",(()=>new Fe))}get(t){if(!this.registry.has(t))throw`The registry does not have ${t}. You must register it.`;const e=window.wpcc.g_step_info[t]||{};return this.registry.get(t)().setTitle(e.name||null).setContent(e.desc||null)}}class Ue extends ee{constructor(t){super(),this.validate=!1,this.mustBeEnabled=!1,this.tabKey=t,this.setAdvanceStrategy(this.createTabStepAdvanceStrategy()),this.addBeforeShowCommand(new xt)}setMustBeEnabled(t){return this.mustBeEnabled=t,this.validate=!0,this}isValid(){return!!this.onIsInDesiredState()||(this.setErrors(this.mustBeEnabled?window.wpcc.must_enable_tab_by_clicking:window.wpcc.must_not_enable_tab),!1)}build(){const t=super.build();return t.tetherOptions={offset:"-10px 0"},t}onIsInDesiredState(t=!1){return super.onIsInDesiredState(t)&&(!this.validate||this.mustBeEnabled===this.isTabActive())}getTargetElementSelector(){return`.nav-tab-wrapper > [data-tab="#${this.tabKey}"]`}isTabActive(){return G.I.getInstance().isTabActive(this.getTabKey())}getDefaultTitle(){return window.wpcc.enable_x_tab.replace("%s",$(this.getTargetElementSelector()).text())}getTabKey(){return this.tabKey}}class He extends Ce{onBindAdvanceHandler(){$(document).on(this.getEventType().toString(),((t,e)=>this.advance(e)))}onUnbindAdvanceHandler(){$(document).off(this.getEventType().toString(),((t,e)=>this.advance(e)))}onAdvance(t){this.isTargetTabKey(t)&&this.next()}}class Ge extends He{getEventType(){return g.t.tabActivated}isTargetTabKey(t){return t===this.getBuilder().getMainTabKey()}}class Ve extends Ue{constructor(t){super(t),this.addBeforeShowCommand(new Xt)}createTabStepAdvanceStrategy(){return new Ge}getMainTabKey(){return this.getTabKey()}}class We extends ve{static getInstance(){return e.u.getInstance().get("MainTabStepFactory",(()=>new We))}get(t){return new Ve(t).setContent(this.getTranslation("tab_step_contents",t)).setMustBeEnabled(!0)}}var je,Ke=__webpack_require__(644);class Ye{constructor(){this.builder=null}execute(){if(null===this.builder)throw`A builder must be set for ${Ye.name}`;const t=Lt.getInstance();if(!t.isAvailable()){const t="Dev Tools is not available in this page";return console.warn(t),void(null!==(this.reject||null)&&this.reject(t))}const e=Ct.getInstance().$currentDevToolsButton||null,n=this.builder.getDevToolsButton();!t.isOpen()||null!==e&&e.get(0)===n.get(0)||t.closeLightbox(),(new Tt).setMainTabKey(this.builder).execute(),t.isOpen()||n.trigger("click")}setBuilder(t){return this.builder=t,this}setPromiseCallbacks(t,e){this.resolve=t,this.reject=e}}class ze extends ee{constructor(t,e=0){super(),this.innerTargetSelector=null,this.targetedSettingKey=null,this.setSetting(t,e),this.validator=(new ge).setRulePreparer((t=>t.setContainerSelector(this.getContainerSelector()).setCssSelector(this.innerTargetSelector))),this.setTetherOption(dt.BOTTOM_LEFT__TOP_LEFT),this.addBeforeShowCommand(new Xt,new Ye),this.enableScroll(!1)}targetSettingKey(t,e=!1){return this.innerTargetSelector=e?`label[for="${t}"]`:`[name="${t}"]`,this.targetedSettingKey=t,this}targetInnerItem(t){return this.innerTargetSelector=t,this}setSetting(t,e=0){return this.settingKey=t,this.inputGroupIndex=e,this}addRule(...t){return this.validator.addRule(...t),this}validate(){return this.validator.validate()}getTargetElementSelector(){if(null===(this.innerTargetSelector||null))throw"Inner target selector must be set by calling targetInnerItem() or targetSettingKey()";return`${this.getContainerSelector()} ${this.innerTargetSelector}`}getDevToolsButton(){return $(this.getDevToolsButtonSelector())}getMainTabKey(){return me.getTabKeyForSetting(this.settingKey)}getSettingKey(){return this.targetedSettingKey}getDevToolsButtonSelector(){return`tr[aria-label="${this.settingKey}"] .input-group[data-key="${this.inputGroupIndex}"] .wcc-dev-tools`}getContainerSelector(){return Ct.getInstance().lightboxDevToolsContentSelector}}class qe{execute(){const t=Lt.getInstance();t.isAvailable()&&t.isOpen()&&At.getInstance().activateHoverSelect(!0)}}class Xe extends ve{constructor(){super(),this.preparers=new Map,this.preparers.set(ae.n.DEV_TOOLS_USE_IMMEDIATELY,(t=>t.addEventListener(new Le(g.t.devToolsClosed)).targetSettingKey(ae.n.DEV_TOOLS_USE_IMMEDIATELY,!0))).set(ae.n.DEV_TOOLS_TEST_BUTTON_BEHAVIOR,(t=>t.addEventListener(new Le(g.t.devToolsClosed)).targetSettingKey(ae.n.DEV_TOOLS_TEST_BUTTON_BEHAVIOR,!0))).set(Ie.DEV_TOOLS_IFRAME,(t=>t.setTetherOption(dt.TOP_RIGHT__TOP_RIGHT).addEventListener(new Le(g.t.devToolsClosed)).addBeforeShowCommand(new qe))).set(Ie.DEV_TOOLS_BTN_USE_SELECTOR,(t=>t.setNextable(!1).setSkippable(!1).setAdvanceStrategy(new Ae))).set(ae.n.DEV_TOOLS_CSS_SELECTOR,(t=>t.addEventListener(new Le(g.t.devToolsClosed))))}static getInstance(){return e.u.getInstance().get("DevToolsStepFactory",(()=>new Xe))}get(t,e){const n=new ze(t);return Object.values(ae.n).includes(e)?n.targetSettingKey(e).setTitle(this.getSettingKeyTitle(e)).setContent(this.getSettingKeyContent(e)):(n.targetInnerItem(e),this.setWithInnerKeyInfo(n,t,e)),this.preparers.has(e)&&this.preparers.get(e)(n),n}}!function(t){t.LETS_GET_YOU_STARTED_ADD_NEW_SITE="lets_get_you_started_add_new_site",t.DEV_TOOLS_CLICK_POST_LINK="dev_tools_click_post_link",t.DEV_TOOLS_CLICK_POST_TITLE="dev_tools_click_post_title",t.DEV_TOOLS_CLICK_POST_CONTENT="dev_tools_click_post_content",t.DEV_TOOLS_CLICK_CATEGORY_LINK="dev_tools_click_category_link",t.DEV_TOOLS_CLICK_CATEGORY_NAME="dev_tools_click_category_name",t.DEV_TOOLS_CLICK_FEATURED_IMAGE="dev_tools_click_featured_image",t.DEV_TOOLS_CLICK_UNNECESSARY_ELEMENT="dev_tools_click_unnecessary_element",t.OBSERVE_FOUND_POST_URLS="observe_found_post_urls",t.OBSERVE_ADDED_CATEGORY_URLS="observe_added_category_urls",t.OBSERVE_FOUND_POST_TITLE="observe_found_post_title",t.OBSERVE_FOUND_UNNECESSARY_ELEMENTS="observe_found_unnecessary_elements",t.OBSERVE_FOUND_FEATURED_IMAGE_URL="observe_featured_image_url",t.POST_TYPE_WOOCOMMERCE_PRODUCT="post_type_woocommerce_product",t.CATEGORY_MAP_WOOCOMMERCE_CATEGORY="category_map_woocommerce_category",t.SHOW_LAZY_LOADED_IMAGES_SELECTOR="show-lazy-loaded-images-selector",t.SHOW_LAZY_LOADED_IMAGES_TEST_RESULTS_1="show-lazy-loaded-images-test-results-1",t.SHOW_LAZY_LOADED_IMAGES_ATTR1="show-lazy-loaded-images-attr1",t.SHOW_LAZY_LOADED_IMAGES_ATTR2="show-lazy-loaded-images-attr2",t.SHOW_LAZY_LOADED_IMAGES_TEST_RESULTS_2="show-lazy-loaded-images-test-results-2",t.TRANSLATION_FROM_LANGUAGE="translation-from-language",t.TRANSLATION_TO_LANGUAGE="translation-to-language",t.TRANSLATION_TEST_TEXT="translation-test-text"}(je||(je={}));class Qe{constructor(t){this.valueSettingKey=t}execute(){if(!Lt.getInstance().isOpen())return void console.warn("Dev Tools is not open. I cannot load a URL in Dev Tools.");const t=$(`[name="${this.valueSettingKey}"]`);if(!t.length)return void console.warn(`Input with name ${this.valueSettingKey} cannot be found.`);const e=t.val()||null;null!==e&&null!==e.toString()?$t.getInstance().go(e.toString()):console.warn(`Value of the input with name ${this.valueSettingKey} is not valid.`)}}class Je{execute(){const t=this.getAdminMenu();if(null===t||t.is(":visible"))return;const e=this.getMenuToggle();null!==e&&e.is(":visible")&&e.trigger("click")}getMenuToggle(){const t=$("#wp-admin-bar-menu-toggle");return t.length?t:null}getAdminMenu(){const t=$("#adminmenuwrap");return t.length?t:null}}class Ze extends ee{constructor(t){super(),this.pageType=t,this.addBeforeShowCommand(new Je),this.setTetherOption(dt.MIDDLE_RIGHT__MIDDLE_LEFT)}getTargetElementSelector(){return nt.getPageTypeMenuLinkSelector(this.pageType)}}class tn extends ve{static getInstance(){return e.u.getInstance().get("MenuLinkStepFactory",(()=>new tn))}get(t){const e=new Ze(t);e.addEventListener(new Be("click",e.getTargetElementSelector()));const n=this.getTranslationObject("page_step_info")[t]||{};return n.name&&e.setTitle(n.name),n.desc&&e.setContent(n.desc),e}}class en extends $e{constructor(t,e,n=null){super(),this.targetStep=t,this.eventName=e,this.cssSelector=n}onBindListener(){$(document).on(this.eventName,this.cssSelector,(t=>this.performAction(t)))}onUnbindListener(){$(document).off(this.eventName,this.cssSelector,(t=>this.performAction(t)))}onPerformAction(t){this.targetStep.getTourBuilder().getTour().show(this.targetStep.getStepIndex())}}class nn extends St{getId(){return at.SAVING_POSTS_AUTOMATICALLY}getStartPageType(){return nt.getPageType()}prepareTourBuilder(t){const e=xe.getInstance(),n=Fe.getInstance(),s=We.getInstance(),i=Xe.getInstance(),r=tn.getInstance(),o=i.get(ae.n.POST_TITLE_SELECTORS,Ie.DEV_TOOLS_IFRAME).addBeforeShowCommand(new Qe(ae.n.TEST_URL_POST)).setDetailsFromCustomKey(je.DEV_TOOLS_CLICK_POST_TITLE),a=i.get(ae.n.POST_CONTENT_SELECTORS,Ie.DEV_TOOLS_IFRAME).addBeforeShowCommand(new Qe(ae.n.TEST_URL_POST)).setDetailsFromCustomKey(je.DEV_TOOLS_CLICK_POST_CONTENT),l=e.getInner(ae.n.CATEGORY_POST_LINK_SELECTORS,Ie.BUTTON_TEST),c=e.getInner(ae.n.POST_TITLE_SELECTORS,Ie.BUTTON_TEST),u=e.getInner(ae.n.POST_CONTENT_SELECTORS,Ie.BUTTON_TEST),h=e.get(ae.n.WPCC_IS_SCHEDULING_ACTIVE).addRule(new Te("checked")).setSkippable(!1).setAdvanceStrategy(new Ee);t.addStep((this.getStartPageType()===d.SITE_LISTING?n.get(be.BTN_ADD_NEW_SITE):r.get(d.ADD_NEW_SITE)).setDetailsFromCustomKey(je.LETS_GET_YOU_STARTED_ADD_NEW_SITE).setSkippable(!1).setNextable(!1)).setPage(mt.fromPageType(d.SITE_SETTINGS)).addStep(n.get(be.INPUT_SITE_TITLE)).addStep(e.get(ae.n.MAIN_PAGE_URL)).addStep(e.get(ae.n.ACTIVE).setSkippable(!1).addRule(new Te(pt.CHECKED)).setAdvanceStrategy(new Ee)).addStep(s.get(Ke.R.SITE_SETTINGS_TAB_CATEGORY)).addStep(e.getInner(ae.n.CATEGORY_MAP,we.i.URL).setSkippable(!1)).addStep(e.get(ae.n.TEST_URL_CATEGORY).setSkippable(!1)).addStep(e.getInner(ae.n.CATEGORY_POST_LINK_SELECTORS,Ie.BUTTON_DEV_TOOLS)).addStep(i.get(ae.n.CATEGORY_POST_LINK_SELECTORS,Ie.DEV_TOOLS_IFRAME).addBeforeShowCommand(new Qe(ae.n.TEST_URL_CATEGORY)).setDetailsFromCustomKey(je.DEV_TOOLS_CLICK_POST_LINK)).addStep(i.get(ae.n.CATEGORY_POST_LINK_SELECTORS,ae.n.DEV_TOOLS_CSS_SELECTOR)).addStep(i.get(ae.n.CATEGORY_POST_LINK_SELECTORS,Ie.DEV_TOOLS_BTN_USE_SELECTOR)).addStep(l).addStep(e.getInner(ae.n.CATEGORY_POST_LINK_SELECTORS,Ie.TEST_RESULTS_CONTAINER,null).setDetailsFromCustomKey(je.OBSERVE_FOUND_POST_URLS).addRequiredStep(l)).addStep(s.get(Ke.R.SITE_SETTINGS_TAB_POST)).addStep(e.get(ae.n.TEST_URL_POST).setSkippable(!1)).addStep(e.get(ae.n.POST_TITLE_SELECTORS).addEventListener(new en(o,g.t.devToolsOpened))).addStep(e.getInner(ae.n.POST_TITLE_SELECTORS,Ie.BUTTON_DEV_TOOLS)).addStep(o).addStep(i.get(ae.n.POST_TITLE_SELECTORS,Ie.DEV_TOOLS_BTN_USE_SELECTOR)).addStep(c).addStep(e.getInner(ae.n.POST_TITLE_SELECTORS,Ie.TEST_RESULTS_CONTAINER,null).setDetailsFromCustomKey(je.OBSERVE_FOUND_POST_TITLE).addRequiredStep(c)).addStep(e.get(ae.n.POST_CONTENT_SELECTORS).addEventListener(new en(a,g.t.devToolsOpened))).addStep(e.getInner(ae.n.POST_CONTENT_SELECTORS,Ie.BUTTON_DEV_TOOLS)).addStep(a).addStep(i.get(ae.n.POST_CONTENT_SELECTORS,Ie.DEV_TOOLS_BTN_USE_SELECTOR)).addStep(u).addStep(e.getInner(ae.n.POST_CONTENT_SELECTORS,Ie.TEST_RESULTS_CONTAINER,null).addRequiredStep(u)).addStep(n.get(be.BTN_PUBLISH_UPDATE).setSkippable(!1).setNextable(!1)).addStep(r.get(d.GENERAL_SETTINGS)).setPage(mt.fromPageType(d.GENERAL_SETTINGS)).addStep(h).addStep(e.get(ae.n.WPCC_INTERVAL_URL_COLLECTION).addRequiredStep(h)).addStep(e.get(ae.n.WPCC_INTERVAL_POST_CRAWL).addRequiredStep(h)).addStep(n.get(be.BTN_SAVE_GENERAL_SETTINGS).setCompletable(!1).setNextable(!1).setSkippable(!1)).addStep(r.get(d.DASHBOARD)).setPage(mt.fromPageType(d.DASHBOARD)).addStep(n.get(be.DASHBOARD_ACTIVE_SITES_SECTION)).addStep(n.get(be.DASHBOARD_WHATS_HAPPENING_SECTION)).addStep(n.get(be.DASHBOARD_LAST_CRAWLED_POSTS_SECTION)).addStep(n.get(be.DASHBOARD_REFRESH_INPUT))}}class sn extends St{getId(){return at.UPDATING_POSTS_AUTOMATICALLY}getStartPageType(){return d.SITE_SETTINGS}prepareTourBuilder(t){const e=xe.getInstance(),n=Fe.getInstance(),s=tn.getInstance(),i=e.get(ae.n.WPCC_IS_RECRAWLING_ACTIVE).addRule(new Te("checked")).setSkippable(!1).setAdvanceStrategy(new Ee);t.addStep(e.get(ae.n.ACTIVE_RECRAWLING).setSkippable(!1).addRule(new Te("checked"))).addStep(n.get(be.BTN_QUICK_SAVE_SITE_SETTINGS)).addStep(s.get(d.GENERAL_SETTINGS)).setPage(mt.fromPageType(d.GENERAL_SETTINGS)).addStep(i).addStep(e.get(ae.n.WPCC_INTERVAL_POST_RECRAWL).addRequiredStep(i)).addStep(e.get(ae.n.WPCC_MIN_TIME_BETWEEN_TWO_RECRAWLS_IN_MIN)).addStep(e.get(ae.n.WPCC_RECRAWL_POSTS_NEWER_THAN_IN_MIN)).addStep(n.get(be.BTN_SAVE_GENERAL_SETTINGS).setCompletable(!1).setNextable(!1).setSkippable(!1))}}class rn extends St{getId(){return at.TESTING_SITE_SETTINGS}getStartPageType(){return d.SITE_TESTER}prepareTourBuilder(t){const e=Fe.getInstance(),n=e.get(be.TESTER_BTN_TEST).setSkippable(!1).setNextable(!1);t.addStep(e.get(be.TESTER_SELECT_SITE_NAME)).addStep(e.get(be.TESTER_SELECT_TEST_TYPE)).addStep(e.get(be.TESTER_CONTAINER_TEST_URL)).addStep(n).addStep(e.get(be.TESTER_TEST_RESULTS_CONTAINER).addRequiredStep(n))}}class on extends St{getId(){return at.USING_COOKIES}getStartPageType(){return d.SITE_SETTINGS}prepareTourBuilder(t){const e=xe.getInstance(),n=We.getInstance(),s=Fe.getInstance();t.addStep(n.get(Ke.R.SITE_SETTINGS_TAB_MAIN).setSkippable(!1)).addStep(e.get(ae.n.COOKIES)).addStep(s.get(be.BTN_QUICK_SAVE_SITE_SETTINGS))}}class an extends St{getId(){return at.USING_CUSTOM_GENERAL_SETTINGS}getStartPageType(){return d.SITE_SETTINGS}prepareTourBuilder(t){const e=xe.getInstance(),n=We.getInstance(),s=Fe.getInstance(),i=e.get(ae.n.DO_NOT_USE_GENERAL_SETTINGS).setSkippable(!1).addRule(new Te("checked")).setAdvanceStrategy(new Ee),r=n.get(Ke.R.SITE_SETTINGS_TAB_GENERAL_SETTINGS).setMustBeEnabled(!0).setSkippable(!1).addRequiredStep(i);t.addStep(n.get(Ke.R.SITE_SETTINGS_TAB_MAIN)).addStep(i).addStep(r).addStep(s.get(be.BTN_LOAD_GENERAL_SETTINGS).addRequiredStep(r)).addStep(s.get(be.TAB_CONTENT_GENERAL_SETTINGS).addRequiredStep(r)).addStep(s.get(be.BTN_QUICK_SAVE_SITE_SETTINGS))}}class ln extends St{getId(){return at.ADDING_CATEGORY_URLS_AUTOMATICALLY}getStartPageType(){return d.SITE_SETTINGS}prepareTourBuilder(t){const e=xe.getInstance(),n=We.getInstance(),s=Xe.getInstance(),i=e.get(ae.n.CATEGORY_ADD_CATEGORY_URLS_WITH_SELECTOR).setSkippable(!1).addRule(new Te("checked")).setAdvanceStrategy(new Ee),r=e.get(ae.n.CATEGORY_LIST_PAGE_URL).addRule(new Te("url")).addRequiredStep(i),o=s.get(ae.n.CATEGORY_LIST_URL_SELECTORS,Ie.DEV_TOOLS_IFRAME).addRequiredStep(i,r).addBeforeShowCommand(new Qe(ae.n.CATEGORY_LIST_PAGE_URL)).setDetailsFromCustomKey(je.DEV_TOOLS_CLICK_CATEGORY_LINK);t.addStep(n.get(Ke.R.SITE_SETTINGS_TAB_CATEGORY)).addStep(i).addStep(r).addStep(e.get(ae.n.CATEGORY_LIST_URL_SELECTORS).addRequiredStep(i,r).addEventListener(new en(o,g.t.devToolsOpened))).addStep(e.getInner(ae.n.CATEGORY_LIST_URL_SELECTORS,Ie.BUTTON_DEV_TOOLS).addRequiredStep(i,r)).addStep(o).addStep(s.get(ae.n.CATEGORY_LIST_URL_SELECTORS,Ie.DEV_TOOLS_BTN_USE_SELECTOR).addRequiredStep(i,r)).addStep(e.getInner(ae.n.CATEGORY_LIST_URL_SELECTORS,Ie.BUTTON_ADD_CATEGORY_URLS).addRequiredStep(i,r)).addStep(e.get(ae.n.CATEGORY_MAP).setSkippable(!1).setDetailsFromCustomKey(je.OBSERVE_ADDED_CATEGORY_URLS))}}class cn extends St{getId(){return at.SHOWING_IFRAMES_IN_POST_CONTENT}getStartPageType(){return d.SITE_SETTINGS}prepareTourBuilder(t){const e=xe.getInstance(),n=We.getInstance(),s=Fe.getInstance(),i=tn.getInstance();t.addStep(n.get(Ke.R.SITE_SETTINGS_TAB_TEMPLATES)).addStep(e.get(ae.n.POST_CONVERT_IFRAMES_TO_SHORT_CODE).setSkippable(!1).addRule(new Te("checked")).setAdvanceStrategy(new Ee)).addStep(s.get(be.BTN_QUICK_SAVE_SITE_SETTINGS)).addStep(i.get(d.GENERAL_SETTINGS)).setPage(mt.fromPageType(d.GENERAL_SETTINGS)).addStep(n.get(Ke.R.GENERAL_SETTINGS_TAB_POST)).addStep(e.get(ae.n.WPCC_ALLOWED_IFRAME_SHORT_CODE_DOMAINS)).addStep(s.get(be.BTN_SAVE_GENERAL_SETTINGS))}}class un extends St{getId(){return at.REMOVING_LINKS_IN_POST_CONTENT}getStartPageType(){return d.SITE_SETTINGS}prepareTourBuilder(t){const e=xe.getInstance(),n=We.getInstance(),s=Fe.getInstance();t.addStep(n.get(Ke.R.SITE_SETTINGS_TAB_TEMPLATES)).addStep(e.get(ae.n.POST_REMOVE_LINKS_FROM_SHORT_CODES).addRule(new Te("checked")).setAdvanceStrategy(new Ee)).addStep(s.get(be.BTN_QUICK_SAVE_SITE_SETTINGS))}}class hn extends St{getId(){return at.CREATING_POST_CATEGORIES_AUTOMATICALLY}getStartPageType(){return d.SITE_SETTINGS}prepareTourBuilder(t){const e=We.getInstance(),n=xe.getInstance(),s=Xe.getInstance(),i=Fe.getInstance(),r=n.getInner(ae.n.POST_CATEGORY_NAME_SELECTORS,Ie.BUTTON_TEST),o=s.get(ae.n.POST_CATEGORY_NAME_SELECTORS,Ie.DEV_TOOLS_SELECTION_BEHAVIOR);t.addStep(e.get(Ke.R.SITE_SETTINGS_TAB_POST)).addStep(n.get(ae.n.TEST_URL_POST)).addStep(n.get(ae.n.POST_CATEGORY_NAME_SELECTORS).addEventListener(new Le(g.t.optionsBoxOpened)).addEventListener(new en(o,g.t.devToolsOpened))).addStep(n.getInner(ae.n.POST_CATEGORY_NAME_SELECTORS,Ie.BUTTON_DEV_TOOLS)).addStep(o).addStep(s.get(ae.n.POST_CATEGORY_NAME_SELECTORS,Ie.DEV_TOOLS_IFRAME).addBeforeShowCommand(new Qe(ae.n.TEST_URL_POST)).setDetailsFromCustomKey(je.DEV_TOOLS_CLICK_CATEGORY_NAME)).addStep(s.get(ae.n.POST_CATEGORY_NAME_SELECTORS,Ie.DEV_TOOLS_BTN_USE_SELECTOR)).addStep(r).addStep(n.getInner(ae.n.POST_CATEGORY_NAME_SELECTORS,Ie.TEST_RESULTS_CONTAINER,null).addRequiredStep(r)).addStep(n.get(ae.n.POST_CATEGORY_ADD_HIERARCHICAL)).addStep(n.get(ae.n.POST_CATEGORY_DO_NOT_ADD_CATEGORY_IN_MAP)).addStep(i.get(be.BTN_QUICK_SAVE_SITE_SETTINGS))}}class dn extends St{getId(){return at.SAVING_IMAGES_IN_POST_CONTENT}getStartPageType(){return d.SITE_SETTINGS}prepareTourBuilder(t){const e=xe.getInstance(),n=We.getInstance(),s=Fe.getInstance();t.addStep(n.get(Ke.R.SITE_SETTINGS_TAB_POST)).addStep(e.get(ae.n.POST_SAVE_ALL_IMAGES_IN_CONTENT).setSkippable(!1).addRule(new Te("checked")).setAdvanceStrategy(new Ee)).addStep(s.get(be.BTN_QUICK_SAVE_SITE_SETTINGS))}}class pn extends St{getId(){return at.SHOWING_LAZY_LOADED_IMAGES}getStartPageType(){return d.SITE_SETTINGS}prepareTourBuilder(t){const e=xe.getInstance(),n=We.getInstance(),s=Fe.getInstance(),i=e.getInner(ae.n.POST_EXCHANGE_ELEMENT_ATTRIBUTES,Ie.BUTTON_TEST),r=e.getInner(ae.n.POST_EXCHANGE_ELEMENT_ATTRIBUTES,Ie.BUTTON_TEST),o=e.getInner(ae.n.POST_EXCHANGE_ELEMENT_ATTRIBUTES,we.i.SELECTOR).setSkippable(!1).setDetailsFromCustomKey(je.SHOW_LAZY_LOADED_IMAGES_SELECTOR).addRule(Te.fromRuleMap((new Map).set(pt.VALID_VAL,"img"))),a=e.getInner(ae.n.POST_EXCHANGE_ELEMENT_ATTRIBUTES,we.i.ATTRIBUTE_1).setSkippable(!1).setDetailsFromCustomKey(je.SHOW_LAZY_LOADED_IMAGES_ATTR1).addRule(Te.fromRuleMap((new Map).set(pt.VALID_VAL,"src"))),l=e.getInner(ae.n.POST_EXCHANGE_ELEMENT_ATTRIBUTES,we.i.ATTRIBUTE_2).setSkippable(!1).setTetherOption(dt.BOTTOM_LEFT__TOP_RIGHT).setDetailsFromCustomKey(je.SHOW_LAZY_LOADED_IMAGES_ATTR2).addRule(Te.fromRuleMap((new Map).set(pt.TEXT_LENGTH,"1,-1")));t.addStep(n.get(Ke.R.SITE_SETTINGS_TAB_POST)).addStep(e.get(ae.n.TEST_URL_POST)).addStep(e.get(ae.n.POST_EXCHANGE_ELEMENT_ATTRIBUTES).addEventListener(new Le(g.t.devToolsOpened))).addStep(o).addStep(a.addRequiredStep(o)).addStep(i).addStep(e.getInner(ae.n.POST_EXCHANGE_ELEMENT_ATTRIBUTES,Ie.TEST_RESULTS_CONTAINER,null).setDetailsFromCustomKey(je.SHOW_LAZY_LOADED_IMAGES_TEST_RESULTS_1).addRequiredStep(i)).addStep(l.addRequiredStep(a)).addStep(r).addStep(e.getInner(ae.n.POST_EXCHANGE_ELEMENT_ATTRIBUTES,Ie.TEST_RESULTS_CONTAINER,null).setDetailsFromCustomKey(je.SHOW_LAZY_LOADED_IMAGES_TEST_RESULTS_2).addRequiredStep(r)).addStep(s.get(be.BTN_QUICK_SAVE_SITE_SETTINGS))}}class gn extends St{getId(){return at.REMOVING_UNNECESSARY_ELEMENTS_FROM_POST}getStartPageType(){return d.SITE_SETTINGS}prepareTourBuilder(t){const e=xe.getInstance(),n=We.getInstance(),s=Fe.getInstance(),i=Xe.getInstance(),r=i.get(ae.n.POST_UNNECESSARY_ELEMENT_SELECTORS,Ie.DEV_TOOLS_SELECTION_BEHAVIOR).addBeforeShowCommand(new Qe(ae.n.TEST_URL_POST)),o=e.getInner(ae.n.POST_UNNECESSARY_ELEMENT_SELECTORS,Ie.BUTTON_TEST);t.addStep(n.get(Ke.R.SITE_SETTINGS_TAB_POST)).addStep(e.get(ae.n.TEST_URL_POST)).addStep(e.get(ae.n.POST_UNNECESSARY_ELEMENT_SELECTORS).addEventListener(new en(r,g.t.devToolsOpened))).addStep(e.getInner(ae.n.POST_UNNECESSARY_ELEMENT_SELECTORS,Ie.BUTTON_DEV_TOOLS)).addStep(r).addStep(i.get(ae.n.POST_UNNECESSARY_ELEMENT_SELECTORS,Ie.DEV_TOOLS_IFRAME).setDetailsFromCustomKey(je.DEV_TOOLS_CLICK_UNNECESSARY_ELEMENT)).addStep(i.get(ae.n.POST_UNNECESSARY_ELEMENT_SELECTORS,Ie.DEV_TOOLS_BTN_USE_SELECTOR)).addStep(o).addStep(e.getInner(ae.n.POST_UNNECESSARY_ELEMENT_SELECTORS,Ie.TEST_RESULTS_CONTAINER,null).addRequiredStep(o).setDetailsFromCustomKey(je.OBSERVE_FOUND_UNNECESSARY_ELEMENTS)).addStep(s.get(be.BTN_QUICK_SAVE_SITE_SETTINGS))}}class _n extends St{getId(){return at.MANUALLY_SAVING_POSTS}getStartPageType(){return d.TOOLS}prepareTourBuilder(t){const e=We.getInstance(),n=xe.getInstance(),s=Fe.getInstance(),i=n.get(ae.n.WPCC_TOOLS_POST_URLS).setSkippable(!1).addRule(Te.fromRuleMap((new Map).set(pt.TEXT_LENGTH,"1,-1")));t.addStep(e.get(Ke.R.TOOLS_TAB_MANUAL_CRAWLING)).addStep(n.get(ae.n.WPCC_TOOLS_SITE_ID)).addStep(n.get(ae.n.WPCC_TOOLS_CATEGORY_ID)).addStep(i).addStep(s.get(be.BTN_MANUAL_CRAWLING_TOOL_CRAWL_NOW).addRequiredStep(i).setSkippable(!1)).addStep(s.get(be.MANUAL_CRAWLING_TOOL_RESULTS_CONTAINER))}}class fn extends St{getId(){return at.MANUALLY_UPDATING_POSTS}getStartPageType(){return d.TOOLS}prepareTourBuilder(t){const e=We.getInstance(),n=xe.getInstance(),s=Fe.getInstance(),i=n.get(ae.n.WPCC_TOOLS_RECRAWL_POST_ID).setSkippable(!1).addRule(new Te(pt.INT)),r=s.get(be.BTN_MANUAL_RECRAWLING_TOOL_RECRAWL).setNextable(!1).setSkippable(!1).addDesiredStateCheckerCommand(new Ne(`#${Ke.R.TOOLS_TAB_MANUAL_RECRAWLING} form .test-results`));t.addStep(e.get(Ke.R.TOOLS_TAB_MANUAL_RECRAWLING)).addStep(i).addStep(r.addRequiredStep(i)).addStep(s.get(be.MANUAL_RECRAWLING_TOOL_RESULTS_CONTAINER).addRequiredStep(r))}}class mn{constructor(t){this.handler=null,this.handler=t}execute(){return!!this.handler&&this.handler()}}class Sn extends Ce{constructor(...t){super(),this.validValues=t}onBindAdvanceHandler(){$(document).on("change",this.getInputSelector(),(t=>this.advance(t.target)))}onUnbindAdvanceHandler(){$(document).off("change",this.getInputSelector(),(t=>this.advance(t.target)))}onAdvance(t){const e=$(t).val();this.validValues.includes(e)&&this.next()}getInputSelector(){const t=this.getBuilder().getTargetElementSelector();return`${t}:input, ${t} :input`}}class Tn extends St{getId(){return at.SAVING_WOOCOMMERCE_PRODUCTS}getStartPageType(){return d.SITE_SETTINGS}prepareTourBuilder(t){const e=We.getInstance(),n=xe.getInstance(),s=Fe.getInstance(),i=n.get(ae.n.DO_NOT_USE_GENERAL_SETTINGS).addRule(new Te(pt.CHECKED)).setAdvanceStrategy(new Ee),r=n.get(ae.n.WPCC_POST_TYPE).addRule(Te.fromRuleMap((new Map).set(pt.VALID_VAL,"product"))).setAdvanceStrategy(new Sn("product")).setDetailsFromCustomKey(je.POST_TYPE_WOOCOMMERCE_PRODUCT),o=s.get(be.BTN_PUBLISH_UPDATE).addDesiredStateCheckerCommand(new mn((()=>B.isWooCommerceSettingsAvailable()))).setSkippable(!1).setNextable(!1);t.addStep(e.get(Ke.R.SITE_SETTINGS_TAB_MAIN)).addStep(i).addStep(e.get(Ke.R.SITE_SETTINGS_TAB_GENERAL_SETTINGS).addRequiredStep(i)).addStep(s.get(be.BTN_LOAD_GENERAL_SETTINGS).addRequiredStep(i)).addStep(r.addRequiredStep(i)).addStep(o.addRequiredStep(r)).addStep(e.get(Ke.R.SITE_SETTINGS_TAB_CATEGORY).addRequiredStep(o)).addStep(n.getInner(ae.n.CATEGORY_MAP,we.i.CATEGORY_ID).setDetailsFromCustomKey(je.CATEGORY_MAP_WOOCOMMERCE_CATEGORY)).addStep(e.get(Ke.R.SITE_SETTINGS_TAB_POST).addRequiredStep(o)).addStep(s.get(be.SECTION_WOOCOMMERCE)).addStep(s.get(be.BTN_QUICK_SAVE_SITE_SETTINGS).addRequiredStep(o))}}class vn extends St{getId(){return at.SAVING_FEATURED_IMAGES}getStartPageType(){return d.SITE_SETTINGS}prepareTourBuilder(t){const e=We.getInstance(),n=xe.getInstance(),s=Xe.getInstance(),i=Fe.getInstance(),r=n.get(ae.n.POST_SAVE_THUMBNAILS_IF_NOT_EXIST).addRule(new Te(pt.CHECKED)).setAdvanceStrategy(new Ee),o=s.get(ae.n.POST_THUMBNAIL_SELECTORS,Ie.DEV_TOOLS_IFRAME).addRequiredStep(r).setDetailsFromCustomKey(je.DEV_TOOLS_CLICK_FEATURED_IMAGE),a=n.getInner(ae.n.POST_THUMBNAIL_SELECTORS,Ie.BUTTON_TEST).addRequiredStep(r).addDesiredStateCheckerCommand(new Pe);t.addStep(e.get(Ke.R.SITE_SETTINGS_TAB_POST)).addStep(r).addStep(n.get(ae.n.POST_THUMBNAIL_SELECTORS).addRequiredStep(r).addEventListener(new en(o,g.t.devToolsOpened)).addEventListener(new Le(g.t.optionsBoxOpened))).addStep(n.getInner(ae.n.POST_THUMBNAIL_SELECTORS,Ie.BUTTON_DEV_TOOLS).addRequiredStep(r)).addStep(o).addStep(s.get(ae.n.POST_THUMBNAIL_SELECTORS,Ie.DEV_TOOLS_BTN_USE_SELECTOR).addRequiredStep(r)).addStep(a).addStep(n.getInner(ae.n.POST_THUMBNAIL_SELECTORS,Ie.TEST_RESULTS_CONTAINER,null).addRequiredStep(r,a).setDetailsFromCustomKey(je.OBSERVE_FOUND_FEATURED_IMAGE_URL)).addStep(i.get(be.BTN_QUICK_SAVE_SITE_SETTINGS))}}class Cn extends St{constructor(){super(...arguments),this.selectedTransServiceStep=null}getStartPageType(){return d.SITE_SETTINGS}prepareTourBuilder(t){const e=xe.getInstance(),n=We.getInstance(),s=Fe.getInstance(),i=tn.getInstance();t.addStep(e.get(ae.n.ACTIVE_TRANSLATION).addRule(new Te("checked")).setSkippable(!1).setAdvanceStrategy(new Ee)).addStep(s.get(be.BTN_QUICK_SAVE_SITE_SETTINGS)).addStep(i.get(d.GENERAL_SETTINGS)).setPage(mt.fromPageType(d.GENERAL_SETTINGS)).addStep(n.get(Ke.R.GENERAL_SETTINGS_TAB_TRANSLATION)).addStep(e.get(ae.n.WPCC_IS_TRANSLATION_ACTIVE).setSkippable(!1).addRule(new Te("checked")).setAdvanceStrategy(new Ee)).addStep(this.getSelectedTranslationServiceStep());const r=this.getApiCredentialsSteps();r.forEach((t=>t.addRequiredStep(this.getSelectedTranslationServiceStep()))),t.addStep(...r);const o=e.getInner(this.getTestKey(),Ie.TEST_TRANSLATION_OPTIONS_TEXTAREA,null).addRule(Te.fromRuleMap((new Map).set(pt.TEXT_LENGTH,"1,-1"))).setTetherOption(dt.TOP_LEFT__BOTTOM_LEFT).setDetailsFromCustomKey(je.TRANSLATION_TEST_TEXT).setSkippable(!1),a=e.getInner(this.getTestKey(),Ie.BUTTON_TEST,null).setTetherOption(dt.TOP_LEFT__BOTTOM_LEFT);t.addStep(e.get(this.getFromKey()).setDetailsFromCustomKey(je.TRANSLATION_FROM_LANGUAGE).addRequiredStep(this.getSelectedTranslationServiceStep())).addStep(e.get(this.getToKey()).setDetailsFromCustomKey(je.TRANSLATION_TO_LANGUAGE).addRequiredStep(this.getSelectedTranslationServiceStep())).addStep(o.addRequiredStep(this.getSelectedTranslationServiceStep())).addStep(a.addRequiredStep(o)).addStep(e.getInner(this.getTestKey(),Ie.TEST_RESULTS_CONTAINER,null).addRequiredStep(a)).addStep(s.get(be.BTN_SAVE_GENERAL_SETTINGS))}getSelectedTranslationServiceStep(){return null===this.selectedTransServiceStep&&(this.selectedTransServiceStep=xe.getInstance().get(ae.n.WPCC_SELECTED_TRANSLATION_SERVICE).addRule(Te.fromRuleMap((new Map).set(pt.VALID_VAL,this.getTranslationServiceKey())).addErrorMessage(pt.VALID_VAL,window.wpcc.please_select_x.replace("%s",this.getTranslationServiceName))).setAdvanceStrategy(new Sn(this.getTranslationServiceKey())).setSkippable(!1)),this.selectedTransServiceStep}}class En extends Cn{getId(){return at.TRANSLATING_WITH_YANDEX_TRANSLATE}getFromKey(){return ae.n.WPCC_TRANSLATION_YANDEX_TRANSLATE_FROM}getToKey(){return ae.n.WPCC_TRANSLATION_YANDEX_TRANSLATE_TO}getTestKey(){return ae.n.WPCC_TRANSLATION_YANDEX_TRANSLATE_TEST}getTranslationServiceKey(){return"yandex_translate"}getTranslationServiceName(){return"Yandex Translate"}getApiCredentialsSteps(){return[xe.getInstance().get(ae.n.WPCC_TRANSLATION_YANDEX_TRANSLATE_API_KEY).addRequiredStep(this.getSelectedTranslationServiceStep()).setSkippable(!1).addRule(Te.fromRuleMap((new Map).set(pt.TEXT_LENGTH,"1,-1")))]}}class In extends Cn{getId(){return at.TRANSLATING_WITH_GOOGLE_CLOUD_TRANSLATION}getFromKey(){return ae.n.WPCC_TRANSLATION_GOOGLE_TRANSLATE_FROM}getToKey(){return ae.n.WPCC_TRANSLATION_GOOGLE_TRANSLATE_TO}getTestKey(){return ae.n.WPCC_TRANSLATION_GOOGLE_TRANSLATE_TEST}getTranslationServiceKey(){return"google_translate"}getTranslationServiceName(){return"Google Cloud Translation"}getApiCredentialsSteps(){const t=xe.getInstance();return[t.get(ae.n.WPCC_TRANSLATION_GOOGLE_TRANSLATE_PROJECT_ID).addRequiredStep(this.getSelectedTranslationServiceStep()).setSkippable(!1).addRule(Te.fromRuleMap((new Map).set(pt.TEXT_LENGTH,"1,-1"))),t.get(ae.n.WPCC_TRANSLATION_GOOGLE_TRANSLATE_API_KEY).addRequiredStep(this.getSelectedTranslationServiceStep()).setSkippable(!1).addRule(Te.fromRuleMap((new Map).set(pt.TEXT_LENGTH,"1,-1")))]}}class bn extends Cn{getId(){return at.TRANSLATING_WITH_MICROSOFT_TRANSLATOR_TEXT}getFromKey(){return ae.n.WPCC_TRANSLATION_MICROSOFT_TRANSLATOR_TEXT_FROM}getToKey(){return ae.n.WPCC_TRANSLATION_MICROSOFT_TRANSLATOR_TEXT_TO}getTestKey(){return ae.n.WPCC_TRANSLATION_MICROSOFT_TRANSLATOR_TEXT_TEST}getTranslationServiceKey(){return"microsoft_translator_text"}getTranslationServiceName(){return"Microsoft Translator Text"}getApiCredentialsSteps(){return[xe.getInstance().get(ae.n.WPCC_TRANSLATION_MICROSOFT_TRANSLATOR_TEXT_CLIENT_SECRET).addRequiredStep(this.getSelectedTranslationServiceStep()).setSkippable(!1).addRule(Te.fromRuleMap((new Map).set(pt.TEXT_LENGTH,"1,-1")))]}}class wn extends Cn{getId(){return at.TRANSLATING_WITH_AMAZON_TRANSLATE}getFromKey(){return ae.n.WPCC_TRANSLATION_AMAZON_TRANSLATE_FROM}getToKey(){return ae.n.WPCC_TRANSLATION_AMAZON_TRANSLATE_TO}getTestKey(){return ae.n.WPCC_TRANSLATION_AMAZON_TRANSLATE_TEST}getTranslationServiceKey(){return"amazon_translate"}getTranslationServiceName(){return"Amazon Translate"}getApiCredentialsSteps(){const t=xe.getInstance();return[t.get(ae.n.WPCC_TRANSLATION_AMAZON_TRANSLATE_ACCESS_KEY).addRequiredStep(this.getSelectedTranslationServiceStep()).setSkippable(!1).addRule(Te.fromRuleMap((new Map).set(pt.TEXT_LENGTH,"1,-1"))),t.get(ae.n.WPCC_TRANSLATION_AMAZON_TRANSLATE_SECRET).addRequiredStep(this.getSelectedTranslationServiceStep()).setSkippable(!1).addRule(Te.fromRuleMap((new Map).set(pt.TEXT_LENGTH,"1,-1"))),t.get(ae.n.WPCC_TRANSLATION_AMAZON_TRANSLATE_REGION).addRequiredStep(this.getSelectedTranslationServiceStep()).setSkippable(!1)]}}class On{constructor(){this.guides=[],this.created=!1}static getInstance(){return e.u.getInstance().get("GuideRegistry",(()=>new On))}createGuides(){this.addGuide(new nn).addGuide(new ln).addGuide(new hn).addGuide(new rn).addGuide(new sn).addGuide(new on).addGuide(new an).addGuide(new dn).addGuide(new pn).addGuide(new cn).addGuide(new un).addGuide(new gn).addGuide(new vn).addGuide(new _n).addGuide(new fn).addGuide(new Tn).addGuide(new En).addGuide(new In).addGuide(new bn).addGuide(new wn)}getGuides(){return this.created||(this.createGuides(),this.created=!0),this.guides}getGuideWithId(t){if(null===(t||null))return null;for(let e of this.getGuides())if(e.getId()===t)return e;return null}addGuide(t){return this.guides.push(t),this}}class yn{constructor(){this.searchIndex=null,this.clsHidden="hidden",this.clsTourSummary="tour-summary",this.selectorGuideContainer="#wpcc-guide-list"}static getInstance(){return e.u.getInstance().get("GuideSearch",(()=>new yn))}performSearch(t){t=t.toLowerCase();const e=this.getSearchIndex(),n=[];for(let[s,i]of e.entries())-1!==i.indexOf(t)&&n.push(s);this.showGuides(n)}showGuides(t){this.hideAllGuides();const e=t.map((t=>`[data-id="${t}"]`)).join(",");this.getGuideListContainer().find(e).removeClass(this.clsHidden)}hideAllGuides(){return $(`${this.selectorGuideContainer} .${this.clsTourSummary}`).addClass(this.clsHidden),this}getSearchIndex(){return this.searchIndex||(this.searchIndex=this.createSearchIndex()),this.searchIndex}createSearchIndex(){const t=new Map;return On.getInstance().getGuides().forEach((e=>{t.set(e.getId().toString(),`${e.getName()} ${e.getId()} ${e.getDescription()}`.toLowerCase())})),t}getGuideListContainer(){return $("#wpcc-guide-list")}}class An extends St{getId(){return at.DISPLAY_GUIDES}getStartPageType(){return nt.getPageType()}prepareTourBuilder(t){const e=Fe.getInstance();t.addStep(e.get(be.BUTTON_DISPLAY_GUIDES))}}class Rn{constructor(){this.clsHidden="hidden",this.idGuides="wpcc-guides",this.idGuidePopup="wpcc-guide-popup",this.clsExpanded="expanded",this.scrollPos=null,$(document).on("click",`#${this.idGuides} .btn-show-guides`,(()=>this.toggleGuides())),$(document).on("click",`#${this.idGuidePopup}`,(t=>this.onClickOutside(t))),$(document).on("click",`#${this.idGuides} .tour-header`,(t=>this.onClickTourHeader(t))),$(document).on("click",`#${this.idGuides} .start-tour, #${this.idGuides} .start-step`,(t=>this.onClickStart(t))),$(document).on("keyup",'input[name="guide_search"]',(t=>this.onSearchQueryChanged(t))),$(document).on("keyup",(t=>{this.isShown()&&new q(t).getKey()===Y.ESCAPE&&this.hideGuides()})),this.addGuidesButton(),this.maybeAutoStart()}static getInstance(){return e.u.getInstance().get("Guides",(()=>new Rn))}maybeAutoStart(){setTimeout((()=>{this.maybeAutoStartStep()||this.maybeAutoShowGuide()}),2e3)}maybeAutoShowGuide(){const t=(new Map).set(at.SAVING_POSTS_AUTOMATICALLY,null).set(at.DISPLAY_GUIDES,(()=>new An)),e=On.getInstance(),n=nt.getPageType(),s=ot.getInstance();let i;for(let[r,o]of t.entries())if(!s.isAutoShown(r)){if(i=e.getGuideWithId(r),null===i){if(null===o)continue;i=o()}if(null!==i&&n===i.getStartPageType()){s.setAutoShown(r),i.start();break}}}maybeAutoStartStep(){const t=ot.getInstance().getAutoStartCookieForCurrentPage();if(!t)return!1;const e=On.getInstance().getGuideWithId(t.getGuideId());if(!e)return!1;const n=t.getStepIndex();return!(n>=e.getTourBuilder().getStepCount()||(e.start(n),ot.getInstance().removeAutoStartCookieForCurrentPage(),0))}onSearchQueryChanged(t){const e=$(t.target);null!==this.searchTimeoutHandle&&window.clearTimeout(this.searchTimeoutHandle),this.searchTimeoutHandle=window.setTimeout((()=>{this.searchTimeoutHandle=null,yn.getInstance().performSearch(e.val().toString())}),300)}onClickStart(t){const e=$(t.target),n=e.closest(".tour-summary");if(!n.length)return;r.c.removeErrorsInElement(n);const s=n.data("id");if(!s.length)return;const i=On.getInstance().getGuideWithId(s);if(null===i)return;const o=e.hasClass("start-tour")?n.find(".step-list .step-item:first-child .start-step"):e;if(!o.hasClass("start-step"))return void console.warn('Clicked element does not have "start-step" class');const a=o.closest(".step-summary");if(!a.length)return void console.warn("Step summary cannot be found for this step",o);const l=a.find(".step-details");if(!l.length)return void console.warn("Step details cannot be found for this step",o);const c=o.data("page-type"),u=o.data("redirectable")||!1;if(nt.getPageType()!==c&&!u){console.warn(`This step requires ${nt.getPageTypeName(c)} page and it is not redirectable.`);const t=r.c.trans("open_required_x_page_type_for_step").replace("%s",nt.getPageTypeName(c));return $(r.c.getErrorsAsHtml([t])).appendTo(l),void this.showTourSummary(n).scrollToGuideItem(a)}let h=parseInt(a.data("id"));this.hideGuides(),i.start(h)}toggleGuides(){this.isShown()?this.hideGuides():this.showGuides()}onClickOutside(t){$(t.target).attr("id")===this.idGuidePopup&&this.hideGuides()}onClickTourHeader(t){const e=$(t.target);if(e.hasClass("start-tour"))return;const n=e.closest(".tour-summary");n.length&&r.c.toggleClass(n,this.clsExpanded)}showTourSummary(t){return t.addClass(this.clsExpanded),this}hideTourSummary(t){return t.removeClass(this.clsExpanded),this}scrollToGuideItem(t){return r.c.scrollElementIntoView($("#wpcc-guide-list"),$("#wpcc-guide-list-inner"),t),this}showGuides(){this.scrollPos=$(window).scrollTop();const t=this.getGuidePopup(),e="initialized";if(!t.hasClass(e)){let n="";On.getInstance().getGuides().forEach((t=>{n+=t.getSummaryAsHtml()})),$("#wpcc-guide-list-inner").html(n),t.addClass(e)}t.removeClass(this.clsHidden)}hideGuides(){const t=this.getGuidePopup();t.hasClass(this.clsHidden)||t.addClass(this.clsHidden),null!==this.scrollPos&&$(window).scrollTop(this.scrollPos)}addGuidesButton(){const t=`\n            <div id="wpcc-guides">\n\n                <div class="btn-show-guides">\n                    <a role="button">${window.wpcc.guides}</a>\n                </div>\n            \n                <div id="wpcc-guide-popup" class="hidden">\n                    <div class="guide-popup-inner">\n                        <div class="guide-popup-header">\n                            <span class="guide-popup-title">${window.wpcc.guides}</span>\n                            <div class="guide-search-container">\n                                <span class="dashicons dashicons-search"></span>\n                                <input type="text" name="guide_search" placeholder="${window.wpcc.search_guides}">\n                            </div>\n                        </div>\n                        <div id="wpcc-guide-list" class="guide-list-container">\n                            <div id="wpcc-guide-list-inner" class="guide-list"></div>\n                        </div>\n                    </div>\n                </div>\n            \n            </div>\n        `;$(t).appendTo("body")}isShown(){const t=this.getGuidePopup();return t.length&&!t.hasClass("hidden")}getGuidePopup(){return $("#wpcc-guide-popup")}}class Nn{constructor(){this.selectorForm=".feature-request-form"}static getInstance(){return null===this.instance&&(this.instance=new Nn),this.instance}}Nn.instance=null;class Pn{constructor(){this.frv=Nn.getInstance()}static getInstance(){return null===this.instance&&(this.instance=new Pn),this.instance}}Pn.instance=null;class $n{static getInstance(){return e.u.getInstance().get("DevToolsListenerInitializer",(()=>new $n))}constructor(){let t=Ct.getInstance(),e=Lt.getInstance(),n=Pt.getInstance(),s=$t.getInstance(),i=Rt.getInstance(),r=At.getInstance(),o=Nt.getInstance();$(document).on("click",t.devToolsButtonSelector,(function(n){n.preventDefault();let s=$(n.target),i=s.data("wcc"),r=null,o=$(t.devToolsContentContainerSelector);t.postId=o.data("wcc").postId,t.$currentDevToolsButton=s,void 0!==i.urlSelector&&i.urlSelector.length||W.a.getInstance().maybeInjectUrlSelector(i,s),null!=i.urlSelector&&(r=i.urlSelector);let a=$(r).val()||null;e.showLightboxWithContent(null,a?a.toString():null)})),$(document).on("click",t.lightboxTitleSelector,(t=>e.closeLightbox())),$(document).on("click",t.backButtonSelector,(t=>s.onClickBack(t))),$(document).on("click",t.forwardButtonSelector,(t=>s.onClickForward(t))),$(document).on("click",t.refreshButtonSelector,(t=>s.onClickRefresh(t))),$(document).on("click",t.goButtonSelector,(t=>s.onClickGo(t))),$(document).on("click",t.cssTestSelector,(t=>i.onClickTest(t))),$(document).on("click",t.cssUseButtonSelector,(t=>i.onClickUseCssSelector())),$(document).on("click",t.cssClearHighlightsSelector,(t=>i.onClearHighlights(t))),$(document).on("click",t.cssRemoveElementsSelector,(t=>i.onRemoveElements(t))),$(document).on("click",t.cssShowAlternativesSelector,(t=>i.onShowAlternatives(t,void 0))),$(document).on("click",t.sidebarCloseSelector,(t=>o.onCloseSidebar(t))),$(document).on("click",t.lightboxContainerSelector+" "+t.sidebarOpenSelector,(t=>o.onOpenSidebar(t))),$(document).on("click",t.sidebarSectionToggleExpandSelector,(t=>o.onToggleExpand(t))),$(document).on("click",t.btnClearHistorySelector,(t=>s.onClickClearHistory(t))),$(document).on("click",t.sidebarSectionTitleSelector,(function(){$(this).closest("."+t.sidebarSectionClass).find("."+t.toggleExpandClass).first().trigger("click")})),$(document).on("click",t.sidebarSelector+" ."+t.classUrl,(t=>o.onClickHistoryUrl(t))),$(document).on("click",t.sidebarSelector+" ."+t.classCssSelector,(t=>o.onClickCssSelector(t))),$(document).on("mouseenter mouseleave",t.sidebarSelector+" ."+t.classCssSelector,(t=>o.onHoverCssSelector(t))),$(document).on("click",t.optHoverSelectSelector,(t=>r.onClickToggleHoverSelect(t))),$(document).on("change",t.optApplyManipulationOptionsSelector,(t=>s.onClickRefresh(t))),$(document).on("change",t.optRemoveScriptsSelector,(t=>s.onClickRefresh(t))),$(document).on("change",t.optRemoveStylesSelector,(t=>s.onClickRefresh(t))),$(document).on("click",t.buttonClearSelectedElementsSelector,(t=>n.clearSelectedElements())),$(document).on("keyup change",t.cssInputSelector,(t=>{let e=$(t.target).val();null!=e&&e.length?(n.clearHighlights(),n.highlight(e,void 0)):n.clearHighlights()})),$(document).on("keyup change",t.optTargetHTMLTagSelector,(t=>r.onChangeTargetHTMLTagInput(t))),$(document).on("keydown",t.devToolsContentSelector,(e=>{if($(e.target).is(":input")){let n=$(e.target);new q(e).getKey()===Y.ENTER&&(n.attr("id")==t.cssInputId&&$(t.cssTestSelector).trigger("click"),n.attr("id")==t.urlInputId&&$(t.goButtonSelector).trigger("click"))}else o.handleKeyPress(e)})),$(window).on("resize",(()=>{n.setIframeHeight()}))}}class Ln{constructor(){this.$wccNonce=$("#wcc_nonce"),this.refreshInputSelector='input[name="refresh"]',this.$nextRefreshIn=$(".next-refresh-in"),this.$remaining=$(".remaining"),this.$title=$("head > title").first(),this.remaining=0,this.timeoutId=null,this.selectorDashboardContainer="#dashboard-container",this.minSeconds=window.min_refresh_interval,this.titleRemainingRegex=/^(\([0-9]+\)\s)?/,$(document).on("change",this.refreshInputSelector,(t=>this.onRefreshIntervalChanged(t))),$(document).on("change","h2 .header select",(t=>this.onTableCountChanged(t)))}refreshTimeout(){this.remaining<0?clearTimeout(this.timeoutId):(this.$nextRefreshIn.removeClass("hidden"),this.updateRemainingText(),0==this.remaining?this.refresh():(this.remaining--,this.timeoutId=setTimeout((()=>this.refreshTimeout()),1e3)))}onRefreshIntervalChanged(t){const e=$(t.target),n=e.val();this.removeLoading(e),null!=this.timeoutId&&clearTimeout(this.timeoutId),null!=n&&n>this.minSeconds?(this.remaining=n,this.updateRemainingText(),this.timeoutId=setTimeout((()=>this.refreshTimeout()),0),$(document).trigger(jQuery.Event(g.t.dashboardRefreshCountdownStarted))):(this.remaining=-1,this.updateRemainingText(),this.$nextRefreshIn.addClass("hidden"))}refresh(){this.$nextRefreshIn.addClass("hidden");const t=$(this.refreshInputSelector);this.setLoading(t),$.post(window.ajaxurl,{wcc_nonce:this.$wccNonce.val(),action:window.pageActionKey,data:{cmd:"refresh_dashboard"}}).done((t=>{const e=$(t.view);$(this.selectorDashboardContainer).replaceWith(e.find(this.selectorDashboardContainer)),$(".content .details").each(((t,e)=>{flashBackground($(e))}))})).fail((t=>{console.log("fail"),console.log(t)})).always((()=>{this.removeLoading(t),$(this.refreshInputSelector).trigger("change")}))}updateRemainingText(){this.remaining<0?this.$title.text(this.$title.text().replace(this.titleRemainingRegex,"")):(this.$remaining.html(`${this.remaining}`),this.$title.text(this.$title.text().replace(this.titleRemainingRegex,`(${this.remaining}) `)))}flashBackground(t){t.stop().css("background-color","#b8ea84").animate({backgroundColor:"#FFFFFF"},1e3)}setLoading(t){t.addClass("loading")}removeLoading(t){t.removeClass("loading")}onTableCountChanged(t){const e=$(t.target),n=e.val(),s=e.attr("name");null!=n&&n&&null!=s&&s&&(this.setLoading(e),$.post(window.ajaxurl,{wcc_nonce:this.$wccNonce.val(),action:window.pageActionKey,data:{cmd:"refresh_section",value:n,optionKey:s}}).done((t=>{const n=$(t.view),i='select[name="'+s+'"]';e.closest(".details").replaceWith(n.find(i).first().closest(".details")),flashBackground($(i).closest(".details").first())})).fail((t=>{console.log("Fail"),console.log(t)})).always((()=>{this.removeLoading(e)})))}}class xn{constructor(){this.$columnActive=$(".column-_active"),this.$columnActiveRecrawling=$(".column-_active_recrawling"),this.$columnActivePostDeleting=$(".column-_active_post_deleting"),[this.$columnActive,this.$columnActiveRecrawling,this.$columnActivePostDeleting].forEach((t=>{t.on("change","input[type=checkbox]",(t=>this.handleCheckbox(t)))}))}handleCheckbox(t){const e=$(t.target),n=e[0].checked,s=e.data("post-id");if(null==s||!s)return void console.log("Post ID is not valid: "+s);const i=e.attr("name"),r={};r[i]=n,$.post(window.ajaxurl,{wcc_nonce:$("#wcc_nonce").val(),action:"wcc_site_list",post_id:s,data:r}).done((t=>{t[i]||(e[0].checked=!n)})).fail((t=>{console.log("Request failed: "+t.responseText),console.log(t),e[0].checked=!n}))}}class Dn{static init(){$(document).on("click",".wpcc-notice > button.notice-dismiss",(t=>{t.preventDefault(),$(t.currentTarget).closest(".wpcc-notice").remove()}))}}jQuery((function(t){e.u.getInstance();const n=nt.getPageType();Rn.getInstance(),n===d.TOOLS&&new _,n===d.SITE_TESTER&&new P,n===d.DASHBOARD&&new Ln,n===d.SITE_LISTING&&new xn,n===d.FEATURE_REQUEST&&Pn.getInstance(),n!==d.SITE_TESTER&&n!==d.DASHBOARD&&n!==d.SITE_LISTING&&Q.getInstance(),n===d.SITE_SETTINGS&&($n.getInstance(),qt.getInstance(),z.T.getInstance()),Dn.init()}))})()})();